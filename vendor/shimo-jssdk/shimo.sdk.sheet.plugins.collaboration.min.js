!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="https://assets.smcdn.cn/sheet/",r(r.s=781)}([,function(t,e){t.exports=shimo.sdk.sheet},,function(t,e){var r=Array.isArray;t.exports=r},,function(t,e,r){(function(t,n){var o=r(88),i={function:!0,object:!0},a=i[typeof e]&&e&&!e.nodeType?e:void 0,s=i[typeof t]&&t&&!t.nodeType?t:void 0,u=o(a&&s&&"object"==typeof n&&n),c=o(i[typeof self]&&self),l=o(i[typeof window]&&window),f=o(i[typeof this]&&this),p=u||l!==(f&&f.window)&&l||c||f||Function("return this")();t.exports=p}).call(e,r(30)(t),r(20))},function(t,e){t.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},,function(t,e,r){var n=r(87);t.exports=function(t,e){var r=t[e];return n(r)?r:void 0}},function(t,e){t.exports=function(t){return!!t&&"object"==typeof t}},function(t,e,r){var n=r(39),o=r(77),i=r(58),a=r(11),s=r(23),u=r(28);t.exports=function(t){var e=u(t);if(!e&&!a(t))return o(t);var r=i(t),c=!!r,l=r||[],f=l.length;for(var p in t)!n(t,p)||c&&("length"==p||s(p,f))||e&&"constructor"==p||l.push(p);return l}},function(t,e,r){var n=r(79),o=r(14),i=r(12);t.exports=function(t){return null!=t&&i(n(t))&&!o(t)}},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},,function(t,e,r){var n=r(6),o="[object Function]",i="[object GeneratorFunction]",a=Object.prototype.toString;t.exports=function(t){var e=n(t)?a.call(t):"";return e==o||e==i}},function(t,e,r){var n=r(9),o="[object Symbol]",i=Object.prototype.toString;t.exports=function(t){return"symbol"==typeof t||n(t)&&i.call(t)==o}},,,,,function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(234),o=r(329),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),a(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,function(e,o){t[o]=r&&"function"==typeof e?n(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},,function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},,,,,function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,,function(t,e,r){var n=r(61),o="[object Arguments]",i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=i.propertyIsEnumerable;t.exports=function(t){return n(t)&&a.call(t,"callee")&&(!u.call(t,"callee")||s.call(t)==o)}},function(t,e,r){var n=r(3),o=r(9),i="[object String]",a=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||!n(t)&&o(t)&&a.call(t)==i}},,function(t,e){t.exports=function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}},function(t,e,r){var n=r(89),o=r(44),i=r(90),a=r(80),s=r(91),u=r(41),c=Object.prototype.toString,l=u(n),f=u(o),p=u(i),h=u(a),d=u(s);function y(t){return c.call(t)}(n&&"[object DataView]"!=y(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||s&&"[object WeakMap]"!=y(new s))&&(y=function(t){var e=c.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?u(r):void 0;if(n)switch(n){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=y},,function(t,e,r){var n=r(57),o=Object.prototype.hasOwnProperty;t.exports=function(t,e){return o.call(t,e)||"object"==typeof t&&e in t&&null===n(t)}},,function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},,,function(t,e,r){var n=r(8)(r(5),"Map");t.exports=n},,,function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,r){var n=r(14),o=r(6),i=r(15),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(o(t)){var e=n(t.valueOf)?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=c.test(t);return r||l.test(t)?f(t.slice(2),r?2:8):u.test(t)?a:+t}},,,function(t,e,r){var n=r(29),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var i=t[e];o.call(t,e)&&n(i,r)&&(void 0!==r||e in t)||(t[e]=r)}},,,,,,function(t,e){var r=Object.getPrototypeOf;t.exports=function(t){return r(Object(t))}},function(t,e,r){var n=r(78),o=r(33),i=r(3),a=r(12),s=r(34);t.exports=function(t){var e=t?t.length:void 0;return a(e)&&(i(t)||s(t)||o(t))?n(e,String):null}},,,function(t,e,r){var n=r(11),o=r(9);t.exports=function(t){return o(t)&&n(t)}},,function(t,e,r){var n=r(51);t.exports=function(t,e,r,o){r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=o?o(r[s],t[s],s,r,t):t[s];n(r,s,u)}return r}},,,,,,,,function(t,e,r){var n=r(132),o=r(83),i="Expected a function",a=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError(i);return e=a(void 0===e?t.length-1:o(e),0),function(){for(var r=arguments,o=-1,i=a(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,r[0],s);case 2:return t.call(this,r[0],r[1],s)}var u=Array(e+1);for(o=-1;++o<e;)u[o]=r[o];return u[e]=s,n(t,this,u)}}},,,,,,function(t,e){var r=Object.keys;t.exports=function(t){return r(Object(t))}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(47)("length");t.exports=n},function(t,e,r){var n=r(8)(r(5),"Set");t.exports=n},,,function(t,e,r){var n=r(94);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e){t.exports=Zepto},,,function(t,e,r){var n=r(14),o=r(36),i=r(6),a=r(41),s=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,l=u.hasOwnProperty,f=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!!i(t)&&(n(t)||o(t)?f:s).test(a(t))}},function(t,e){t.exports=function(t){return t&&t.Object===Object?t:null}},function(t,e,r){var n=r(8)(r(5),"DataView");t.exports=n},function(t,e,r){var n=r(8)(r(5),"Promise");t.exports=n},function(t,e,r){var n=r(8)(r(5),"WeakMap");t.exports=n},,,function(t,e,r){var n=r(48),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=n(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},,,,,,,,,,,,,,,function(t,e,r){var n=r(51),o=r(63),i=r(166),a=r(11),s=r(28),u=r(10),c=Object.prototype,l=c.hasOwnProperty,f=!c.propertyIsEnumerable.call({valueOf:1},"valueOf"),p=i(function(t,e){if(f||s(e)||a(e))o(e,u(e),t);else for(var r in e)l.call(e,r)&&n(t,r,e[r])});t.exports=p},function(t,e,r){var n=r(29),o=r(11),i=r(23),a=r(6);t.exports=function(t,e,r){if(!a(r))return!1;var s=typeof e;return!!("number"==s?o(r)&&i(e,r.length):"string"==s&&e in r)&&n(r[e],t)}},,,,,,,,,,,,,,,,,,function(t,e,r){var n=r(148),o=r(71);t.exports=function(t){return o(function(e,r){var o=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&n(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++o<i;){var u=r[o];u&&t(e,u,o,a)}return e})}},,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";(function(e){var n=r(21),o=r(331),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=r(235):void 0!==e&&(t=r(235)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(t){s.headers[t]={}}),n.forEach(["post","put","patch"],function(t){s.headers[t]=n.merge(i)}),t.exports=s}).call(e,r(131))},function(t,e,r){"use strict";var n=r(354);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";var n=r(239),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,r,n){(!(e in t)||function(t){return"function"==typeof t&&"[object Function]"===i.call(t)}(n)&&n())&&(u?s(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},l=function(t,e){var r=arguments.length>2?arguments[2]:{},i=n(e);o&&(i=a.call(i,Object.getOwnPropertySymbols(e)));for(var s=0;s<i.length;s+=1)c(t,i[s],e[i[s]],r[i[s]])};l.supportsDescriptors=!!u,t.exports=l},,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new function(t,e,r){this.fn=t,this.context=e,this.once=r||!1}(r,n||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=o?o+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,a=new Array(i);n<i;n++)a[n]=r[n].fn;return a},u.prototype.listenerCount=function(t){var e=o?o+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,n,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,i),!0;case 6:return l.fn.call(l.context,e,r,n,i,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},u.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,n){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||s(this,i);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==e||n&&!a[u].once||r&&a[u].context!==r)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,t.exports=u},,,,,,,,function(t,e,r){(function(t){var n=r(233),o=r(5),i={function:!0,object:!0},a=i[typeof e]&&e&&!e.nodeType?e:void 0,s=i[typeof t]&&t&&!t.nodeType?t:void 0,u=(s&&s.exports===a?a:void 0)?o.Buffer:void 0,c=u?function(t){return t instanceof u}:n(!1);t.exports=c}).call(e,r(30)(t))},,,,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isRetina=function(){return window.devicePixelRatio>=2},e.isDingTalk=function(){return/dingtalk/i.test(r)},e.isDingtalk=function(){return!!r.match(/mobile.*dingtalk/i)},e.isDingtalkPc=function(){return/dingTalk\([^\\)]+\)/i.test(window.navigator.userAgent)},e.isWechatPc=n,e.isWechat=function(){return!!/micromessenger/.test(r)&&!n()},e.isMobile=function(){return!n()&&!!r.match(/(iphone|ipod|ipad|android|windows phone|micromessenger)/)},e.isDingtalkPcSidebar=function(){return!!document.getElementById("dingtalk-operation-wrap")},e.isIOS=o,e.isAndroid=function(){return!!/(android)/g.test(r)},e.isAndroidApp=function(){return!!/shimo-android-app/g.test(r)},e.isIE=function(){return/MSIE|Trident/.test(window.navigator.userAgent)},e.isFireFox=function(){return!!navigator.userAgent.match(/firefox/i)},e.isSafari=function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},e.isMac=function(){return/Mac|iPod|iPhone|iPad/.test(navigator.platform)},e.isWebIOS=function(){if(!window.cow.iOS&&o())return!0;return!1},e.isIphone6=function(){var t=!1;o()&&screen.height>568&&(t=!0);return t};var r=window.navigator.userAgent.toLowerCase();function n(){return!!/micromessenger.*?windowswechat/.test(r)}function o(){return!!/(ipad|iphone|ipod)/g.test(r)}},,,,,,,function(t,e,r){"use strict";var n=r(684),o=r(802),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),a(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,function(e,o){t[o]=r&&"function"==typeof e?n(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},,,,,function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(21),o=r(332),i=r(334),a=r(335),s=r(336),u=r(236);t.exports=function(t){return new Promise(function(e,c){var l=t.data,f=t.headers;n.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var h=t.auth.username||"",d=t.auth.password||"";f.Authorization="Basic "+btoa(h+":"+d)}if(p.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:t,request:p};o(e,c,n),p=null}},p.onerror=function(){c(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var y=r(337),v=(t.withCredentials||s(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in p&&n.forEach(f,function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),c(t),p=null)}),void 0===l&&(l=null),p.send(l)})}},function(t,e,r){"use strict";var n=r(333);t.exports=function(t,e,r,o,i){var a=new Error(t);return n(a,e,r,o,i)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){"use strict";var n=Array.prototype.slice,o=r(240),i=Object.keys,a=i?function(t){return i(t)}:r(349),s=Object.keys;a.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?s(n.call(t)):s(t)}):Object.keys=a;return Object.keys||a},t.exports=a},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e,r){"use strict";var n=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==n(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,r){"use strict";var n=r(241),o=r(189).supportsDescriptors,i=Object.getOwnPropertyDescriptor,a=TypeError;t.exports=function(){if(!o)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return n}},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r(328)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(677),o=r(788);e.delay=o.delay,e.uuid=function(){return n.v4().replace(/-/g,"")},e.version="0.14.4",function(t){t.NEW_CHANGE="newEditorChange",t.NEW_CHANGE_SAVED_TO_STORAGE="newEditorChangeSavedToStorage",t.NEW_CHANGE_SAVE_TO_STORAGE_FAILED="newEditorChangeSaveToStorageFailed",t.SERVER_CHANGE_APPLIED="serverChangeApplied",t.SERVER_CHANGE_PROCESSED="serverChangeProcessed",t.ACCEPT="accept",t.ACCEPT_COMMIT="acceptCommit",t.ACCEPT_FAILED="acceptFailed",t.WAITING_FOR_CAN_HANDLE_SERVER_CHANGES="waitingForCanHandleServerChanges",t.BEFORE_SEND_REQUEST="beforeSendRequest",t.SEND_REQUEST_DONE="sendRequestDone",t.SEND_REQUEST_FAILED="sendRequestFailed",t.BEFORE_APPLY_CHANGE="beforeApplyChange",t.CHANGE="change",t.CHANGES="changes",t.SAVE_STATUS_CHANGE="saveStatusChange",t.COLLABORATOR="collaborator",t.ENTER="enter",t.LEAVE="leave",t.SELECT="select",t.BROADCAST="broadcast",t.ERROR="error",t.WARNING="warning",t.NETWORK_CHANGE="networkChange"}(e.Event||(e.Event={})),e.debounce=function(t,e,r){var n;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return new Promise(function(i){var a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||i(t.apply(void 0,o))},e),a&&i(t.apply(void 0,o))})}},e.colors=["#A69ACA","#EC6E79","#F39801","#00A496","#FFD900","#674599","#83D4E7","#AF7C4F","#B8D200","#9D5B8B","#F15B1C","#41464B","#CD9F00","#47885E","#D7003B","#436EC9","#F897C7","#9C4109","#6E7A56","#83D4E7","#83609C","#F8DCDB","#E7C39C","#87B151","#9E0038","#B09FC9","#7DCFC8","#BEE7F0","#CD9F00","#CBAAC2","#F5C5C9","#CD8C28","#1A5A52","#9EB4E1","#406619","#CAB738","#F6C751","#8D699D","#613A14","#189DEC"],e.last=function(t){if(0!==t.length)return t[t.length-1]};var i=function(){return function(t,r,n){this.message="Unknown error",this.code="ERR_UNKNOWN",this.version=e.version,this.message=t,this.code=r,n&&(this.origin=n,this.stack=n.message+n.stack)}}();e.CollaborationError=i,e.ERROR={ERR_CHANGE_NOT_CONTINUOUS:"ERR_CHANGE_NOT_CONTINUOUS",ERR_ASSERTION:"ERR_ASSERTION",ERR_FN_INVOKE:"ERR_FN_INVOKE",ERR_PULL:"ERR_PULL",ERR_SENDER:"ERR_SENDER",ERR_APPLY_CHANGE:"ERR_APPLY_CHANGE",ERR_STORAGE_SET:"ERR_STORAGE_SET",ERR_PULL_4XX:"ERR_PULL_4XX",ERR_DISCONTINUOUS:"ERR_DISCONTINUOUS",ERR_CHANGES_DISCONTINUOUS:"ERR_CHANGES_DISCONTINUOUS"},e.noop=function(){},e.setReadonly=function(t){"function"==typeof t.disable&&t.disable(),"function"==typeof t.updateOptions&&t.updateOptions({editable:!1})},e.setEditable=function(t){"function"==typeof t.enable&&t.enable(),"function"==typeof t.updateOptions&&t.updateOptions({editable:!0})}},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]))o.call(r,c)&&(s[c]=r[c]);if(n){a=n(r);for(var l=0;l<a.length;l++)i.call(r,a[l])&&(s[a[l]]=r[a[l]])}}return s}},,,,,,,,,,,,function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,r){var n=function(t){return t&&t.__esModule?t:{default:t}}(r(268));var o="";function i(){return window&&window.cow&&window.cow.currentUser&&window.cow.currentUser.id}t.exports=function(t,e,r,a,s){if(o&&"Script error."!==t&&s){var u={msg:t,url:window.location.href,error_name:s.name,error_message:s.message,error_stack:s.stack,error_file:e,tag:function(){var t="",e=window&&window.cow&&window.cow.currentFile&&window.cow.currentFile.type;t=e?-3===e||"sheet"===e?"RICHDOC":"MODOC":"NONE";return"SDK_SHEET_ERR_"+t}(),seq:window&&window.usingNewSeq?"SHEET_NEW_SEQ":"SHEET_OLD_SEQ",user_type:i()<0?"ANONYMOUS_USER":"NORMAL_USER",user_id:i(),user_agent:window.navigator.userAgent},c=JSON.stringify(u);window._lastJSErrorString!==c&&n.default.post(o,u),window._lastJSErrorString=c}},t.exports.setTrackUrl=function(t){o=t}},function(t,e,r){var n=r(37),o=r(33),i=r(3),a=r(11),s=r(217),u=r(14),c=r(9),l=r(34),f=r(10),p="[object Map]",h="[object Set]",d=Object.prototype,y=d.hasOwnProperty,v=!d.propertyIsEnumerable.call({valueOf:1},"valueOf");t.exports=function(t){if(a(t)&&(i(t)||l(t)||u(t.splice)||o(t)||s(t)))return!t.length;if(c(t)){var e=n(t);if(e==p||e==h)return!t.size}for(var r in t)if(y.call(t,r))return!1;return!(v&&f(t).length)}},function(t,e){var r=9007199254740991,n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",a=/^(?:0|[1-9]\d*)$/;var s=Object.prototype,u=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable,f=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),p=Math.max,h=!l.call({valueOf:1},"valueOf");function d(t,e){var r=b(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&w(t)}(t)&&u.call(t,"callee")&&(!l.call(t,"callee")||c.call(t)==n)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!u.call(t,a)||i&&("length"==a||v(a,o))||r.push(a);return r}function y(t,e,r){var n=t[e];u.call(t,e)&&m(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function v(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}function g(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||s)}function m(t,e){return t===e||t!=t&&e!=e}var b=Array.isArray;function w(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=_(t)?c.call(t):"";return e==o||e==i}(t)}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var E=function(t){return function(t,e){return e=p(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=p(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,e,r){if(!_(r))return!1;var n=typeof e;return!!("number"==n?w(r)&&v(e,r.length):"string"==n&&e in r)&&m(r[e],t)}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,i)}return e})}(function(t,e){if(h||g(e)||w(e))!function(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;y(r,a,void 0===s?t[a]:s)}}(e,function(t){return w(t)?d(t):function(t){if(!g(t))return f(t);var e=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}(e),t);else for(var r in e)u.call(e,r)&&y(t,r,e[r])});t.exports=E},,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=r(21),o=r(234),i=r(330),a=r(187);function s(t){var e=new i(t),r=o(i.prototype.request,e);return n.extend(r,i.prototype,e),n.extend(r,e),r}var u=s(a);u.Axios=i,u.create=function(t){return s(n.merge(a,t))},u.Cancel=r(238),u.CancelToken=r(343),u.isCancel=r(237),u.all=function(t){return Promise.all(t)},u.spread=r(344),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,r){"use strict";var n=r(187),o=r(21),i=r(338),a=r(339);function s(t){this.defaults=t,this.interceptors={request:new i,response:new i}}s.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},o.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,r){return this.request(o.merge(r||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,r,n){return this.request(o.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=s},function(t,e,r){"use strict";var n=r(21);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},function(t,e,r){"use strict";var n=r(236);t.exports=function(t,e,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t}},function(t,e,r){"use strict";var n=r(21);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var a=[];n.forEach(e,function(t,e){null!==t&&void 0!==t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),i=a.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,r){"use strict";var n=r(21),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,a={};return t?(n.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}}),a):a}},function(t,e,r){"use strict";var n=r(21);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=o(window.location.href),function(e){var r=n.isString(e)?o(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(21);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(21);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,r){"use strict";var n=r(21),o=r(340),i=r(237),a=r(187),s=r(341),u=r(342);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,r){"use strict";var n=r(21);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(238);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){(function(t,r){var n=200,o="Expected a function",i="__lodash_hash_undefined__",a=1,s=2,u=1/0,c=9007199254740991,l="[object Arguments]",f="[object Array]",p="[object Boolean]",h="[object Date]",d="[object Error]",y="[object Function]",v="[object GeneratorFunction]",g="[object Map]",m="[object Number]",b="[object Object]",w="[object RegExp]",_="[object Set]",E="[object String]",C="[object Symbol]",O="[object ArrayBuffer]",S="[object DataView]",A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/,R=/^\./,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P[l]=P[f]=P[O]=P[p]=P[S]=P[h]=P[d]=P[y]=P[g]=P[m]=P[b]=P[w]=P[_]=P[E]=P["[object WeakMap]"]=!1;var N="object"==typeof t&&t&&t.Object===Object&&t,D="object"==typeof self&&self&&self.Object===Object&&self,F=N||D||Function("return this")(),L="object"==typeof e&&e&&!e.nodeType&&e,M=L&&"object"==typeof r&&r&&!r.nodeType&&r,U=M&&M.exports===L&&N.process,H=function(){try{return U&&U.binding("util")}catch(t){}}(),G=H&&H.isTypedArray;function B(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function $(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function V(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}function q(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function W(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var z=Array.prototype,Y=Function.prototype,K=Object.prototype,X=F["__core-js_shared__"],Q=function(){var t=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Z=Y.toString,tt=K.hasOwnProperty,et=K.toString,rt=RegExp("^"+Z.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F.Symbol,ot=F.Uint8Array,it=K.propertyIsEnumerable,at=z.splice,st=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),ut=Ht(F,"DataView"),ct=Ht(F,"Map"),lt=Ht(F,"Promise"),ft=Ht(F,"Set"),pt=Ht(F,"WeakMap"),ht=Ht(Object,"create"),dt=zt(ut),yt=zt(ct),vt=zt(lt),gt=zt(ft),mt=zt(pt),bt=nt?nt.prototype:void 0,wt=bt?bt.valueOf:void 0,_t=bt?bt.toString:void 0;function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ot;++e<r;)this.add(t[e])}function At(t){this.__data__=new Ct(t)}function kt(t,e){var r=Qt(t)||Xt(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!tt.call(t,i)||o&&("length"==i||Bt(i,n))||r.push(i);return r}function Rt(t,e){for(var r=t.length;r--;)if(Kt(t[r][0],e))return r;return-1}Et.prototype.clear=function(){this.__data__=ht?ht(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(ht){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return ht?void 0!==e[t]:tt.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=ht&&void 0===e?i:e,this},Ct.prototype.clear=function(){this.__data__=[]},Ct.prototype.delete=function(t){var e=this.__data__,r=Rt(e,t);return!(r<0||(r==e.length-1?e.pop():at.call(e,r,1),0))},Ct.prototype.get=function(t){var e=this.__data__,r=Rt(e,t);return r<0?void 0:e[r][1]},Ct.prototype.has=function(t){return Rt(this.__data__,t)>-1},Ct.prototype.set=function(t,e){var r=this.__data__,n=Rt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ot.prototype.clear=function(){this.__data__={hash:new Et,map:new(ct||Ct),string:new Et}},Ot.prototype.delete=function(t){return Ut(this,t).delete(t)},Ot.prototype.get=function(t){return Ut(this,t).get(t)},Ot.prototype.has=function(t){return Ut(this,t).has(t)},Ot.prototype.set=function(t,e){return Ut(this,t).set(t,e),this},St.prototype.add=St.prototype.push=function(t){return this.__data__.set(t,i),this},St.prototype.has=function(t){return this.__data__.has(t)},At.prototype.clear=function(){this.__data__=new Ct},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Ct){var o=r.__data__;if(!ct||o.length<n-1)return o.push([t,e]),this;r=this.__data__=new Ot(o)}return r.set(t,e),this};var Tt=function(t,e){return function(r,n){if(null==r)return r;if(!Zt(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}(function(t,e){return t&&jt(t,e,ae)}),jt=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}();function xt(t,e){for(var r=0,n=(e=$t(e,t)?[e]:Lt(e)).length;null!=t&&r<n;)t=t[Jt(e[r++])];return r&&r==n?t:void 0}function It(t,e){return null!=t&&e in Object(t)}function Pt(t,e,r,n,o){return t===e||(null==t||null==e||!re(t)&&!ne(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var u=Qt(t),c=Qt(e),y=f,v=f;u||(y=(y=Gt(t))==l?b:y);c||(v=(v=Gt(e))==l?b:v);var A=y==b&&!q(t),k=v==b&&!q(e),R=y==v;if(R&&!A)return i||(i=new At),u||ie(t)?Mt(t,e,r,n,o,i):function(t,e,r,n,o,i,u){switch(r){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!n(new ot(t),new ot(e)));case p:case h:case m:return Kt(+t,+e);case d:return t.name==e.name&&t.message==e.message;case w:case E:return t==e+"";case g:var c=W;case _:var l=i&s;if(c||(c=J),t.size!=e.size&&!l)return!1;var f=u.get(t);if(f)return f==e;i|=a,u.set(t,e);var y=Mt(c(t),c(e),n,o,i,u);return u.delete(t),y;case C:if(wt)return wt.call(t)==wt.call(e)}return!1}(t,e,y,r,n,o,i);if(!(o&s)){var T=A&&tt.call(t,"__wrapped__"),j=k&&tt.call(e,"__wrapped__");if(T||j){var x=T?t.value():t,I=j?e.value():e;return i||(i=new At),r(x,I,n,o,i)}}if(!R)return!1;return i||(i=new At),function(t,e,r,n,o,i){var a=o&s,u=ae(t),c=u.length,l=ae(e).length;if(c!=l&&!a)return!1;for(var f=c;f--;){var p=u[f];if(!(a?p in e:tt.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var y=a;++f<c;){p=u[f];var v=t[p],g=e[p];if(n)var m=a?n(g,v,p,e,t,i):n(v,g,p,t,e,i);if(!(void 0===m?v===g||r(v,g,n,o,i):m)){d=!1;break}y||(y="constructor"==p)}if(d&&!y){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,o,i)}(t,e,Pt,r,n,o))}function Nt(t){return!(!re(t)||function(t){return!!Q&&Q in t}(t))&&(te(t)||q(t)?rt:x).test(zt(t))}function Dt(t){return"function"==typeof t?t:null==t?se:"object"==typeof t?Qt(t)?function(t,e){if($t(t)&&Vt(e))return qt(Jt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:xt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=$t(e,t)?[e]:Lt(e)).length;for(;++o<i;){var a=Jt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ee(i)&&Bt(a,i)&&(Qt(t)||Xt(t))}(t,e,It)}(r,t):Pt(e,n,void 0,a|s)}}(t[0],t[1]):function(t){var e=function(t){var e=ae(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Vt(o)]}return e}(t);if(1==e.length&&e[0][2])return qt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var c=r[o];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){var l=(c=r[o])[0],f=t[l],p=c[1];if(u&&c[2]){if(void 0===f&&!(l in t))return!1}else{var h=new At;if(n)var d=n(f,p,l,t,e,h);if(!(void 0===d?Pt(p,f,n,a|s,h):d))return!1}}return!0}(r,t,e)}}(t):function(t){return $t(t)?function(t){return function(e){return null==e?void 0:e[t]}}(Jt(t)):function(t){return function(e){return xt(e,t)}}(t)}(t)}function Ft(t){if(!function(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||K;return t===r}(t))return st(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Lt(t){return Qt(t)?t:Wt(t)}function Mt(t,e,r,n,o,i){var u=o&s,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var p=-1,h=!0,d=o&a?new St:void 0;for(i.set(t,e),i.set(e,t);++p<c;){var y=t[p],v=e[p];if(n)var g=u?n(v,y,p,e,t,i):n(y,v,p,t,e,i);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!$(e,function(t,e){if(!d.has(e)&&(y===t||r(y,t,n,o,i)))return d.add(e)})){h=!1;break}}else if(y!==v&&!r(y,v,n,o,i)){h=!1;break}}return i.delete(t),i.delete(e),h}function Ut(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function Ht(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Nt(r)?r:void 0}var Gt=function(t){return et.call(t)};function Bt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function $t(t,e){if(Qt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!oe(t))||(k.test(t)||!A.test(t)||null!=e&&t in Object(e))}function Vt(t){return t==t&&!re(t)}function qt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(ut&&Gt(new ut(new ArrayBuffer(1)))!=S||ct&&Gt(new ct)!=g||lt&&"[object Promise]"!=Gt(lt.resolve())||ft&&Gt(new ft)!=_||pt&&"[object WeakMap]"!=Gt(new pt))&&(Gt=function(t){var e=et.call(t),r=e==b?t.constructor:void 0,n=r?zt(r):void 0;if(n)switch(n){case dt:return S;case yt:return g;case vt:return"[object Promise]";case gt:return _;case mt:return"[object WeakMap]"}return e});var Wt=Yt(function(t){t=function(t){return null==t?"":function(t){if("string"==typeof t)return t;if(oe(t))return _t?_t.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}(t)}(t);var e=[];return R.test(t)&&e.push(""),t.replace(T,function(t,r,n,o){e.push(n?o.replace(j,"$1"):r||t)}),e});function Jt(t){if("string"==typeof t||oe(t))return t;var e=t+"";return"0"==e&&1/t==-u?"-0":e}function zt(t){if(null!=t){try{return Z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Yt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(o);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Yt.Cache||Ot),r}function Kt(t,e){return t===e||t!=t&&e!=e}function Xt(t){return function(t){return ne(t)&&Zt(t)}(t)&&tt.call(t,"callee")&&(!it.call(t,"callee")||et.call(t)==l)}Yt.Cache=Ot;var Qt=Array.isArray;function Zt(t){return null!=t&&ee(t.length)&&!te(t)}function te(t){var e=re(t)?et.call(t):"";return e==y||e==v}function ee(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function re(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ne(t){return!!t&&"object"==typeof t}function oe(t){return"symbol"==typeof t||ne(t)&&et.call(t)==C}var ie=G?function(t){return function(e){return t(e)}}(G):function(t){return ne(t)&&ee(t.length)&&!!P[et.call(t)]};function ae(t){return Zt(t)?kt(t):Ft(t)}function se(t){return t}r.exports=function(t,e,r){var n=Qt(t)?B:V,o=arguments.length<3;return n(t,Dt(e),r,o,Tt)}}).call(e,r(20),r(30)(t))},function(t,e,r){(function(t,r){var n=200,o="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Boolean]",u="[object Date]",c="[object Function]",l="[object GeneratorFunction]",f="[object Map]",p="[object Number]",h="[object Object]",d="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",E="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",R="[object Uint32Array]",T=/\w*$/,j=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,I={};I[a]=I["[object Array]"]=I[m]=I[b]=I[s]=I[u]=I[w]=I[_]=I[E]=I[C]=I[O]=I[f]=I[p]=I[h]=I[d]=I[y]=I[v]=I[g]=I[S]=I[A]=I[k]=I[R]=!0,I["[object Error]"]=I[c]=I["[object WeakMap]"]=!1;var P="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,D=P||N||Function("return this")(),F="object"==typeof e&&e&&!e.nodeType&&e,L=F&&"object"==typeof r&&r&&!r.nodeType&&r,M=L&&L.exports===F;function U(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function G(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function B(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function $(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function V(t,e){return function(r){return t(e(r))}}function q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W=Array.prototype,J=Function.prototype,z=Object.prototype,Y=D["__core-js_shared__"],K=function(){var t=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),X=J.toString,Q=z.hasOwnProperty,Z=z.toString,tt=RegExp("^"+X.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=M?D.Buffer:void 0,rt=D.Symbol,nt=D.Uint8Array,ot=V(Object.getPrototypeOf,Object),it=Object.create,at=z.propertyIsEnumerable,st=W.splice,ut=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,lt=V(Object.keys,Object),ft=Ft(D,"DataView"),pt=Ft(D,"Map"),ht=Ft(D,"Promise"),dt=Ft(D,"Set"),yt=Ft(D,"WeakMap"),vt=Ft(Object,"create"),gt=Gt(ft),mt=Gt(pt),bt=Gt(ht),wt=Gt(dt),_t=Gt(yt),Et=rt?rt.prototype:void 0,Ct=Et?Et.valueOf:void 0;function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){this.__data__=new St(t)}function Rt(t,e){var r=$t(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Vt(t)}(t)&&Q.call(t,"callee")&&(!at.call(t,"callee")||Z.call(t)==a)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!Q.call(t,i)||o&&("length"==i||Ut(i,n))||r.push(i);return r}function Tt(t,e,r){var n=t[e];Q.call(t,e)&&Bt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function jt(t,e){for(var r=t.length;r--;)if(Bt(t[r][0],e))return r;return-1}function xt(t,e,r,n,o,i,j){var x;if(n&&(x=i?n(t,o,i,j):n(t)),void 0!==x)return x;if(!Jt(t))return t;var P=$t(t);if(P){if(x=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&Q.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,x)}else{var N=Mt(t),D=N==c||N==l;if(qt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(N==h||N==a||D&&!i){if(B(t))return i?t:{};if(x=function(t){return"function"!=typeof t.constructor||Ht(t)?{}:function(t){return Jt(t)?it(t):{}}(ot(t))}(D?{}:t),!e)return function(t,e){return Nt(t,Lt(t),e)}(t,function(t,e){return t&&Nt(e,zt(e),t)}(x,t))}else{if(!I[N])return i?t:{};x=function(t,e,r,n){var o=t.constructor;switch(e){case m:return Pt(t);case s:case u:return new o(+t);case b:return function(t,e){var r=e?Pt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case _:case E:case C:case O:case S:case A:case k:case R:return function(t,e){var r=e?Pt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case f:return function(t,e,r){return G(e?r($(t),!0):$(t),U,new t.constructor)}(t,n,r);case p:case v:return new o(t);case d:return function(t){var e=new t.constructor(t.source,T.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,r){return G(e?r(q(t),!0):q(t),H,new t.constructor)}(t,n,r);case g:return function(t){return Ct?Object(Ct.call(t)):{}}(t)}}(t,N,xt,e)}}j||(j=new kt);var F=j.get(t);if(F)return F;if(j.set(t,x),!P)var L=r?function(t){return function(t,e,r){var n=e(t);return $t(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,zt,Lt)}(t):zt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(L||t,function(o,i){L&&(o=t[i=o]),Tt(x,i,xt(o,e,r,n,i,t,j))}),x}function It(t){return!(!Jt(t)||function(t){return!!K&&K in t}(t))&&(Wt(t)||B(t)?tt:j).test(Gt(t))}function Pt(t){var e=new t.constructor(t.byteLength);return new nt(e).set(new nt(t)),e}function Nt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;Tt(r,a,void 0===s?t[a]:s)}return r}function Dt(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return It(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=vt?vt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(vt){var r=e[t];return r===o?void 0:r}return Q.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return vt?void 0!==e[t]:Q.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=vt&&void 0===e?o:e,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(t){var e=this.__data__,r=jt(e,t);return!(r<0||(r==e.length-1?e.pop():st.call(e,r,1),0))},St.prototype.get=function(t){var e=this.__data__,r=jt(e,t);return r<0?void 0:e[r][1]},St.prototype.has=function(t){return jt(this.__data__,t)>-1},St.prototype.set=function(t,e){var r=this.__data__,n=jt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},At.prototype.clear=function(){this.__data__={hash:new Ot,map:new(pt||St),string:new Ot}},At.prototype.delete=function(t){return Dt(this,t).delete(t)},At.prototype.get=function(t){return Dt(this,t).get(t)},At.prototype.has=function(t){return Dt(this,t).has(t)},At.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},kt.prototype.clear=function(){this.__data__=new St},kt.prototype.delete=function(t){return this.__data__.delete(t)},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof St){var o=r.__data__;if(!pt||o.length<n-1)return o.push([t,e]),this;r=this.__data__=new At(o)}return r.set(t,e),this};var Lt=ut?V(ut,Object):function(){return[]},Mt=function(t){return Z.call(t)};function Ut(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||x.test(t))&&t>-1&&t%1==0&&t<e}function Ht(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||z)}function Gt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(ft&&Mt(new ft(new ArrayBuffer(1)))!=b||pt&&Mt(new pt)!=f||ht&&"[object Promise]"!=Mt(ht.resolve())||dt&&Mt(new dt)!=y||yt&&"[object WeakMap]"!=Mt(new yt))&&(Mt=function(t){var e=Z.call(t),r=e==h?t.constructor:void 0,n=r?Gt(r):void 0;if(n)switch(n){case gt:return b;case mt:return f;case bt:return"[object Promise]";case wt:return y;case _t:return"[object WeakMap]"}return e});var $t=Array.isArray;function Vt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Wt(t)}var qt=ct||function(){return!1};function Wt(t){var e=Jt(t)?Z.call(t):"";return e==c||e==l}function Jt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function zt(t){return Vt(t)?Rt(t):function(t){if(!Ht(t))return lt(t);var e=[];for(var r in Object(t))Q.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}r.exports=function(t){return xt(t,!0,!0)}}).call(e,r(20),r(30)(t))},function(t,e){var r=-1,n=1,o=0;function i(t,e,c,l){if(t===e)return t?[[o,t]]:[];if(null!=c){var d=function(t,e,r){var n="number"==typeof r?{index:r,length:0}:r.oldRange,o="number"==typeof r?null:r.newRange,i=t.length,a=e.length;if(0===n.length&&(null===o||0===o.length)){var s=n.index,u=t.slice(0,s),c=t.slice(s),l=o?o.index:null,f=s+a-i;if((null===l||l===f)&&!(f<0||f>a)){var p=e.slice(0,f),d=e.slice(f);if(d===c){var y=Math.min(s,f),v=u.slice(0,y),g=p.slice(0,y);if(v===g){var m=u.slice(y),b=p.slice(y);return h(v,m,b,c)}}}if(null===l||l===s){var w=s,p=e.slice(0,w),d=e.slice(w);if(p===u){var _=Math.min(i-w,a-w),E=c.slice(c.length-_),C=d.slice(d.length-_);if(E===C){var m=c.slice(0,c.length-_),b=d.slice(0,d.length-_);return h(u,m,b,E)}}}}if(n.length>0&&o&&0===o.length){var v=t.slice(0,n.index),E=t.slice(n.index+n.length),y=v.length,_=E.length;if(!(a<y+_)){var g=e.slice(0,y),C=e.slice(a-_);if(v===g&&E===C){var m=t.slice(y,i-_),b=e.slice(y,a-_);return h(v,m,b,E)}}}return null}(t,e,c);if(d)return d}var y=s(t,e),v=t.substring(0,y);y=u(t=t.substring(y),e=e.substring(y));var g=t.substring(t.length-y),m=function(t,e){var c;if(!t)return[[n,e]];if(!e)return[[r,t]];var l=t.length>e.length?t:e,f=t.length>e.length?e:t,p=l.indexOf(f);if(-1!==p)return c=[[n,l.substring(0,p)],[o,f],[n,l.substring(p+f.length)]],t.length>e.length&&(c[0][0]=c[2][0]=r),c;if(1===f.length)return[[r,t],[n,e]];var h=function(t,e){var r=t.length>e.length?t:e,n=t.length>e.length?e:t;if(r.length<4||2*n.length<r.length)return null;function o(t,e,r){for(var n,o,i,a,c=t.substring(r,r+Math.floor(t.length/4)),l=-1,f="";-1!==(l=e.indexOf(c,l+1));){var p=s(t.substring(r),e.substring(l)),h=u(t.substring(0,r),e.substring(0,l));f.length<h+p&&(f=e.substring(l-h,l)+e.substring(l,l+p),n=t.substring(0,r-h),o=t.substring(r+p),i=e.substring(0,l-h),a=e.substring(l+p))}return 2*f.length>=t.length?[n,o,i,a,f]:null}var i,a,c,l,f,p=o(r,n,Math.ceil(r.length/4)),h=o(r,n,Math.ceil(r.length/2));if(!p&&!h)return null;i=h?p&&p[4].length>h[4].length?p:h:p;t.length>e.length?(a=i[0],c=i[1],l=i[2],f=i[3]):(l=i[0],f=i[1],a=i[2],c=i[3]);var d=i[4];return[a,c,l,f,d]}(t,e);if(h){var d=h[0],y=h[1],v=h[2],g=h[3],m=h[4],b=i(d,v),w=i(y,g);return b.concat([[o,m]],w)}return function(t,e){for(var o=t.length,i=e.length,s=Math.ceil((o+i)/2),u=s,c=2*s,l=new Array(c),f=new Array(c),p=0;p<c;p++)l[p]=-1,f[p]=-1;l[u+1]=0,f[u+1]=0;for(var h=o-i,d=h%2!=0,y=0,v=0,g=0,m=0,b=0;b<s;b++){for(var w=-b+y;w<=b-v;w+=2){for(var _=u+w,E=(k=w===-b||w!==b&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-w;k<o&&E<i&&t.charAt(k)===e.charAt(E);)k++,E++;if(l[_]=k,k>o)v+=2;else if(E>i)y+=2;else if(d){var C=u+h-w;if(C>=0&&C<c&&-1!==f[C]){var O=o-f[C];if(k>=O)return a(t,e,k,E)}}}for(var S=-b+g;S<=b-m;S+=2){for(var C=u+S,A=(O=S===-b||S!==b&&f[C-1]<f[C+1]?f[C+1]:f[C-1]+1)-S;O<o&&A<i&&t.charAt(o-O-1)===e.charAt(i-A-1);)O++,A++;if(f[C]=O,O>o)m+=2;else if(A>i)g+=2;else if(!d){var _=u+h-S;if(_>=0&&_<c&&-1!==l[_]){var k=l[_],E=u+k-_;if(k>=(O=o-O))return a(t,e,k,E)}}}}return[[r,t],[n,e]]}(t,e)}(t=t.substring(0,t.length-y),e=e.substring(0,e.length-y));return v&&m.unshift([o,v]),g&&m.push([o,g]),function t(e,i){e.push([o,""]);var a=0;var c=0;var l=0;var h="";var d="";var y;for(;a<e.length;)if(a<e.length-1&&!e[a][1])e.splice(a,1);else switch(e[a][0]){case n:l++,d+=e[a][1],a++;break;case r:c++,h+=e[a][1],a++;break;case o:var v=a-l-c-1;if(i){if(v>=0&&p(e[v][1])){var g=e[v][1].slice(-1);if(e[v][1]=e[v][1].slice(0,-1),h=g+h,d=g+d,!e[v][1]){e.splice(v,1),a--;var m=v-1;e[m]&&e[m][0]===n&&(l++,d=e[m][1]+d,m--),e[m]&&e[m][0]===r&&(c++,h=e[m][1]+h,m--),v=m}}if(f(e[a][1])){var g=e[a][1].charAt(0);e[a][1]=e[a][1].slice(1),h+=g,d+=g}}if(a<e.length-1&&!e[a][1]){e.splice(a,1);break}if(h.length>0||d.length>0){h.length>0&&d.length>0&&(0!==(y=s(d,h))&&(v>=0?e[v][1]+=d.substring(0,y):(e.splice(0,0,[o,d.substring(0,y)]),a++),d=d.substring(y),h=h.substring(y)),0!==(y=u(d,h))&&(e[a][1]=d.substring(d.length-y)+e[a][1],d=d.substring(0,d.length-y),h=h.substring(0,h.length-y)));var b=l+c;0===h.length&&0===d.length?(e.splice(a-b,b),a-=b):0===h.length?(e.splice(a-b,b,[n,d]),a=a-b+1):0===d.length?(e.splice(a-b,b,[r,h]),a=a-b+1):(e.splice(a-b,b,[r,h],[n,d]),a=a-b+2)}0!==a&&e[a-1][0]===o?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,l=0,c=0,h="",d=""}""===e[e.length-1][1]&&e.pop();var w=!1;a=1;for(;a<e.length-1;)e[a-1][0]===o&&e[a+1][0]===o&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)===e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),w=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),w=!0)),a++;w&&t(e,i)}(m,l),m}function a(t,e,r,n){var o=t.substring(0,r),a=e.substring(0,n),s=t.substring(r),u=e.substring(n),c=i(o,a),l=i(s,u);return c.concat(l)}function s(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),o=n,i=0;r<o;)t.substring(i,o)==e.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return c(t.charCodeAt(o-1))&&o--,o}function u(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var r=0,n=Math.min(t.length,e.length),o=n,i=0;r<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return l(t.charCodeAt(t.length-o))&&o--,o}function c(t){return t>=55296&&t<=56319}function l(t){return t>=56320&&t<=57343}function f(t){return l(t.charCodeAt(0))}function p(t){return c(t.charCodeAt(t.length-1))}function h(t,e,i,a){return p(t)||f(a)?null:function(t){for(var e=[],r=0;r<t.length;r++)t[r][1].length>0&&e.push(t[r]);return e}([[o,t],[r,e],[n,i],[o,a]])}function d(t,e,r){return i(t,e,r,!0)}d.INSERT=n,d.DELETE=r,d.EQUAL=o,t.exports=d},function(t,e,r){var n=r(239),o=r(350),i=r(351),a=r(352),s=r(355),u=r(361),c=Date.prototype.getTime;function l(t,e,r){var h=r||{};return!(h.strict?!i(t,e):t!==e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?h.strict?i(t,e):t==e:function(t,e,r){var i,h;if(typeof t!=typeof e)return!1;if(f(t)||f(e))return!1;if(t.prototype!==e.prototype)return!1;if(o(t)!==o(e))return!1;var d=a(t),y=a(e);if(d!==y)return!1;if(d||y)return t.source===e.source&&s(t)===s(e);if(u(t)&&u(e))return c.call(t)===c.call(e);var v=p(t),g=p(e);if(v!==g)return!1;if(v||g){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}if(typeof t!=typeof e)return!1;try{var m=n(t),b=n(e)}catch(t){return!1}if(m.length!==b.length)return!1;for(m.sort(),b.sort(),i=m.length-1;i>=0;i--)if(m[i]!=b[i])return!1;for(i=m.length-1;i>=0;i--)if(h=m[i],!l(t[h],e[h],r))return!1;return!0}(t,e,h))}function f(t){return null===t||void 0===t}function p(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=l},function(t,e,r){"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(240),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),n=a(t),s=e&&"[object String]"===i.call(t),p=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var d=c&&r;if(s&&t.length>0&&!o.call(t,0))for(var y=0;y<t.length;++y)p.push(String(y));if(n&&t.length>0)for(var v=0;v<t.length;++v)p.push(String(v));else for(var g in t)d&&"prototype"===g||!o.call(t,g)||p.push(String(g));if(u)for(var m=function(t){if("undefined"==typeof window||!h)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)m&&"constructor"===l[b]||!o.call(t,l[b])||p.push(l[b]);return p}}t.exports=n},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.prototype.toString,i=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o.call(t)},a=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o.call(t)&&"[object Function]"===o.call(t.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,t.exports=s?i:a},function(t,e,r){"use strict";var n=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!n(t)||!n(e))}},function(t,e,r){"use strict";var n=r(353),o=RegExp.prototype.exec,i=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!s)return"[object RegExp]"===a.call(t);var e=i(t,"lastIndex");return!(!e||!n(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,o.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,r){"use strict";var n=r(188);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,i=n.call(arguments,1),a=Math.max(0,e.length-i.length),s=[],u=0;u<a;u++)s.push("$"+u);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var o=e.apply(this,i.concat(n.call(arguments)));return Object(o)===o?o:this}return e.apply(t,i.concat(n.call(arguments)))}),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r}},function(t,e,r){"use strict";var n=r(189),o=r(356),i=r(241),a=r(242),s=r(360),u=o(i);n(u,{getPolyfill:a,implementation:i,shim:s}),t.exports=u},function(t,e,r){"use strict";var n=r(188),o=r(357)("%Function%"),i=o.apply,a=o.call;t.exports=function(){return n.apply(a,arguments)},t.exports.apply=function(){return n.apply(i,arguments)}},function(t,e,r){"use strict";var n=TypeError,o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(t){o=null}var i=function(){throw new n},a=o?function(){try{return arguments.callee,i}catch(t){try{return o(arguments,"callee").get}catch(t){return i}}}():i,s=r(358)(),u=Object.getPrototypeOf||function(t){return t.__proto__},c=void 0,l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),f={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":s?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":c&&s&&Symbol.asyncIterator?c[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?u((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?u((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":s?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":s?Symbol:void 0,"%SymbolPrototype%":s?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},p=r(188).call(Function.call,String.prototype.replace),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d=/\\(\\)?/g;t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=function(t){var e=[];return p(t,h,function(t,r,n,o){e[e.length]=n?p(o,d,"$1"):r||t}),e}(t),i=function(t,e){if(!(t in f))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===f[t]&&!e)throw new n("intrinsic "+t+" exists, but is not available. Please file an issue!");return f[t]}("%"+(r.length>0?r[0]:"")+"%",e),a=1;a<r.length;a+=1)if(null!=i)if(o&&a+1>=r.length){var s=o(i,r[a]);i=s?s.get||s.value:i[r[a]]}else i=i[r[a]];return i}},function(t,e,r){"use strict";(function(e){var n=e.Symbol,o=r(359);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}}).call(e,r(20))},function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,r){"use strict";var n=r(189).supportsDescriptors,o=r(242),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,u=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!n||!u)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=u(c),r=i(e,"flags");return r&&r.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e,r){"use strict";var n=Date.prototype.getDay,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,r){(function(e){var r="Expected a function",n="__lodash_placeholder__",o=1,i=2,a=4,s=8,u=16,c=32,l=64,f=128,p=512,h=1/0,d=9007199254740991,y=1.7976931348623157e308,v=NaN,g=[["ary",f],["bind",o],["bindKey",i],["curry",s],["curryRight",u],["flip",p],["partial",c],["partialRight",l],["rearg",256]],m="[object Function]",b="[object GeneratorFunction]",w="[object Symbol]",_=/^\s+|\s+$/g,E=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,O=/,? & /,S=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^\[object .+?Constructor\]$/,R=/^0o[0-7]+$/i,T=/^(?:0|[1-9]\d*)$/,j=parseInt,x="object"==typeof e&&e&&e.Object===Object&&e,I="object"==typeof self&&self&&self.Object===Object&&self,P=x||I||Function("return this")();function N(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function D(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,F,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function F(t){return t!=t}function L(t,e){for(var r=-1,o=t.length,i=0,a=[];++r<o;){var s=t[r];s!==e&&s!==n||(t[r]=n,a[i++]=r)}return a}var M=Function.prototype,U=Object.prototype,H=P["__core-js_shared__"],G=function(){var t=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),B=M.toString,$=U.hasOwnProperty,V=U.toString,q=RegExp("^"+B.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=Object.create,J=Math.max,z=Math.min,Y=function(){var t=rt(Object,"defineProperty"),e=rt.name;return e&&e.length>2?t:void 0}();function K(t){return!(!at(t)||function(t){return!!G&&G in t}(t))&&(function(t){var e=at(t)?V.call(t):"";return e==m||e==b}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?q:k).test(function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function X(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=function(t){return at(t)?W(t):{}}(t.prototype),n=t.apply(r,e);return at(n)?n:r}}function Q(t,e,r,n,a,c,l,h,d,y){var v=e&f,g=e&o,m=e&i,b=e&(s|u),w=e&p,_=m?void 0:X(t);return function o(){for(var i=arguments.length,s=Array(i),u=i;u--;)s[u]=arguments[u];if(b)var f=et(o),p=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&n++;return n}(s,f);if(n&&(s=function(t,e,r,n){for(var o=-1,i=t.length,a=r.length,s=-1,u=e.length,c=J(i-a,0),l=Array(u+c),f=!n;++s<u;)l[s]=e[s];for(;++o<a;)(f||o<i)&&(l[r[o]]=t[o]);for(;c--;)l[s++]=t[o++];return l}(s,n,a,b)),c&&(s=function(t,e,r,n){for(var o=-1,i=t.length,a=-1,s=r.length,u=-1,c=e.length,l=J(i-s,0),f=Array(l+c),p=!n;++o<l;)f[o]=t[o];for(var h=o;++u<c;)f[h+u]=e[u];for(;++a<s;)(p||o<i)&&(f[h+r[a]]=t[o++]);return f}(s,c,l,b)),i-=p,b&&i<y){var E=L(s,f);return Z(t,e,Q,o.placeholder,r,s,E,h,d,y-i)}var C=g?r:this,O=m?C[t]:t;return i=s.length,h?s=function(t,e){for(var r=t.length,n=z(e.length,r),o=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t);n--;){var i=e[n];t[n]=nt(i,r)?o[i]:void 0}return t}(s,h):w&&i>1&&s.reverse(),v&&d<i&&(s.length=d),this&&this!==P&&this instanceof o&&(O=_||X(O)),O.apply(C,s)}}function Z(t,e,r,n,u,f,p,h,d,y){var v=e&s;e|=v?c:l,(e&=~(v?l:c))&a||(e&=~(o|i));var g=r(t,e,u,v?f:void 0,v?p:void 0,v?void 0:f,v?void 0:p,h,d,y);return g.placeholder=n,ot(g,t,e)}function tt(t,e,n,a,f,p,h,d){var y=e&i;if(!y&&"function"!=typeof t)throw new TypeError(r);var v=a?a.length:0;if(v||(e&=~(c|l),a=f=void 0),h=void 0===h?h:J(ut(h),0),d=void 0===d?d:ut(d),v-=f?f.length:0,e&l){var g=a,m=f;a=f=void 0}var b=[t,e,n,a,f,g,m,p,h,d];if(t=b[0],e=b[1],n=b[2],a=b[3],f=b[4],!(d=b[9]=null==b[9]?y?0:t.length:J(b[9]-v,0))&&e&(s|u)&&(e&=~(s|u)),e&&e!=o)w=e==s||e==u?function(t,e,r){var n=X(t);return function o(){for(var i=arguments.length,a=Array(i),s=i,u=et(o);s--;)a[s]=arguments[s];var c=i<3&&a[0]!==u&&a[i-1]!==u?[]:L(a,u);return(i-=c.length)<r?Z(t,e,Q,o.placeholder,void 0,a,c,void 0,void 0,r-i):N(this&&this!==P&&this instanceof o?n:t,this,a)}}(t,e,d):e!=c&&e!=(o|c)||f.length?Q.apply(void 0,b):function(t,e,r,n){var i=e&o,a=X(t);return function e(){for(var o=-1,s=arguments.length,u=-1,c=n.length,l=Array(c+s),f=this&&this!==P&&this instanceof e?a:t;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++o];return N(f,i?r:this,l)}}(t,e,n,a);else var w=function(t,e,r){var n=e&o,i=X(t);return function e(){return(this&&this!==P&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,n);return ot(w,t,e)}function et(t){return t.placeholder}function rt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return K(r)?r:void 0}function nt(t,e){return!!(e=null==e?d:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}var ot=Y?function(t,e,r){var n=e+"";return Y(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(function(t,e){var r=e.length,n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(E,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(g,function(r){var n="_."+r[0];e&r[1]&&!D(t,n)&&t.push(n)}),t.sort()}(function(t){var e=t.match(C);return e?e[1].split(O):[]}(n),r)))})}:function(t){return t};var it=function(t,e){return e=J(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=J(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,N(t,this,a)}}(function(t,e,r){var n=o;if(r.length){var i=L(r,et(it));n|=c}return tt(t,n,e,r,i)});function at(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function st(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&V.call(t)==w}(t))return v;if(at(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=at(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_,"");var r=A.test(t);return r||R.test(t)?j(t.slice(2),r?2:8):S.test(t)?v:+t}(t))===h||t===-h?(t<0?-1:1)*y:t==t?t:0:0===t?t:0}function ut(t){var e=st(t),r=e%1;return e==e?r?e-r:e:0}it.placeholder={},t.exports=it}).call(e,r(20))},function(t,e,r){(function(t,r){var n=9007199254740991,o="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",s="[object Map]",u="[object Set]",c=/^\[object .+?Constructor\]$/,l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),h="object"==typeof e&&e&&!e.nodeType&&e,d=h&&"object"==typeof r&&r&&!r.nodeType&&r,y=d&&d.exports===h;var v=Function.prototype,g=Object.prototype,m=p["__core-js_shared__"],b=function(){var t=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),w=v.toString,_=g.hasOwnProperty,E=g.toString,C=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=y?p.Buffer:void 0,S=g.propertyIsEnumerable,A=O?O.isBuffer:void 0,k=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),R=H(p,"DataView"),T=H(p,"Map"),j=H(p,"Promise"),x=H(p,"Set"),I=H(p,"WeakMap"),P=!S.call({valueOf:1},"valueOf"),N=B(R),D=B(T),F=B(j),L=B(x),M=B(I);function U(t){return!(!z(t)||function(t){return!!b&&b in t}(t))&&(J(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?C:c).test(B(t))}function H(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0}var G=function(t){return E.call(t)};function B(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&q(t)}(t)&&_.call(t,"callee")&&(!S.call(t,"callee")||E.call(t)==o)}(R&&"[object DataView]"!=G(new R(new ArrayBuffer(1)))||T&&G(new T)!=s||j&&"[object Promise]"!=G(j.resolve())||x&&G(new x)!=u||I&&"[object WeakMap]"!=G(new I))&&(G=function(t){var e=E.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?B(r):void 0;if(n)switch(n){case N:return"[object DataView]";case D:return s;case F:return"[object Promise]";case L:return u;case M:return"[object WeakMap]"}return e});var V=Array.isArray;function q(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!J(t)}var W=A||function(){return!1};function J(t){var e=z(t)?E.call(t):"";return e==i||e==a}function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}r.exports=function(t){if(q(t)&&(V(t)||"string"==typeof t||"function"==typeof t.splice||W(t)||$(t)))return!t.length;var e=G(t);if(e==s||e==u)return!t.size;if(P||function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||g)}(t))return!k(t).length;for(var r in t)if(_.call(t,r))return!1;return!0}}).call(e,r(20),r(30)(t))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(346);e.clone=function(t){return"object"!=typeof t||null===t?t:o(t,function(t){if("object"==typeof t&&t&&"function"==typeof t.clone)return t.clone()})},e.freeze=function(t){return t},e.isFrozen=function(t){return!1};var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=e,this.index=0,this.offset=0}return n(t,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(t){t||(t=1/0);var e=this.ops[this.index];if(!e)return null;var r=this.offset,n=e.length;if(0===r&&n===t)return this.index+=1,e;t>=n-r?(t=n-r,this.index+=1,this.offset=0):this.offset+=t;var o={action:e.action,attributes:e.attributes};switch(e.action){case"remove":o.data=t;break;case"retain":if("number"==typeof e.data)o.data=t;else{if("string"==typeof e.data)throw new Error("retain with a string is not allowed");o.data=e.data}break;case"insert":"string"==typeof e.data?o.data=e.data.substr(r,t):"number"==typeof e.data?o.data=t:o.data=e.data}return e.createInstance(o)}},{key:"peekLength",value:function(){var t=this.ops[this.index];return t?t.length-this.offset:1/0}},{key:"peekAction",value:function(){var t=this.ops[this.index];return t?t.action:"retain"}}]),t}();e.OperatorIterator=i,e.parsePosition=function(t){for(var e=0,r=0,n=0;n<t.length;n++){var o=t[n].charCodeAt(0);if(o>=65&&o<=90)r=26*r+o-64;else{if(!(o>=48&&o<=57))throw new Error("Invalid cell position "+t);e=10*e+o-48}}return{row:e-1,col:r-1}},e.stringifyPosition=function(t,e){if(!(t>=0&&e>=0))throw new Error("Invalid cell position "+t+":"+e);for(var r=e+1,n="";r>0;){var o=(r-1)%26;n=String.fromCharCode(65+o)+n,r=Math.floor((r-o)/26)}return n+(t+1)}},,,,,,,,,,,,,,,,,function(t,e,r){var n=r(452),o=r(453),i=o;i.v1=n,i.v4=o,t.exports=i},function(t,e,r){var n,o,i=r(308),a=r(309),s=0,u=0;t.exports=function(t,e,r){var c=e&&r||0,l=e||[],f=(t=t||{}).node||n,p=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==p){var h=i();null==f&&(f=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:u+1,v=d-s+(y-u)/1e4;if(v<0&&void 0===t.clockseq&&(p=p+1&16383),(v<0||d>s)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,u=y,o=p;var g=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var m=d/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=p>>>8|128,l[c++]=255&p;for(var b=0;b<6;++b)l[c+b]=f[b];return e||a(l)}},function(t,e,r){var n=r(308),o=r(309);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window._SHIMO_BRAODCAST_=window._SHIMO_BRAODCAST_||{};var n=window._SHIMO_BRAODCAST_.attachFunctionList=window._SHIMO_BRAODCAST_.attachFunctionList||{},o=window._SHIMO_BRAODCAST_.notifyCache=window._SHIMO_BRAODCAST_.notifyCache||{},i=function(t,e,o){if("string"==typeof t)if("function"==typeof e){for(var i=(n[t]||[]).length;i--;)if(n[t][i].fun===e){if(!0!==o)return n[t][i];n[t].splice(i,1)}}else if("object"===(void 0===e?"undefined":r(e))&&o)for(var a=(n[t]||[]).length;a--;)n[t][a].scope===e&&n[t].splice(a,1);else{if(!0!==!!e)return n[t];delete n[t]}return null},a=function(t,e,r){var a=r||{};if("string"==typeof t&&"function"==typeof e){i(t)||(n[t]=[]);var s={fun:e,scope:a.scope,isAsync:a.isAsync};i(t).push(s);var c=o[t];delete o[t],Array.isArray(c)&&!0===a.invoke&&setTimeout(function(){u(s,c)})}},s=function(t,e){if("string"==typeof t){var n=void 0===e?"undefined":r(e);"function"===n||"object"===n?i(t,e,!0):i(t,!0)}};function u(t,e){if(t.isAsync)!function(t){setTimeout(function(){t.fun.apply(t.scope,e)},0)}(t);else try{t.fun.apply(t.scope,e)}catch(t){console.error(t.stack)}}e.default={destory:function(){n=window._SHIMO_BRAODCAST_={}},on:a,off:s,attach:a,detach:s,notify:function(t){var e=i(t)||[];if(0!==e.length){var r=Array.prototype.slice.call(arguments,1);o[t]=r;for(var n=0;n<e.length;n++)u(e[n],r)}},attachOne:function(t,e,r){s(t),a(t,e,r)},BCBundle:function(t){var e=t,r=Object.keys(t);return r.forEach(function(t){return a(t,e[t])}),{detach:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?s(t,e[t]):r.forEach(function(t){return s(t,e[t])})}}}},t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.deltaConstructor=t,this.operatorConstructor=e}return t.prototype.compose=function(t,e,r){throw new Error("#compose() is not implemented")},t.prototype.transform=function(t,e,r){throw new Error("#transform() is not implemented")},t.prototype.invert=function(t,e){throw new Error("#invert() is not implemented")},t.prototype.parse=function(t){throw new Error("#parse() is not implemented")},t.prototype.pack=function(t,e){throw new Error("#pack() is not implemented")},t.prototype.toJSON=function(t){throw new Error("#toJSON() is not implemented")},t.prototype.explain=function(t,e){return""+t+e},t}();e.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(209),s=r(295),u=[].slice,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delayRunTimeouts={},e}return n(e,t),e.prototype.delayRun=function(t,e){var r=this,n=t.toString(),o=this.delayRunTimeouts[n],i=u.call(arguments).slice(2);o&&clearTimeout(o),this.delayRunTimeouts[n]=setTimeout(function(){return t.apply(r,i)},e)},e.prototype.assert=function(t,e){if(!t)throw new s.CollaborationError("Assertion error",s.ERROR.ERR_ASSERTION,e)},e.prototype.superDestroy=function(){for(var t in this.delayRunTimeouts)this.delayRunTimeouts[t]&&clearTimeout(this.delayRunTimeouts[t])},e.prototype.wrapAsyncTryCatch=function(t,e){var r=this;return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return o(r,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t.apply(e,n)];case 1:return o.sent(),[3,3];case 2:return r=o.sent(),this.emit(s.Event.ERROR,new s.CollaborationError("Try catch wrapper invoke error",s.ERROR.ERR_FN_INVOKE,r)),[3,3];case 3:return[2]}})})}},e}(a.EventEmitter);e.Base=c},function(t,e,r){(function(n){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=Object({NODE_ENV:"production",HOST:"shimodev_com",VERSION:"HEAD[sdk-release-v1.0.0-2019-5-14-hot-5]",BRANCH:"HEAD",COMMIT:"sdk-release-v1.0.0-2019-5-14-hot-5",GC_VERSION:"sdk-release-v1.0.0-2019-5-14-hot-5",SDK:!0}).DEBUG),t}(e=t.exports=r(790)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(i=++o)}),t.splice(i,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(e,r(131))},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PUSHED=0]="PUSHED",t[t.MERGED=1]="MERGED",t[t.REORDERED=2]="REORDERED"}(n=e.PushResult||(e.PushResult={}));var o=function(){function t(t){void 0===t&&(t=[]),this.stringified=!1,this.ops=t}return t.prototype.push=function(t){if(this.stringified)throw new Error("Cannot push new operators to a stringified operatorList");var e=this.ops.length;if(0===e)return this.ops.push(t),n.PUSHED;var r=n.PUSHED,o=this.ops[e-1];if("remove"===o.action&&"insert"===t.action&&(e-=1,o=this.ops[e-1],r=n.REORDERED,void 0===o))return this.ops.unshift(t),r;var i=o.merge(t);return i?(this.ops[e-1]=i,r=n.MERGED):e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),r},t.prototype.stringify=function(t){void 0===t&&(t=!1),this.stringified=!0;for(var e=this.ops.length,r="",n=0;n<e;n++){var o=this.ops[n];(!t||n<e-1||!o.isEmpty())&&(r+=o.stringify())}return r},t}();e.default=o},function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=[{name:"color"},{name:"background"},{name:"font-size"},{name:"width"},{name:"height"},{name:"rowspan"},{name:"colspan"},{name:"align",values:["left","center","right","justify"]},{name:"bold",values:[!1,!0]},{name:"italic",values:[!1,!0]},{name:"underline",values:[!1,!0]},{name:"vertical",values:["top","middle","bottom"]},{name:"strike",values:[!1,!0]},{name:"wrap",values:["text-wrap","text-no-wrap","text-linebreak-overflow"]},{name:"fixedRowsTop"},{name:"fixedColumnsLeft"},{name:"link"},{name:"format",values:["normal","0,0","0,0.00","0%","0.00%","0.00E+00","(0,0)","(0,0.00)","0,0","0,0.00","$0,0","$0,0.00","YYYY/MM/DD","YYYY-MM-DD","HH:mm:ss","YYYY/MM/DD HH:mm:ss"," (#,##0)"," (#,##0.00)","@","#,##0.0_);[Red](#,##0.0)","#,##0.0_);(#,##0.0)","#,##0.0;[Red]#,##0.0","#,##0.0_ ","#,##0.0_ ;[Red]-#,##0.0 ","#,##0_);[Red](#,##0)","#,##0_);(#,##0)","#,##0;[Red]#,##0","#,##0_ ","#,##0_ ;[Red]-#,##0 ","0.0_);[Red](0.0)","0.0_);(0.0)","0.0;[Red]0.0","0.0_ ","0.0_ ;[Red]-0.0 ","0_);[Red](0)","0_);(0)","0;[Red]0","0_ ","0_ ;[Red]-0 ","0.0%",'"$"#,##0.0_);[Red]("$"#,##0.0)','""#,##0.0_);[Red](""#,##0.0)','"$"#,##0.0_);("$"#,##0.0)','""#,##0.0_);(""#,##0.0)','"$"#,##0.0;[Red]"$"#,##0.0','""#,##0.0;[Red]""#,##0.0','"$"#,##0.0','""#,##0.0','"$"#,##0.0;[Red]-"$"#,##0.0','""#,##0.0;[Red]-""#,##0.0','"$"#,##0_);[Red]("$"#,##0)','""#,##0_);[Red](""#,##0)','"$"#,##0_);("$"#,##0)','""#,##0_);(""#,##0)','"$"#,##0;[Red]"$"#,##0','""#,##0;[Red]""#,##0','"$"#,##0','""#,##0','"$"#,##0;[Red]-"$"#,##0','""#,##0;[Red]-""#,##0','_("$"* #,##0.0_);_("$"* (#,##0.0);_("$"* "-"??_);_(@_)','_(""* #,##0.0_);_(""* (#,##0.0);_(""* "-"??_);_(@_)','_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)','_(""* #,##0_);_(""* (#,##0);_(""* "-"_);_(@_)',"yyyy/m/d","yyyy/mm/dd;@","yyyy-mm-dd;@","yy/mm/dd;@","yy-mm-dd;@","mm/dd;@","mm-dd;@","yyyy-m-d;@","yy/m/d;@","yy-m-d;@","m/d;@","m-d;@","m/d/yy;@","mm/dd/yy;@","d;@","dd;@",'yyyy""m""d"" aaaa','yyyy""m""d"";@','yyyy""m"";@','m""d"";@','[$-804]yyyy""mm""dd"" aaaa;@','yyyy""mm""dd"";@','yyyy""mm"";@','mm""dd"";@','m"";@','mm"";@','[DBNum1][$-804]m"";@',"[$-804]aaaa;@","[$-804]aaa;@",'[DBNum1][$-804]yyyy""m""d"";@','[DBNum1][$-804]yyyy""m"";@','[DBNum1][$-804]m""d"";@',"[$-409]d-mmm;@","[$-409]d-mmm-yy;@","[$-409]dd-mmm-yy;@","[$-409]mmm-yy;@","[$-409]mmmm-yy;@","[$-409]mmmmm;@","[$-409]mmmmm-yy;@","[$-409]yyyy/mm/dd h:mm AM/PM;@","yyyy/mm/dd hh:mm;@","[$-409]yyyy/m/d h:mm AM/PM;@","yyyy/m/d h:mm;@","[$-409]yyyy/mm/dd h:mm:ss AM/PM;@","yyyy/mm/dd hh:mm:ss;@","[$-409]yyyy/m/d h:mm:ss AM/PM;@","yyyy/m/d h:mm:ss;@","h:mm:ss;@","h:mm;@","AM/PM h:mm:ss",'/h""mm""ss"";@','/h""mm"";@','[DBNum1][$-804]h""mm"";@','[DBNum1][$-804]/h""mm"";@',"[$-409]h:mm AM/PM;@","[$-409]h:mm:ss AM/PM;@",'h""mm"";@','h""mm""ss"";@',"# ?/?","# ??/??","# ???/???","# ?/2","# ?/4","# ?/8","# ??/16","# ?/10","# ??/100","0.0E+00","0E+00","000000","[DBNum1][$-804]General","[DBNum2][$-804]General"]},{name:"formula"},{name:"filter"},{name:"border-top"},{name:"border-right"},{name:"border-bottom"},{name:"border-left"},{name:"line"},{name:"guid"},{name:"author"},{name:"size"},{name:"list"},{name:"layout",values:["embed","block"]},{name:"margin",values:["none","small","medium","large"]},{name:"font",values:["serif","monospace","microsoftyahei","simsun","kaiti","simhei","fangsong","droid","source","arial"]},{name:"header"},{name:"indent"},{name:"comment"},{name:"comment-block"},{name:"code-block",values:[!0]},{name:"cellValue"},{name:"precision"},{name:"autoFormatter",values:["#,##0_);[Red](#,##0)","#,##0.00_);[Red](#,##0.00)",'""#,##0_);[Red](""#,##0)','""#,##0.00_);[Red](""#,##0.00)','"$"#,##0_);[Red]("$"#,##0)','"$"#,##0.00_);[Red]("$"#,##0.00)',"0%","0.00%","# ??/??","0.00E+00","yyyy/m/d",'m""d"";@','yyyy""m""d"";@','yyyy""m"";@',"[$-409]yyyy/mm/dd h:mm:ss AM/PM;@","[$-409]yyyy/mm/dd h:mm AM/PM;@","yyyy/mm/dd hh:mm:ss;@","h:mm;@","[$-409]h:mm AM/PM;@","h:mm:ss;@","[$-409]h:mm:ss AM/PM;@",'h""mm"";@','h""mm""ss"";@','[$-804]AM/PMh""mm"";@','[$-804]AM/PMh""mm""ss"";@',"[$-409]mmm-yy;@","h:mm:ss.0;@","[$-409]h:mm:ss.0 AM/PM;@","yyyy/mm/dd hh:mm;@","yyyy/mm/dd hh:mm:ss.0;@"]}],i=o.reduce(function(t,e,r){return e.index=r,t[e.name]=e,t},{});t.exports={pack:function(t){if("object"==typeof t&&null!==t){var e=[];for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(void 0!==n){var o=i[r];if(o&&(r=o.index,o.values&&null!==n)){var a=o.values.indexOf(n);if(-1!==a)n=a;else if(17!==r)continue}e.push(null===n?r:r+":"+JSON.stringify("string"==typeof n?encodeURIComponent(n):n))}}return e.sort().join("|")}},unpack:function(t){if("string"!=typeof t)return{};for(var e={},r=t.split("|"),i=0;i<r.length;i++){var a=r[i].split(":"),s=n(a,2),u=s[0],c=s[1],l=o[u];if(c){var f=typeof(c=JSON.parse(c));"string"===f&&(c=decodeURIComponent(c)),l&&(u=l.name,l.values&&"number"===f&&void 0!==l.values[c]&&(c=l.values[c]))}else l&&(u=l.name),c=null;e[u]=c}return e},merge:function(t,e,r){if(r&&!t)return e;if(!e)return t;for(var n in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(n)&&(t[n]=e[n],r||null!==t[n]||delete t[n]);return this.pack(t)},invert:function(t,e){if(e){if(!t)return e.split("|").map(function(t){var e=t.indexOf(":");return-1===e?t:t.slice(0,e)}).join("|");for(var r in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(r)&&(void 0!==t[r]?e[r]=t[r]:e[r]=null);return this.pack(e)}},transform:function(t,e,r){if(r)return e;if(e){if(!t)return e;for(var n in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(n)&&void 0!==t[n]&&delete e[n];return this.pack(e)}},diff:function(t,e){if(!t)return e;t=this.unpack(t),e&&(e=this.unpack(e));for(var r={},n=!0,o=e?Object.keys(t).concat(Object.keys(e)):Object.keys(t),i=0;i<o.length;i++){var a=o[i],s=e?e[a]:void 0;t[a]!==s&&(n=!1,r[a]=void 0===s?null:s)}return n?void 0:this.pack(r)}}},function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(434),i=r(347),a=r(348),s=String.fromCharCode(0),u=r(515),c=r(362),l=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=[],Array.isArray(e)){for(var n=0;n<e.length;n++)this.pushWithMutations(e[n]);r&&this.chopWithMutations()}else"function"==typeof e&&e(this);o.freeze(this)}return n(t,[{key:"freeze",value:function(){o.freeze(this.ops)}},{key:"createCleaner",value:function(){for(var e=[],r=0;r<this.ops.length;r++){var n=this.ops[r],o=n.createInstance({action:"remove",data:n.length});e.push(o)}return new t(e)}},{key:"clone",value:function(){return new t(this.ops.map(o.clone))}},{key:"toJSON",value:function(){return this.ops}},{key:"pack",value:function(){return this.ops.map(function(t){return t.pack()})}},{key:"isDocument",value:function(){for(var t=0;t<this.ops.length;t++)if("insert"!==this.ops[t].action)return!1;return!0}},{key:"isEmpty",value:function(){return 0===this.ops.length}},{key:"_genericPush",value:function(t,e){var r=t.length,n=t[r-1];if(n&&"remove"===n.action&&"insert"===e.action&&(n=t[(r-=1)-1]),!n)return t.unshift(e),t;var o=e.merge(n);return o?t[r-1]=o:r===t.length?t.push(e):t.splice(r,0,e),t}},{key:"push",value:function(e){if(!e.length)return this;var r=this.ops.slice(0);if(Array.isArray(e)){for(var n=!1,o=0;o<e.length;o++)e[o].length&&(n=!0,r=this._genericPush(r,e[o]));if(!n)return this}else r=this._genericPush(r,e);return new t(r)}},{key:"pushWithMutations",value:function(t){return t.length&&this._genericPush(this.ops,t),this}},{key:"concat",value:function(e){var r=this;return e.ops.length?this.ops.length?new t(function(t){t.ops=r.ops.slice(),t.pushWithMutations(e.ops[0]),e.ops.length>1&&(t.ops=t.ops.concat(e.ops.slice(1)))}):e:this}},{key:"_genericChop",value:function(t){for(;t.length&&t[t.length-1].isEmpty();)t.pop();return t}},{key:"chop",value:function(){return new t(this._genericChop(this.ops.slice(0)))}},{key:"chopWithMutations",value:function(){return this._genericChop(this.ops),this}},{key:"slice",value:function(e,r){e=e||0,"number"!=typeof r&&(r=1/0);for(var n=[],o=this.getIter(),i=0;i<r&&o.hasNext();){var a=void 0;i<e?a=o.next(e-i):(a=o.next(r-i),n.push(a)),i+=a.length}return new t(n)}},{key:"getIter",value:function(){return new o.OperatorIterator(this.ops)}},{key:"validate",value:function(){for(var t={},e=0;e<this.ops.length;e++){var r=this.ops[e];if(r&&"TableOperator"===r.name()){var n=r.getAttributes().name;if(!n)continue;var o="$$"+n+"$$";if(t.hasOwnProperty(o))throw new Error("Duplicated table name found: "+n);t[o]=!0}}return this}},{key:"compose",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getIter(),o=e.getIter(),i=[];n.hasNext()||o.hasNext();)if("insert"===o.peekAction())i.push(o.next());else if("remove"===n.peekAction())i.push(n.next());else{var a=Math.min(n.peekLength(),o.peekLength()),s=n.next(a),u=o.next(a);u&&"retain"!==u.action?s&&"retain"!==s.action||i.push(u):s?u?i.push(s.compose(u,r)):i.push(s):i.push(u)}var c=new t(i,!0);return r||c.validate(),c}},{key:"composePosition",value:function(t){for(var e=this.getIter(),r=0;e.hasNext()&&r<=t;){var n=e.peekLength(),o=e.peekAction();switch(e.next(),o){case"remove":if(n>t-r)return null;t-=n;continue;case"insert":t+=n}r+=n}return t}},{key:"invert",value:function(e){for(var r=this.getIter(),n=e.getIter(),o=[];n.hasNext();)if("insert"===n.peekAction()){var i=n.next(),a=i.createInstance({action:"remove",data:i.length});o.push(a)}else{if(!r.hasNext())throw new Error(this.constructor.name+" should be smaller than document");var s=Math.min(r.peekLength(),n.peekLength()),u=r.next(s),c=n.next(s);if("insert"!==u.action)throw new Error("Only document can invert deltas");"retain"===c.action?o.push(u.invert(c)):o.push(u)}return new t(o,!0)}},{key:"invertPosition",value:function(t){for(var e=this.getIter(),r=0;e.hasNext()&&r<=t;){var n=e.peekLength(),o=e.peekAction();switch(e.next(),o){case"insert":if(n>t-r)return null;t-=n;continue;case"remove":t+=n}r+=n}return t}},{key:"transform",value:function(e,r){for(var n=this.getIter(),o=e.getIter(),i=[];o.hasNext();)if("insert"!==n.peekAction()||!r&&"insert"===o.peekAction())if("insert"===o.peekAction())i.push(o.next());else{var a=Math.min(n.peekLength(),o.peekLength()),s=n.next(a),u=o.next(a);if(s&&"remove"===s.action)continue;u&&"remove"===u.action?i.push(u):s?i.push(s.transform(u,r)):i.push(u)}else{var c=n.next();i.push(c.createInstance({action:"retain",data:c.length}))}return new t(i,!0)}},{key:"transformPosition",value:function(t,e){for(var r=this.getIter(),n=0;r.hasNext()&&n<=t;){var o=r.peekLength(),i=r.peekAction();switch(r.next(),i){case"remove":t-=Math.min(o,t-n);continue;case"insert":(n<t||!e)&&(t+=o)}n+=o}return t}},{key:"toString",value:function(){for(var t="",e=0;e<this.ops.length;e++){var r=this.ops[e];if("insert"!==r.action)throw new Error("toString() called on non-document");t+="string"==typeof r.data?r.data:s}return t}},{key:"diff",value:function(e,r){if(this.ops===e.ops)return new t;if(!this.ops.length){if(!e.isDocument())throw new Error("diff() called on non-document");return e}for(var n=c(this.ops[0].createInstance,this.ops[0]),o=[],s=i(this.toString(),e.toString(),r),l=this.getIter(),f=e.getIter(),p=0,h=s.length;p<h;p++)for(var d=s[p],y=d[1].length;y>0;){var v=0;switch(d[0]){case i.INSERT:v=Math.min(f.peekLength(),y),o.push(f.next(v));break;case i.DELETE:v=Math.min(y,l.peekLength()),l.next(v),o.push(n({action:"remove",data:v}));break;case i.EQUAL:v=Math.min(l.peekLength(),f.peekLength(),y);var g=l.next(v),m=f.next(v);g.skipDiff()&&m.skipDiff()&&g.name()===m.name()||a(g.data,m.data)?o.push(n({action:"retain",data:v,attributes:u.diff(g.attributes,m.attributes)})):(o.push(m),o.push(n({action:"remove",data:v})))}y-=v}return new t(o,!0)}},{key:"print",value:function(t){console[t?"group":"groupCollapsed"]("Delta["+this.length+"] with "+this.ops.length+" operators"),this.ops.forEach(function(t){return t.print()}),console.groupEnd()}},{key:"length",get:function(){for(var t=0,e=0;e<this.ops.length;e++)t+=this.ops[e].length;return t}}],[{key:"unpack",value:function(t){var e=this;return new this(t.map(function(t){return e.operatorUnpacker(t)}))}}]),t}();l.packId=5,t.exports=l},function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=r(516),a=r(434).clone,s=r(515),u=r(434),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setWithMutations(e);var r="Operator"!==this.name()&&this.isGeneric()?this.toGeneric():this;return u.freeze(r),r}return o(t,[{key:"name",value:function(){return"Operator"}},{key:"skipDiff",value:function(){return!1}},{key:"isGeneric",value:function(){var t=4===this.constructor.packId;return"number"==typeof this.data&&!t}},{key:"toGeneric",value:function(){return new t({action:this.action,data:this.data,attributes:this.attributes})}},{key:"clone",value:function(){var t=this.createInstance(this);return t.data=a(t.data),t}},{key:"_genericSet",value:function(t){var e={action:this.action,data:this.data,attributes:this.attributes},r=!1,n=t.action;if(n&&n!==e.action){if(r=!0,"insert"!==n&&"retain"!==n&&"remove"!==n)throw new Error('Action "'+n+'" is invalid');e.action=n}var o=t.data;if(null!=o&&o!==e.data){if(r=!0,"remove"===e.action&&("number"!=typeof o||o<0))throw new Error("Expect the data of remove action to be a positive number, got "+o);e.data=o}if(null==e.data)throw new Error("Expect data to have a non-empty value, got "+e.data);var i=t.attributes;if(i){var a=typeof i;if("object"===a)if(Object.keys(i).length){var u=s.pack(i);u&&e.attributes!==u&&(r=!0,e.attributes=u)}else e.attributes&&(r=!0,delete e.attributes);else"string"===a&&e.attributes!==i&&(r=!0,e.attributes=i)}return{changed:r,op:e}}},{key:"set",value:function(t){var e=this._genericSet(t),r=e.changed,n=e.op;return r?this.createInstance(n):this}},{key:"setWithMutations",value:function(t){var e=this._genericSet(t).op;return this.action=e.action,this.data=e.data,this.attributes=e.attributes,this}},{key:"createInstance",value:function(t){return new this.constructor(t)}},{key:"toJSON",value:function(){return this.pack()}},{key:"pack",value:function(){var t=void 0;switch(this.action){case"insert":t=0;break;case"remove":t=1;break;case"retain":t=2}var e="function"==typeof this.data.pack?this.data.pack():this.data,r=[Number(""+this.constructor.packId+t),e];return this.attributes&&r.push(this.attributes),r}},{key:"getEmbedObject",value:function(){throw new Error("#getEmbedObject() not implemented")}},{key:"isEmpty",value:function(){return"retain"===this.action&&!this.attributes&&"number"==typeof this.data}},{key:"getAttributes",value:function(){return s.unpack(this.attributes)}},{key:"merge",value:function(t){if(this.name()!==t.name())return!1;var e=typeof this.data;return!(this.action!==t.action||e!==typeof t.data||"number"!==e&&"string"!==e||this.attributes!==t.attributes)&&t.set({data:t.data+this.data})}},{key:"compose",value:function(t){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be composed");if(this.constructor.packId!==t.constructor.packId&&!this.isGeneric()&&!t.isGeneric())throw new Error('Failed to compose operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;return e="function"==typeof this.data.compose&&t.data.constructor.packId===this.data.constructor.packId?this.data.compose(t.data):"number"==typeof this.data?t.data:this.data,(this.isGeneric()?t:this).createInstance({data:e,attributes:s.merge(this.attributes,t.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(t){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==t.action)throw new Error("Only retaining operator can be inverted");if(this.constructor.packId!==t.constructor.packId&&!t.isGeneric())throw new Error('Failed to invert operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;return e="function"==typeof this.data.invert&&t.data.constructor.packId===this.data.constructor.packId?this.data.invert(t.data):"number"==typeof t.data?t.data:this.data,this.createInstance({data:e,attributes:s.invert(this.attributes,t.attributes),action:"retain"})}},{key:"transform",value:function(t,e){if("retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be transformd");if(this.constructor.packId!==t.constructor.packId&&!t.isGeneric()&&!this.isGeneric())throw new Error('Failed to transform operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');return(this.isGeneric()?t:this).createInstance({attributes:s.transform(this.attributes,t.attributes,e),action:"retain",data:"function"==typeof this.data.transform&&"function"==typeof t.data.transform?this.data.transform(t.data,e):t.data})}},{key:"print",value:function(){var t=[this.action+": %c"+this.name(),"color: #51c6ed"];this.attributes&&(t[0]=t[0]+"%c, %O",t.push("font-weight: normal; color: #000",this.attributes.toJS())),console.groupCollapsed.apply(console,t),function t(e){"function"==typeof e.pack?e.print():"object"==typeof e?Object.keys(e).forEach(function(r){var n=e[r];console.groupCollapsed(r),t(n),console.groupEnd()}):console.log(e)}(this.data),console.groupEnd()}},{key:"length",get:function(){switch(typeof this.data){case"number":return this.data;case"string":return this.data.length;default:return 1}}}],[{key:"unpack",value:function(t){var e=n(t,3),r=e[0],o=e[1],a=e[2];return new this({action:["insert","remove","retain"][r],data:Array.isArray(o)?i.unpack(o):o,attributes:a})}},{key:"insert",value:function(t,e){return new this({action:"insert",data:t,attributes:e})}},{key:"retain",value:function(t,e){return new this({action:"retain",data:t,attributes:e})}},{key:"remove",value:function(t){return new this({action:"remove",data:t})}}]),t}();c.packId=1,t.exports=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){var n,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o),!0,t.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(t){}r=n.write?n.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=e+"="+r+s}}function a(t,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(s[0]);if(u=(n.read||n)(u,c)||e(u),r)try{u=JSON.parse(u)}catch(t){}if(o[c]=u,t===c)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return a(t,!1)},o.getJSON=function(t){return a(t,!0)},o.remove=function(e,r){i(e,"",t(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}(function(){})})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.OFFLINE="offline",t.OFFLINE_SAVING="offlineSaving",t.OFFLINE_SAVED="offlineSaved",t.OFFLINE_SAVE_FAILED="offlineSaveFailed",t.ONLINE="online",t.ONLINE_SAVING="onlineSaving",t.ONLINE_SAVED="onlineSaved",t.ONLINE_SAVE_FAILED="onlineSaveFailed",t.SERVER_CHANGE_APPLIED="serverChangeApplied"}(e.Status||(e.Status={}))},function(t,e,r){"use strict";(function(e){var n=r(228),o=r(804),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=r(685):void 0!==e&&(t=r(685)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(t){s.headers[t]={}}),n.forEach(["post","put","patch"],function(t){s.headers[t]=n.merge(i)}),t.exports=s}).call(e,r(131))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE_PROPERTY="__MODOC_NAME__"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(692),o=r(693),i="0:",a=function(){function t(e,r){this.action=e.action;var n,o=e.data;if(null===o||void 0===o)throw new Error('"data" is required for an Operator');if("object"==typeof o){var a=Object.keys(o)[0],s=o[a];if("string"==typeof s)this.data=o,this.dataType=a;else{var u=t.dataHandlers[a];if(!u)throw new Error('Unsupported nested data type "'+a+'"');var c=u.pack(s,"insert"===this.action);"delta"===a&&c===i?(this.data=1,this.dataType="number"):(this.data=((n={})[a]=c,n),this.dataType=a)}}else this.data=o,this.dataType=typeof o;this.packedAttributes=e.packedAttributes,this.pool=e.pool,this.packedData=r}return t.isOperator=function(t){return"function"==typeof t.getAttributes},t.registerDataHandler=function(e,r){t.dataHandlers[e]=r},t.getUnresolvedAttributes=function(t){return"function"==typeof t.getUnresolvedAttributes?t.getUnresolvedAttributes():t.getAttributes()},Object.defineProperty(t.prototype,"length",{get:function(){return"string"==typeof this.data?this.data.length:"number"==typeof this.data?this.data:1},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return"retain"===this.action&&(""===this.packedAttributes||void 0===this.packedAttributes)&&"number"==typeof this.data},t.prototype.getParsedData=function(){var e=t.dataHandlers[this.dataType];if(void 0===e)throw new Error("Unknown handler for "+this.dataType);return e.parse(this.getCustomData())},t.prototype.hasAttributes=function(){return void 0!==this.packedAttributes&&""!==this.packedAttributes},t.prototype.getAttributes=function(){return void 0!==this.pool&&this.hasAttributes()?this.pool.unpackAttributes(this.packedAttributes):{}},t.prototype.stringify=function(){if(void 0===this.packedData){var t=this.data,e=void 0;switch(this.action){case"insert":e="!";break;case"retain":e="@";break;default:e="#"}if("number"==typeof t)e+=t.toString(36)+"#";else if("string"==typeof t)e+=t.length.toString(36)+"!"+t;else{var r=this.dataType;if(void 0===r)throw new Error("ASSERT: dataType === undefined");var o=n.objectKeyToInitial[r];if(!o)throw new Error('Unsupport object data type: "'+r+'"');var i=""+o+t[r];e+=i.length.toString(36)+"@"+i}this.packedData=e}var a=void 0===this.packedAttributes?this.packedData:this.packedData+this.packedAttributes;return a.length.toString(36)+a},t.prototype.merge=function(e){if(this.action!==e.action)return null;var r=typeof this.data;if("object"===r||r!==typeof e.data)return null;var n=this.hasAttributes();if(n!==e.hasAttributes())return null;if(n)if(this.pool===e.pool){if(this.packedAttributes!==e.packedAttributes)return null}else if(!function(t,e){if(t===e)return!0;var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(var o=0;o<n;o++)if(t[r[o]]!==e[r[o]])return!1;return!0}(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e)))return null;return new t({action:this.action,data:this.data+e.data,pool:this.pool,packedAttributes:this.packedAttributes})},t.prototype.getCustomData=function(){switch(typeof this.data){case"string":case"number":throw new Error("Cannot get custom data from a simple operator");default:return this.data[this.dataType]}},t.prototype.compose=function(e,r){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be composed");var n,a,s;if("number"===this.dataType)n=e.data;else if("number"===e.dataType)n=this.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when composing '+this.data+" with "+e.data);if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when composing "+this.data+" with "+e.data);var u=t.dataHandlers[this.dataType];if(void 0===u)throw new Error("Unknown handler for "+this.dataType);var c=u.compose(this.getCustomData(),e.getCustomData(),r);n="delta"===this.dataType&&c===i?1:((s={})[this.dataType]=c,s)}if(e.hasAttributes()){if(void 0===this.pool)throw new Error("this.pool is undefined when composing");var l=o.merge(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e),!r);a=this.pool.packAttributes(l)}else a=this.packedAttributes;return new t({action:this.action,data:n,pool:this.pool,packedAttributes:a})},t.prototype.transform=function(e,r){if(void 0===r&&(r=!1),"retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be transformed");var n,a,s;if("number"===this.dataType||"number"===e.dataType)n=e.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when transforming '+this.data+" with "+e.data);if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when transforming "+this.data+" with "+e.data);var u=t.dataHandlers[this.dataType];if(void 0===u)throw new Error("Unknown handler for "+this.dataType);var c=u.transform(this.getCustomData(),e.getCustomData(),r);n="delta"===this.dataType&&c===i?1:((s={})[this.dataType]=c,s)}if(e.hasAttributes()){var l=o.transform(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e),r);if(void 0===e.pool)throw new Error("ASSERT: other.pool === undefined when transforming");a=e.pool.packAttributes(l)}else a="";return new t({action:this.action,data:n,pool:e.pool,packedAttributes:a})},t.prototype.invert=function(e,r){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.dataType+")");if("retain"!==e.action)throw new Error("Only retaining operator can be inverted");var n,a,s;if(void 0!==r)n=r;else if("number"==typeof e.data)n=e.data;else if("number"==typeof this.data&&"delta"!==e.dataType)n=this.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when inverting '+this.data+" with "+e.data);if("number"===this.dataType&&"delta"===e.dataType){n={delta:(u=t.dataHandlers.delta).invert(i,e.getCustomData())}}else{if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when inverting "+this.data+" with "+e.data);var u;if(void 0===(u=t.dataHandlers[this.dataType]))throw new Error("Unknown handler for "+this.dataType);var c=u.invert(this.getCustomData(),e.getCustomData());n="delta"===this.dataType&&c===i?1:((s={})[this.dataType]=c,s)}}if(e.hasAttributes()){var l=o.invert(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e));if(void 0===e.pool)throw new Error("ASSERT: other.pool === undefined when inverting");a=e.pool.packAttributes(l)}else a="";return new t({data:n,action:"retain",pool:e.pool,packedAttributes:a})},t.prototype.toJSON=function(){var e,r={action:this.action};if(this.hasAttributes()&&(r.attributes=this.getAttributes()),"number"===this.dataType||"string"===this.dataType)r.data=this.data;else{var n=t.dataHandlers[this.dataType],o=this.getCustomData();r.data=((e={})[this.dataType]=n?n.toJSON(o):o,e)}return r},t.prototype.explain=function(e){void 0===e&&(e="");var r=this.stringify().length,n=e+"["+this.dataType+"("+this.action+")] #"+(r-String(r).length)+":\n";if("number"===this.dataType||"string"===this.dataType)n+=e+this.data;else{var o=t.dataHandlers[this.dataType],i=this.getCustomData();n+=o?o.explain(e+"  ",i):i}return n+"\n"+e+"PackedAttributes:"+this.packedAttributes+"\n"},t.prototype.getUnresolvedAttributes=function(){return void 0!==this.pool&&this.hasAttributes()?this.pool.unpackAttributes(this.packedAttributes,!1):{}},t.dataHandlers={},t}();e.default=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){var n=r(786),o=r(787),i=o;i.v1=n,i.v4=o,t.exports=i},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}},function(t,e,r){"use strict";var n=r(792),o=r(296),i=r(793);function a(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function s(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function u(t,e){var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};default:return function(t,e,r){void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=o({arrayFormat:"none"},e)),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),o=e.shift(),a=e.length>0?e.join("="):void 0;a=void 0===a?null:i(a),r(i(o),a,n)}),Object.keys(n).sort().reduce(function(t,e){var r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(r):t[e]=r,t},Object.create(null))):n}e.extract=s,e.parse=u,e.stringify=function(t,e){!1===(e=o({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var r=function(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[a(e,t),"[",n,"]"].join(""):[a(e,t),"[",a(n,t),"]=",a(r,t)].join("")};case"bracket":return function(e,r){return null===r?a(e,t):[a(e,t),"[]=",a(r,t)].join("")};default:return function(e,r){return null===r?a(e,t):[a(e,t),"=",a(r,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(n){var o=t[n];if(void 0===o)return"";if(null===o)return a(n,e);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(t){void 0!==t&&i.push(r(n,t,i.length))}),i.join("&")}return a(n,e)+"="+a(o,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:u(s(t),e)}}},function(t,e){!function(e){var r=-1,n={onVisible:function(t){var e=n.isSupported();if(!e||!n.hidden())return t(),e;var r=n.change(function(e,o){n.hidden()||(n.unbind(r),t())});return r},change:function(t){if(!n.isSupported())return!1;var e=r+=1;return n._callbacks[e]=t,n._listen(),e},unbind:function(t){delete n._callbacks[t]},afterPrerendering:function(t){var e=n.isSupported();if(!e||"prerender"!=n.state())return t(),e;var r=n.change(function(e,o){"prerender"!=o&&(n.unbind(r),t())});return r},hidden:function(){return!(!n._doc.hidden&&!n._doc.webkitHidden)},state:function(){return n._doc.visibilityState||n._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==n._doc.hidden||void 0!==n._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(t){var e=n.state();for(var r in n._callbacks)n._callbacks[r].call(n._doc,t,e)},_listen:function(){if(!n._init){var t="visibilitychange";n._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){n._change.apply(n,arguments)};n._doc.addEventListener?n._doc.addEventListener(t,e):n._doc.attachEvent(t,e),n._init=!0}}};void 0!==t&&t.exports?t.exports=n:e.Visibility=n}(this)},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o,i=r(512),a=r(295);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ONLINE=1]="ONLINE",t[t.OFFLINE=2]="OFFLINE"}(o||(o={}));var s=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.ns=o.UNKNOWN,r.offlineTimeoutInMS=5e3,e.offlineTimeoutInMS&&(r.offlineTimeoutInMS=e.offlineTimeoutInMS),r}return n(e,t),e.prototype.updateNetworkStatus=function(t){var e=this,r=t?o.ONLINE:o.OFFLINE;if(r===o.ONLINE)return this.offlineTimeout&&(clearTimeout(this.offlineTimeout),this.offlineTimeout=null),void(this.ns!==r&&(this.ns=r,this.emit(a.Event.NETWORK_CHANGE,!0)));if(r===o.OFFLINE){if(this.offlineTimeout)return;if(this.ns===r)return;this.offlineTimeout=setTimeout(function(){e.ns=r,e.emit(a.Event.NETWORK_CHANGE,!1),e.offlineTimeout=null},this.offlineTimeoutInMS)}},Object.defineProperty(e.prototype,"online",{get:function(){return this.ns===o.ONLINE},enumerable:!0,configurable:!0}),e}(i.Base);e.NetworkDetectable=s},function(t,e,r){t.exports=r(801)},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(228),o=r(805),i=r(807),a=r(808),s=r(809),u=r(686),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(810);t.exports=function(t){return new Promise(function(e,l){var f=t.data,p=t.headers;n.isFormData(f)&&delete p["Content-Type"];var h=new XMLHttpRequest,d="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(t.url)||(h=new window.XDomainRequest,d="onload",y=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var v=t.auth.username||"",g=t.auth.password||"";p.Authorization="Basic "+c(v+":"+g)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[d]=function(){if(h&&(4===h.readyState||y)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:r,config:t,request:h};o(e,l,n),h=null}},h.onerror=function(){l(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var m=r(811),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;b&&(p[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&n.forEach(p,function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete p[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),l(t),h=null)}),void 0===f&&(f=null),h.send(f)})}},function(t,e,r){"use strict";var n=r(806);t.exports=function(t,e,r,o,i){var a=new Error(t);return n(a,e,r,o,i)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(690);e.Delta=n.Delta;var o=r(691);e.Pool=o.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(822);e.Delta=n.default;var o=r(558);r(826).registerDataHandlers(o.default,n.default,o.default)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(557),o=r(823),i=r(824),a=function(){function t(t){void 0===t&&(t={array:[],packedData:""}),this[n.TYPE_PROPERTY]="Pool","string"==typeof t?(this.array=JSON.parse(t),this.packedData=t):(this.array=t.array,this.packedData=t.packedData)}return t.isPool=function(t){return"object"==typeof t&&null!==t&&"Pool"===t[n.TYPE_PROPERTY]},t.prototype.isSubsetOf=function(t){if(this===t)return!0;var e=this.array.length;if(0===e)return!0;if(e>t.array.length)return!1;for(var r=0;r<e;r++)if(this.array[r]!==t.array[r])return!1;return!0},t.prototype.getMap=function(){if(!this.map){this.map={};for(var t=0;t<this.array.length;t++)this.map[this.array[t]]=String(t)}return this.map},t.prototype.packAttributes=function(t){if(!t)return"";var e=Object.keys(t),r=e.length;if(0===r)return"";for(var n=[],o=[],a=0;a<r;a++){var s=e[a],u=t[s];if("object"==typeof u&&null!==u)for(var c=0,l=i.objectToKeyPaths(u,"."+s);c<l.length;c++){var f,p=l[c];" "===(f=this.getAddress(p[0],p[1]))[0]?n.push(f):o.push(f)}else" "===(f=this.getAddress(s,u))[0]?n.push(f):o.push(f)}return o.sort().join("")+n.sort().join("")},t.prototype.getAddress=function(t,e){var r=o.combinedAttributeWithValue(t,e),n=o.getGulByCombinedKeyValue(r);if("string"==typeof n)return n;var i=this.getMap();if(!i.hasOwnProperty(r)){this.packedData=void 0;var a=this.array.length;i[r]=String(a),this.array.push(r)}return" "+i[r]},t.prototype.unpackAttributes=function(t,e){void 0===e&&(e=!0);for(var r={},n=0;n<t.length&&" "!==t[n];){var a=o.getKeyValueByGul(t[n]),s=a[0],u=a[1];e&&"."===s[0]?i.keyPathToObject(r,s,u):r[s]=u,n+=1}if(n<t.length-1)for(var c=0,l=t.substring(n+1).split(" ");c<l.length;c++){var f=l[c],p=o.parseCombinedAttributeValue(this.array[f]);s=p[0],u=p[1];e&&"."===s[0]?i.keyPathToObject(r,s,u):r[s]=u}return r},t.prototype.stringify=function(){return"string"!=typeof this.packedData&&(this.packedData=this.array.length?JSON.stringify(this.array):""),this.packedData},t.prototype.clone=function(){return new t({array:this.array.slice(),packedData:this.packedData})},t}();e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialToObjectKey={A:"attachment",C:"cell",I:"image",D:"delta",T:"table",P:"presentation",S:"slide",M:"mention",N:"inline-break",V:"divide",U:"upload-placeholder-attachment",G:"gallery",B:"gallery-block",Z:"mindmap",O:"object",F:"form"},e.objectKeyToInitial=Object.keys(e.initialToObjectKey).reduce(function(t,r){return t[e.initialToObjectKey[r]]=r,t},{})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=function(t,e,r){var n=Object.keys(t);if(r&&0===n.length)return e;for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];t[a]=e[a],r||null!==t[a]||delete t[a]}return t},e.transform=function(t,e,r){if(r)return e;var n=Object.keys(e);if(0===n.length)return e;var o=Object.keys(t);if(0===o.length)return e;if(o.length>n.length)for(var i=0,a=n;i<a.length;i++){var s=a[i];t.hasOwnProperty(s)&&delete e[s]}else for(var u=0,c=o;u<c.length;u++)delete e[c[u]];return e},e.invert=function(t,e){var r=Object.keys(e);if(0===r.length)return e;if(0===Object.keys(t).length)for(var n=0,o=r;n<o.length;n++)e[s=o[n]]=null;else for(var i=0,a=r;i<a.length;i++){var s,u=t[s=a[i]];e[s]=void 0===u?null:u}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(557);e.isDelta=function(t){return"object"==typeof t&&null!==t&&"Delta"===t[n.TYPE_PROPERTY]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.possibleDeltaInputToString=function(t,e){if(void 0===e||null===e)return"";if(Array.isArray(e)){if(0===e.length)return"";var r=new t(e);return r.isEmpty()?"":r.stringify()}return e.isEmpty()?"":e.stringify()}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(695),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.compose=function(t,e,r){for(var n=this.parse(t).slice(0),o=this.parse(e).slice(0),i=Math.max(n.length,o.length),a=new Array(i),s=0;s<i;s++){var u=n[s],c=o[s];a[s]=u?c?u.compose(c,r):u:c}return this.pack(a)},e.prototype.transform=function(t,e,r){for(var n=this.parse(t).slice(0),o=this.parse(e).slice(0),i=Math.max(n.length,o.length),a=new Array(i),s=0;s<i;s++){var u=n[s],c=o[s];a[s]=u?c?u.transform(c,r):void 0:c}return this.pack(a)},e.prototype.invert=function(t,e){for(var r=this.parse(t).slice(0),n=this.parse(e).slice(0),o=Math.max(r.length,n.length),i=new Array(o),a=0;a<o;a++){var s=r[a],u=n[a];i[a]=s?u?s.invert(u):void 0:u}return this.pack(i)},e.prototype.parse=function(t){for(var e=0,r=[];e<t.length;){var n=t.indexOf("$",e);if(-1===n)break;var o=parseInt(t.substring(e,n),36),i=n+1+o,a=0===o?void 0:new this.deltaConstructor(t.substring(n+1,i));e=i,r.push(a)}return r},e.prototype.pack=function(t){for(var e="",r=0,n=t;r<n.length;r++){var i=n[r],a=o.possibleDeltaInputToString(this.deltaConstructor,i);e+=a.length.toString(36)+"$"+a}return e},e.prototype.toJSON=function(t){return this.parse(t).map(function(t){return t?t.toJSON():void 0})},e.prototype.explain=function(t,e){for(var r=t+"List:\n",n=this.parse(e),o=0;o<n.length;o++){var i=n[o];r+=t+"Item #"+o+":\n",r+=i?i.explain(t):"[EMPTY]"}return r},e}(r(455).default);e.default=i},function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var i=r(515),a=r(517),s=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),n(e,[{key:"setData",value:function(t){if(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),"number"==typeof this.data&&1!==this.data)throw new Error('The value of data should be "1", got '+this.data);return this}},{key:"name",value:function(){return"CellOperator"}},{key:"compose",value:function(t){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be composed");if(this.constructor.packId!==t.constructor.packId)throw new Error('Failed to compose operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;if("function"==typeof this.data.compose&&t.data.constructor.packId===this.data.constructor.packId)e=this.data.compose(t.data);else if("number"==typeof this.data)e=t.data;else{e=void 0!==i.unpack(t.attributes).cellValue?1:this.data}return(this.isGeneric()?t:this).createInstance({data:e,attributes:i.merge(this.attributes,t.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(t){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==t.action)throw new Error("Only retaining operator can be inverted");if(this.constructor.packId!==t.constructor.packId)throw new Error('Failed to invert operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;if("function"==typeof this.data.invert&&t.data.constructor.packId===this.data.constructor.packId)e=this.data.invert(t.data);else if("number"==typeof t.data){e=void 0!==i.unpack(t.attributes).cellValue?this.data:t.data}else e=this.data;return this.createInstance({data:e,attributes:i.invert(this.attributes,t.attributes),action:"retain"})}}]),e}();s.packId=4,t.exports=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(1),i=(r.n(o),r(209)),a=(r.n(i),r(782)),s=r(784),u=(r.n(s),r(221)),c=(r.n(u),this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),l=o.sheets,f=l.root,p=l.path,h=l.Events,d=l.constants,y=p.setByPath;!function(t){t.SAVE_STATUS_CHANGE="saveStatusChange",t.ERROR="error",t.CLIENT_READY="clientReady",t.REV_CHANGE="revChange"}(n||(n={}));var v={"-3":s.Types.RICHDOC,"-4":s.Types.MODOC},g=function(t){function e(e){var r=e.editor,o=e.socket,i=e.usingNewSeq,a=t.call(this)||this;return a.updateConfig=function(t){a.collab.updateConfig(t)},a.onSaveStatusChange=function(t){a.emit(n.SAVE_STATUS_CHANGE,t)},a.onError=function(t){a.emit(n.ERROR,t.code?t:JSON.parse(t.message))},a.onClientReady=function(){a.emit(n.CLIENT_READY)},a.onRevChange=function(t){a.emit(n.REV_CHANGE,t)},a._editor=r,a._usingNewSeq=i||!1,a._socket=o,a}return c(e,t),e.prototype.init=function(t){var e=this,r=t.guid,n=t.head,o=t.fileType,i=t.clientId,c=t.csStorage,l=t.committingChange,f=t.userChange,p=this._editor;this.csStorage=c,this._usingNewSeq?(this.collab=new s.Collaboration({guid:r,rev:n,clientId:i,editor:p,committingChange:l,userChange:f,storage:this.csStorage||void 0,type:v[o],pullUrl:"/lizard-api/files/"+r+"/pull",composeUrl:"/lizard-api/files/"+r+"/compose",pullInterval:55e3,forceXhr:Object(u.isDingTalk)()}),this.collab.on("changes",function(t){t.forEach(function(t){var e={type:t.type,rev:t.rev,authorClientId:t.clientId,authorId:t.authorId};p.emit(h.Track,d.ERR_CODE.TRACK_SHEET_SERVER_CHANGE,e)})}),this.collab.on("warning",function(t){"Changes are not continuous"===t.message&&p.emit(h.Track,d.ERR_CODE.TRACK_SHEET_SERVER_CHANGE_NOT_CONTINUOUS)})):this.collab=new a.a({guid:r,fileType:o,editor:p,socket:this._socket,clientId:i,rev:n,committingCS:l&&l.delta,userCS:f&&f.delta,storage:this.csStorage||void 0}),this.collab.on("saveStatusChange",this.onSaveStatusChange),this.collab.on("error",this.onError),this.collab.on("clientReady",this.onClientReady),this.collab.on("revChange",this.onRevChange),this.collab.on("serverChangeProcessed",function(t){var r=t.change;e._editor.transformRecords(r)})},e.prototype.start=function(){this.collab&&this.collab.start(),this._editor.emit(h.ReceiveChangeReady)},e.prototype.getCsStorage=function(){return this.csStorage},e.prototype.getClientId=function(){return this.collab.clientId},e.prototype.getRev=function(){return this.collab.rev},e.prototype.destroy=function(){this.collab.off("saveStatusChange",this.onSaveStatusChange),this.collab.off("error",this.onError),this.collab.off("clientReady",this.onClientReady),this.collab.off("revChange",this.onRevChange),this.collab.destroy&&this.collab.destroy(),this.removeAllListeners()},e}(i.EventEmitter);e.default=g,y(f,"shimo.sdk.sheet.plugins.Collaboration",g)},function(t,e,r){"use strict";(function(t,n){var o,i,a,s,u=r(147),c=r.n(u),l=r(311),f=r.n(l),p=r(454),h=r.n(p),d=r(209),y=(r.n(d),r(451)),v=(r.n(y),r(1)),g=(r.n(v),r(554)),m=r.n(g),b=r(783),w=r.n(b),_=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=this&&this.__assign||function(){return(E=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},C=v.sheets.Events,O=v.sheets.changeset,S=O.genDelta,A=O.pack,k=O.unpack,R=v.sheets.constants.ERR_CODE;!function(t){t.ready="CLIENT_READY",t.quit="CLIENT_QUIT"}(o||(o={})),function(t){t.OFFLINE="offline",t.OFFLINE_SAVING="offlineSaving",t.OFFLINE_SAVED="offlineSaved",t.OFFLINE_SAVE_FAILED="offlineSaveFailed",t.ONLINE="online",t.ONLINE_SAVING="onlineSaving",t.ONLINE_SAVED="onlineSaved",t.ONLINE_SAVE_FAILED="onlineSaveFailed",t.SERVER_CHANGE_APPLIED="serverChangeApplied",t.SYNC_OFFLINE_START="syncOfflineStart",t.SYNC_OFFLINE_SUCCESS="syncOfflineSuccess",t.SYNC_OFFLINE_FAILED="syncOfflineFailed"}(i||(i={})),function(t){t.ackTimeout="ack_timeout",t.missingTimeout="missing_timeout",t.socketDisconnected="socket_disconnected"}(a||(a={})),function(t){t.clientReady="clientReady",t.saveStatusChange="saveStatusChange",t.error="error",t.revChange="revChange",t.serverChangeProcessed="serverChangeProcessed"}(s||(s={}));var T=function(e){function r(r){var n=r.guid,u=r.fileType,l=r.editor,p=r.socket,d=r.rev,v=r.clientId,g=r.storage,m=r.committingCS,b=r.userCS,_=e.call(this)||this;return _.reconnectedHandler=function(){if(!_.hasBadChangesetFromServer){_.sendClientStatus(o.ready,!0);var t=_,e=t.offlineTimeId,r=t.disconnectTimeId;e&&clearTimeout(e),r&&clearTimeout(r),_.emit(s.saveStatusChange,i.ONLINE),_.offlineTimeId=setTimeout(function(){_.sendOfflineChange("reconnected")},2e3)}},_.disconnectedHandler=function(){if(!_.hasBadChangesetFromServer){var t=_.disconnectTimeId;t&&clearTimeout(t),_.disconnectTimeId=setTimeout(function(){_.offline(a.socketDisconnected)},3e3)}},_.onMessage=function(t){if("COLLABROOM"===t.type)switch(t.data.type){case"NEW_CHANGES":_.receivedNewChange(t.data);break;case"ACCEPT_COMMIT":case"REPEAT_COMMIT":_.sendChangeSuccess(t.data);break;case"BAD_CHANGESET":_.emit(s.error,{code:t.data.code||R.BAD_CS}),_.emit(s.saveStatusChange,i.ONLINE_SAVE_FAILED),_.ackTimeoutReconnection.clearTimeout(),_.hasBadChangesetFromServer=!0;break;case"WARNING":h.a.notify("accept:warning",t.data)}},_.onEditorChange=function(t){_.userCS=_.userCS.compose(t),_.userCSUuid=_.genUserCSUuid(),_.saveToStorage().then(function(){_.offlined&&_.emit(s.saveStatusChange,i.OFFLINE_SAVED)}).catch(function(){_.offlined&&_.emit(s.saveStatusChange,i.OFFLINE_SAVE_FAILED)}),_.emit(s.saveStatusChange,_.offlined?i.OFFLINE_SAVING:i.ONLINE_SAVING),_.saveStatus===i.ONLINE_SAVED&&_.sendChange("editorChanged")},_.sendChange=function(e){var r,n,o=_.fileType,a=_.committingCS&&!_.committingCS.isEmpty();if(a?(r=_.committingCS,n=_.uuid):(r=_.userCS,n=_.userCSUuid),!r.isEmpty()){var s=_.wrapUserChangeMsg(r,{uuid:n});_.send(s);var u=s.padId,c=s.collabId,l=s.data.baseRev;t({padId:u,baseRev:l,uuid:n,collabId:c},"",0,0,{name:"TRACK_SHEET_ONLINE_CS_"+e.toUpperCase()}),_.saveStatus=i.ONLINE_SAVING,a||(_.committingCS=_.userCS,_.userCS=S(o),_.uuid=_.userCSUuid,_.userCSUuid=null),_.ackTimeoutReconnection.addTimeout(),_.saveToStorage()}},_.sendChangeSuccess=function(e){if(e.newRev<=_.rev)return t(E({},e,{curRev:_.rev}),"reducer/msg.js",0,0,{name:"TRACK_SHEET_RECEIVED_ACCEPT_ERROR"});var r=_.processAck(e);if(!f()(r)){var n=r,o=n.rev,a=n.committingCS;_.rev=o,_.committingCS=a,_.offlined=!1,_.saveToStorage()}null===r||(_.saveStatus=i.ONLINE_SAVED),_.emit(s.saveStatusChange,i.ONLINE_SAVED),_.ackTimeoutReconnection.clearTimeout(),_.sendChange("ackReceived")},_.receivedNewChange=function(t){var e=_,r=e.editor;e.newChangesQueue.push(t),r.canHandleChanges()&&_.clearNewChangesQueue()},_.clearNewChangesQueue=function(){try{_.applyNewChange(_.newChangesQueue)}catch(e){t({stack:e&&e.stack,error:e,newChangesQueue:_.newChangesQueue},"",0,0,{name:"ERR_SHEET_APPLY_NEW_CHANGE_FAILED"}),console.error(e)}_.newChangesQueue=[]},_.applyNewChange=function(e){if(!_.hasBadChangesetFromServer){var r=_,n=r.fileType,o=r.rev,a=r.guid,u=r.clientId,l=r.isReconnect,f=r.committingCS,p=r.userCS;e instanceof Array||(e=[e]);for(var h=!1,d=o,y={rev:o,applyCS:S(n),committingCS:f,userCS:p},v=0,g=e.length;v<g;v++){var m=e[v],b=m.changeset,w=m.newRev;if(d=Math.max(d,w),!(w<=y.rev)){if(w>y.rev+1)break;if("NEW_CHANGES"===m.type&&m.padId&&m.padId!==a)return void t({curGuid:a,otherGuid:m.padId,curRev:y.rev,otherRev:w},"reducer/msg.js",0,0,{name:"TRACK_SHEET_RECEIVED_OTHER_FILE_CHANGE"});if("NEW_CHANGES"===m.type&&m.clientId===u)return void t({clientId:m.clientId,guid:a,rev:w},"reducer/msg.js",0,0,{name:"TRACK_SHEET_RECEIVED_SELF_CHANGE"});if(h=!0,"ACCEPT_COMMIT"!==m.type&&"REPEAT_COMMIT"!==m.type){var E=l&&b===A(n,y.committingCS);b=k(n,b);var C=_.processRemoteNewChange(y,b,E);_.emit(s.serverChangeProcessed,{change:C._d}),c()(y,{rev:w,committingCS:C._x,userCS:C._y,applyCS:C.d,fromPush:!0}),E&&t({clientId:m.clientId,guid:a,rev:w,curRev:o,curClientId:u},"",0,0,{name:"TRACK_SHEET_RECEIVED_REPEATED_COMMITTINGCS"})}else c()(y,_.processAck(m,!0))}}d>y.rev&&_.sendMissingChanges(y.rev+1),h&&(c()(_,y),_.saveToStorage(),_.editor.applyChange(y.applyCS),_.emit(s.saveStatusChange,i.SERVER_CHANGE_APPLIED))}},_.processAck=function(e,r){var n=e.newRev,o=e.padId,i=_,a=i.guid,s=i.fileType,u=i.rev,c=i.newChangesQueue;return a!==o?(t({curGuid:a,otherGuid:o,curRev:u,otherRev:n},"oldSeq",0,0,{name:"TRACK_RECEIVED_OTHER_FILE_ACK"}),null):u>=n?(t({curGuid:a,otherGuid:o,curRev:u,otherRev:n},"oldSeq",0,0,{name:"RECEIVED_REPEATED_ACK"}),null):!r&&c.length>0?(c.push(e),{}):{rev:n,committingCS:S(s)}},_.sendOfflineChange=function(e){var r=_.committingCS;if(_.isReconnect)if(r.isEmpty())_.isReconnect=!1;else{var n=_.wrapUserChangeMsg(r,{uuid:_.uuid});_.send(n);var o=n.padId,i=n.collabId,a=n.data,s=a.baseRev,u=a.uuid;t({padId:o,baseRev:s,uuid:u,collabId:i},"",0,0,{name:"TRACK_SHEET_OFFLINE_CS_"+e.toUpperCase()}),_.isReconnect=!1}},_.offline=function(e){var r=_,n=r.guid,o=r.rev,u=r.clientId;t({guid:n,rev:o,clientId:u,offlined:_.offlined},"",0,0,{name:"TRACK_SHEET_"+(e&&e.toUpperCase())}),(e!==a.ackTimeout&&e!==a.missingTimeout||(_.sendMissingChanges(o+1),"ack_timeout"!==e))&&(_.offlined||(_.offlined=!0,_.emit(s.saveStatusChange,i.OFFLINE)))},_.guid=n,_.fileType=u,_.editor=l,_.rev=d,_.socket=p,_.storage=g,_.isReconnect=!1,_.clientId=v||Object(y.v4)(),_.saveStatus=i.ONLINE_SAVED,_.newChangesQueue=[],_.offlined=!1,_.committingCS=m?"string"==typeof m?k(u,m):m:S(u),_.userCS=b?"string"==typeof b?k(u,b):b:S(u),_.ackTimeoutReconnection=new w.a(_.offline),_}return _(r,e),Object.defineProperty(r.prototype,"rev",{get:function(){return this._rev},set:function(t){this._rev=t,this.emit(s.revChange,t)},enumerable:!0,configurable:!0}),r.prototype.start=function(){var t=this,e=this.socket;e.connected?(this.sendClientStatus(o.ready),e.on("connect",this.reconnectedHandler)):e.once("connect",function(){t.sendClientStatus(o.ready),e.on("connect",t.reconnectedHandler)}),e.on("disconnect",this.disconnectedHandler),e.on("message",this.onMessage),this.editor.on(C.Change,this.onEditorChange),this.editor.on(C.CalcCsQueueEmpty,this.clearNewChangesQueue),n(window).on("offline",this.disconnectedHandler).on("online",this.reconnectedHandler)},r.prototype.destroy=function(){var t=this.socket;t&&(t.off("connect",this.reconnectedHandler),t.off("disconnect",this.disconnectedHandler),t.off("message",this.onMessage)),this.editor.off(C.Change,this.onEditorChange),this.editor.off(C.CalcCsQueueEmpty,this.clearNewChangesQueue),n(window).off("offline",this.disconnectedHandler).off("online",this.reconnectedHandler)},r.prototype.updateConfig=function(t){t.hasOwnProperty("guid")&&(this.guid=t.guid,this.sendOfflineChange("updateConfig"))},r.prototype.sendClientStatus=function(t,e){var r=this.rev,n=this.clientId,o={component:"pad",type:t,padId:this.guid,reconnect:!0,client_rev:r,collabId:n,sessionID:m.a.get("sessionID"),token:m.a.get("token"),protocolVersion:2};this.send(o),this.offlined=!1,this.isReconnect=e||!1,this.emit(s.clientReady)},r.prototype.send=function(t){this.socket&&this.socket.emit("message",t)},r.prototype.sendMissingChanges=function(e){var r=this.guid,n={type:"COLLABROOM",component:"pad",padId:r,collabId:this.clientId,data:{type:"MISSING_CHANGES",fromRev:e}};this.send(n),t({tag:"seq_missing_changes",fileGuid:r,fromRev:e,toRev:this.rev},"oldSeq/index.js",0,0,{name:"seq_missing_changes"})},r.prototype.wrapUserChangeMsg=function(t,e){var r=e.uuid,n=this.guid,o=this.fileType;return{type:"COLLABROOM",component:"pad",padId:n,collabId:this.clientId,data:{type:"USER_CHANGES",baseRev:this.rev,changeset:A(o,t),uuid:r}}},r.prototype.processRemoteNewChange=function(t,e,r){var n=this.fileType,o=t.userCS,i=t.applyCS,a=r?S(n):t.committingCS,s=a.transform(e,!0),u=e.transform(a),c=s.transform(o),l=o.transform(s,!0);return{_x:u,_y:c,_d:l,d:i.compose(l)}},r.prototype.saveToStorage=function(){var t=this,e=t.fileType,r=t.clientId,n=t.guid,o=t.rev,i=t.committingCS,a=t.uuid,s=t.userCS,u=t.userCSUuid;return this.storage.set({clientId:r,guid:n,rev:o,committingChange:{delta:A(e,i),uuid:a},userChange:{delta:A(e,s),uuid:u}})},r.prototype.genUserCSUuid=function(){var t=this.userCSUuid;return t||(t="s-"+Object(y.v4)()),t},r}(d.EventEmitter);e.a=T}).call(e,r(310),r(84))},function(t,e,r){(function(r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeoutFun=e,this.ackTimeout=null,this.intervalTimeout=null,this.waitTime=3e4,this.maxIntervalTime=3e5,this.timeoutCount=1,this.maxSendCount=60}return n(t,[{key:"addTimeout",value:function(){var t=this,e=this.waitTime,n=this.timeoutCount,o=this.maxIntervalTime,i=this.maxSendCount,a=1===n,s=Math.min(this.waitTime*n,o);if(n>i)return this.clearTimeout(),r({guid:window.cow.currentFile.guid},"",0,0,{name:"ERR_SHEET_SEND_MISSING_CHANGE_MAX_TIME"});this.ackTimeout=setTimeout(function(){t.timeoutFun(a?"ack_timeout":"missing_timeout"),t.intervalTimeout=setTimeout(function(){t.addTimeout()},s)},e),this.timeoutCount++}},{key:"clearTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){clearTimeout(this.ackTimeout),clearTimeout(this.intervalTimeout),this.timeoutCount=1})}]),t}();e.default=o,t.exports=e.default}).call(e,r(310))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(785);e.Collaboration=n.Collaboration,e.Types=n.Types;var o=r(295);e.version=o.version},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i,a=r(677),s=r(512),u=r(295),c=r(789),l=r(799),f=r(800),p=r(819),h=r(838),d=r(555);!function(t){t.MODOC="modoc",t.RICHDOC="richdoc"}(e.Types||(e.Types={})),function(t){t.MODOC="modoc",t.RICHDOC="richdoc"}(i=e.DeltaType||(e.DeltaType={}));var y=function(t){function e(e){var r=t.call(this)||this;r.events=u.Event,r.type=i.MODOC,r.pullInterval=55e3,r.assert(e.editor,"options.editor required"),r.assert(e.rev,"options.rev required"),r.assert(e.guid,"options.guid required");var n=r.clientId=e.clientId||a.v4().replace(/-/g,""),s=r.guid=e.guid;e.pullInterval&&(r.pullInterval=e.pullInterval),e.storage&&(r.storage=e.storage),e.type&&(r.type=e.type);var y={rev:e.rev};r.shared=y;var v=r.tracker=new p.Tracker({committingChange:e.committingChange,editor:e.editor,storage:r.storage?{set:function(){return function(t){if(r.storage){var e={clientId:r.clientId,guid:r.guid,rev:r.shared.rev},n=o({},t,e);r.storage.set(n)}}}}:void 0,type:r.type,userChange:e.userChange,adaptors:e.adaptors});if(r.puller=new c.Puller({clientId:n,guid:r.guid,pullInterval:r.pullInterval,shared:y,tracker:v,url:e.pullUrl.replace("{guid}",String(r.guid)),handleServerChangeThrottleDelay:e.handleServerChangeThrottleDelay,delayMin:e.pullDelayMin,delayMax:e.pullDelayMax,delayRandomizationFactor:e.pullDelayRandomizationFactor,visibilityDelay:e.visibilityDelay,forceXhr:e.forceXhr}),r.puller.on(u.Event.CHANGES,function(t){r.emit(r.events.CHANGES,t)}),r.sender=new f.Sender({clientId:n,guid:s,shared:y,tracker:v,url:e.composeUrl.replace("{guid}",String(r.guid))}),e.selectUrl){var g=e.collaborators||e.editor.collaborators;if(!g)throw new Error("Missing `collaborators` option");r.collaborator=new h.Collaborator({puller:r.puller,url:e.selectUrl,editor:g,clientId:n}),r.collaborator.on(u.Event.WARNING,function(t){return r.emit(u.Event.WARNING,t)}),[u.Event.ENTER,u.Event.LEAVE,u.Event.SELECT].forEach(function(t){r.collaborator&&r.collaborator.on(t,function(e){return r.emit(t,e)})})}return r.puller.on(u.Event.BROADCAST,function(t){r.emit(u.Event.BROADCAST,t)}),r.saveStatus=new l.SaveStatus({timeoutThreshold:12e4}),[r.sender,r.puller,r.saveStatus,r.tracker].forEach(function(t){t.on(u.Event.ERROR,function(t){r.emit(u.Event.ERROR,t),r.stop(),u.setReadonly(e.editor)}),t.on(u.Event.WARNING,function(t){r.emit(u.Event.WARNING,t)})}),r.tracker.on(u.Event.SERVER_CHANGE_APPLIED,function(t){r.emit(r.events.BEFORE_APPLY_CHANGE,t)}),r.tracker.on(u.Event.SERVER_CHANGE_PROCESSED,function(t){r.emit(r.events.SERVER_CHANGE_PROCESSED,t)}),r.saveStatus.on(u.Event.CHANGE,function(t){r.emit(r.events.SAVE_STATUS_CHANGE,t)}),r.initializeSaveStatus(),!1===e.offlineEditable&&r.saveStatus.on(l.SaveStatus.events.CHANGE,function(t){t===d.Status.ONLINE&&u.setEditable(e.editor),t===d.Status.OFFLINE&&u.setReadonly(e.editor)}),r}return n(e,t),e.prototype.start=function(){this.sender.start(),this.puller.start()},e.prototype.stop=function(){this.sender.stop(),this.puller.stop()},e.prototype.getCollaborators=function(){return this.collaborator?this.collaborator.users:[]},e.prototype.haveUnsavedChange=function(){return this.tracker.committingChange.delta.length>0},e.prototype.destroy=function(){this.stop(),this.puller.destroy(),this.sender.destroy(),this.saveStatus.destroy(),this.tracker.destroy(),this.removeAllListeners(),this.collaborator&&this.collaborator.destroy()},Object.defineProperty(e.prototype,"rev",{get:function(){return this.shared.rev},set:function(t){this.shared.rev=t},enumerable:!0,configurable:!0}),e.prototype.initializeSaveStatus=function(){var t=this;Object.keys(u.Event).forEach(function(e){var r=u.Event[e];[t.puller,t.sender,t.tracker].forEach(function(e){e.on(r,function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.saveStatus).onEvent.apply(e,[r].concat(n))})})})},e.events=u.Event,e}(s.Base);e.Collaboration=y},function(t,e,r){var n,o,i=r(678),a=r(679),s=0,u=0;t.exports=function(t,e,r){var c=e&&r||0,l=e||[],f=(t=t||{}).node||n,p=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==p){var h=i();null==f&&(f=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:u+1,v=d-s+(y-u)/1e4;if(v<0&&void 0===t.clockseq&&(p=p+1&16383),(v<0||d>s)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,u=y,o=p;var g=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var m=d/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=p>>>8|128,l[c++]=255&p;for(var b=0;b<6;++b)l[c+b]=f[b];return e||a(l)}},function(t,e,r){var n=r(678),o=r(679);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=function(t){return new Promise(function(e){setTimeout(e,t)})}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=r(513),u=r(312),c=r(680),l=r(794),f=r(795),p=r(295),h=r(796),d=r(682),y=s("collab:puller");!function(t){t.NEW="new",t.ACCEPT="accept"}(a=e.ServerChangeType||(e.ServerChangeType={}));var v=p.version.replace(/\./g,"_"),g=function(t){function e(e){var r=t.call(this)||this;return r.stopped=!1,r.changes=[],r.isHandling=!1,r.lastHandleServerChangeTime=0,r.handleServerChangeThrottleDelay=0,r.forceXhr=!1,r.lastPullChangesNotContinuousTime=0,r.visible=!0,r.lastEventId={},r.guid=e.guid,r.url=e.url.replace("{guid}",String(r.guid)),r.clientId=e.clientId,r.tracker=e.tracker,r.shared=e.shared,r.currentPullRev=r.shared.rev,r.pullInterval=e.pullInterval,r.handleServerChanges=r.wrapAsyncTryCatch(r.handleServerChanges,r),e.handleServerChangeThrottleDelay&&(r.handleServerChangeThrottleDelay=e.handleServerChangeThrottleDelay),e.forceXhr&&(r.forceXhr=e.forceXhr),r.tracker.on("readyToHandleChanges",function(){r.handleServerChanges()}),r.backoff=new f({min:e.delayMin||100,max:e.delayMax||5e3,jitter:e.delayRandomizationFactor||.5}),r.visibilityDelay=e.visibilityDelay||6e5,r.network=new d.NetworkDetectable,r.network.on(p.Event.NETWORK_CHANGE,function(t){r.emit(p.Event.NETWORK_CHANGE,t)}),r.initialVisibility(),r}return n(e,t),e.prototype.start=function(){this.stopped=!1,this.pull()},e.prototype.stop=function(){this.stopped||(this.eventSource&&this.eventSource.close(),this.pullTimeout&&clearTimeout(this.pullTimeout),this.visibilityTimeout&&(clearTimeout(this.visibilityTimeout),this.visibilityTimeout=null),this.stopped=!0)},e.prototype.destroy=function(){this.stop(),this.superDestroy()},e.prototype.pull=function(){var t=this;if(!this.stopped){var e=this.assembleEventSourceUrl(),r=this.eventSource=new l(e,{forceXhr:this.forceXhr});r.addEventListener(p.Event.CHANGES,function(e){var r;t.onMessage(e);var n=JSON.parse(e.data).filter(function(e){return e.rev>t.currentPullRev}).sort(function(t,e){return t.rev-e.rev}).filter(function(t,e,r){return 0===e||t.rev!==r[e-1].rev});if(0!==n.length){if(!t.isRevContinuous(n,t.currentPullRev)){var o=Date.now();return t.emit(p.Event.WARNING,new p.CollaborationError("Changes are not continuous",p.ERROR.ERR_CHANGE_NOT_CONTINUOUS)),o-t.lastPullChangesNotContinuousTime<5e3?void t.emit(p.Event.ERROR,new p.CollaborationError("Pull discontinuous",p.ERROR.ERR_DISCONTINUOUS,e.data)):(t.lastPullChangesNotContinuousTime=o,void t.onEventSourceErrorOrClose({status:t.eventSource&&t.eventSource.status||0}))}(r=t.changes).push.apply(r,n),t.currentPullRev=n[n.length-1].rev,t.handleServerChanges()}}),r.addEventListener(p.Event.COLLABORATOR,function(e){t.onMessage(e),t.emit(p.Event.COLLABORATOR,JSON.parse(e.data))}),r.addEventListener("pull_error",function(e){t.onMessage(e),y("pull_error message "+e.data);try{var r=JSON.parse(e.data),n=new p.CollaborationError(r.message,r.code,e.data);t.emit(p.Event.ERROR,n)}catch(e){t.emit(p.Event.ERROR,new p.CollaborationError("Pull error",p.ERROR.ERR_PULL,e.data))}}),r.addEventListener(p.Event.BROADCAST,function(e){t.onMessage(e),t.emit(p.Event.BROADCAST,JSON.parse(e.data))}),this.pullTimeout=setTimeout(function(){y("pull timeout, close"),t.onEventSourceErrorOrClose({status:t.eventSource&&t.eventSource.status||0})},this.pullInterval),r.onerror=function(e){return t.onEventSourceErrorOrClose(e)},r.addEventListener("close",function(e){t.onEventSourceErrorOrClose(e)})}},e.prototype.onMessage=function(t){this.network.updateNetworkStatus(!0);try{this.lastEventId=JSON.parse(t.lastEventId)}catch(t){this.lastEventId={}}},e.prototype.onEventSourceErrorOrClose=function(t){var e=this;if(y("pull eventsource error or closed",t),this.pullTimeout&&clearTimeout(this.pullTimeout),this.eventSource)try{this.eventSource.close(),this.eventSource.removeEventListener(p.Event.CHANGES),this.eventSource.removeEventListener(p.Event.COLLABORATOR),this.eventSource.removeEventListener(p.Event.BROADCAST),this.eventSource.removeEventListener("pull_error"),this.eventSource.removeEventListener("close")}catch(t){y("event source closed error",t)}var r=String(t.status);if(""!==r&&"0"!==r||this.network.updateNetworkStatus(!1),"4"!==r[0])if(this.visible){if("2"===r[0])return this.backoff.reset(),void this.pull();var n=this.backoff.duration();y("pull with status "+r+", delay "+n+"ms to run"),this.delayRun(this.pull,n)}else this.visibilityTimeout=setTimeout(function(){e.visibilityTimeout=null,e.pull()},this.visibilityDelay);else this.emit(p.Event.ERROR,new p.CollaborationError("Puller encountered failure with status "+r,p.ERROR.ERR_PULL_4XX,t))},e.prototype.assembleEventSourceUrl=function(){var t=this.url.split("?"),e=t[0],r=t[1],n=c.parse(r);return u(n,{clientId:this.clientId,rev:this.currentPullRev,timeout:this.pullInterval,visible:this.visible?1:0,version:v},this.lastEventId),e+"?"+c.stringify(n)},e.prototype.handleServerChanges=function(){return o(this,void 0,void 0,function(){var t,e,r,n,o,a,s=this;return i(this,function(i){switch(i.label){case 0:return this.tracker.canHandleChangesRightNow()?this.isHandling?(this.delayRun(this.handleServerChanges,200),[2]):this.handleServerChangeThrottleDelay>0&&(t=Date.now()-this.lastHandleServerChangeTime)<this.handleServerChangeThrottleDelay?(y("handle server change too often, delay "+t+"ms"),this.delayRun(this.handleServerChanges,t),[2]):(this.isHandling=!0,e=this.changes.concat([]).filter(function(t){return t.rev>s.shared.rev}),this.isRevContinuous(e,this.shared.rev)||this.emit(p.Event.WARNING,new p.CollaborationError("Changes discontinuous",p.ERROR.ERR_CHANGES_DISCONTINUOUS)),this.emit(p.Event.CHANGES,e),this.changes=[],r=this.classifyServerChanges(e),n=r.beforeList,o=r.accept,a=r.afterList,n.length>0?(y("applyChangesToBase (before accept)",n),this.shared.rev=p.last(n).rev,[4,this.tracker.applyChangesToBase(n)]):[3,2]):(this.emit(p.Event.WAITING_FOR_CAN_HANDLE_SERVER_CHANGES),[2]);case 1:i.sent(),i.label=2;case 2:return o?(this.shared.rev=o.rev,y("applyPreparedChangesetToBase (accept)",o),[4,this.tracker.applyPreparedChangesetToBase()]):[3,4];case 3:i.sent(),this.emit(p.Event.ACCEPT_COMMIT),i.label=4;case 4:return a.length>0?(y("applyChangesToBase (after accept)",a),this.shared.rev=p.last(a).rev,[4,this.tracker.applyChangesToBase(a)]):[3,6];case 5:i.sent(),i.label=6;case 6:return this.lastHandleServerChangeTime=Date.now(),this.isHandling=!1,[2]}})})},e.prototype.classifyServerChanges=function(t){var e=[],r=null,n=[];return t.forEach(function(t){t.type!==a.NEW?t.type===a.ACCEPT&&(r=t):r?n.push(t):e.push(t)}),{beforeList:e,accept:r,afterList:n}},e.prototype.isRevContinuous=function(t,e){if(0===t.length)return!0;if(t[0].rev-e!=1)return!1;for(var r=1;r<t.length;r++)if(t[r].rev-t[r-1].rev!=1)return!1;return!0},e.prototype.initialVisibility=function(){var t=this;this.on("visible",function(e){if(t.visible=e,e&&t.visibilityTimeout)return clearTimeout(t.visibilityTimeout),t.visibilityTimeout=null,void t.pull()})},e}(h.Visible);e.Puller=g},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(t,i),a.splice(u,1),u--}return r}),e.formatArgs.call(t,a),(n.log||e.log||console.log.bind(console)).apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=o,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var i=e.instances[r];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(791),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var r=1e3,n=60*r,o=60*n,i=24*o,a=365.25*i;function s(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?function(t){return s(t,i,"day")||s(t,o,"hour")||s(t,n,"minute")||s(t,r,"second")||t+" ms"}(t):function(t){if(t>=i)return Math.round(t/i)+"d";if(t>=o)return Math.round(t/o)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],i(r),i(n))}function a(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(n),r=1;r<e.length;r++)e=(t=i(e,r).join("")).match(n);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},r=o.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var n=a(r[0]);n!==r[0]&&(e[r[0]]=n)}r=o.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var u=i[s];t=t.replace(new RegExp(u,"g"),e[u])}return t}(t)}}},function(t,e){
/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */
var r=window.setTimeout,n=window.clearTimeout,o=window.XMLHttpRequest,i=window.XDomainRequest,a=window.document,s=window.Promise,u=window.fetch,c=window.Response,l=window.TextDecoder,f=window.TextEncoder,p=window.AbortController,h=5e3;if(void 0==Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),void 0!=s&&void 0==s.prototype.finally&&(s.prototype.finally=function(t){return this.then(function(e){return s.resolve(t()).then(function(){return e})},function(e){return s.resolve(t()).then(function(){throw e})})}),void 0!=u){var d=u;u=function(t,e){return s.resolve(d(t,e))}}function y(){this.bitsNeeded=0,this.codePoint=0}void 0==p&&(p=function(){this.signal=null,this.abort=function(){}}),y.prototype.decode=function(t){function e(t,e,r){if(1===r)return t>=128>>e&&t<<e<=2047;if(2===r)return t>=2048>>e&&t<<e<=55295||t>=57344>>e&&t<<e<=65535;if(3===r)return t>=65536>>e&&t<<e<=1114111;throw new Error}function r(t,e){if(6===t)return e>>6>15?3:e>31?2:1;if(12===t)return e>15?3:2;if(18===t)return 3;throw new Error}for(var n="",o=this.bitsNeeded,i=this.codePoint,a=0;a<t.length;a+=1){var s=t[a];0!==o&&(s<128||s>191||!e(i<<6|63&s,o-6,r(o,i)))&&(o=0,i=65533,n+=String.fromCharCode(i)),0===o?(s>=0&&s<=127?(o=0,i=s):s>=192&&s<=223?(o=6,i=31&s):s>=224&&s<=239?(o=12,i=15&s):s>=240&&s<=247?(o=18,i=7&s):(o=0,i=65533),0===o||e(i,o,r(o,i))||(o=0,i=65533)):(o-=6,i=i<<6|63&s),0===o&&(i<=65535?n+=String.fromCharCode(i):(n+=String.fromCharCode(55296+(i-65535-1>>10)),n+=String.fromCharCode(56320+(i-65535-1&1023))))}return this.bitsNeeded=o,this.codePoint=i,n};void 0!=l&&void 0!=f&&function(){try{return"test"===(new l).decode((new f).encode("test"),{stream:!0})}catch(t){console.log(t)}return!1}()||(l=y);var v=function(){};function g(t){this.withCredentials=!1,this.responseType="",this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=v,this.onreadystatechange=v,this._contentType="",this._xhr=t,this._sendTimeout=0,this._abort=v}function m(t){return t.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+32)})}function b(t){for(var e=Object.create(null),r=t.split("\r\n"),n=0;n<r.length;n+=1){var o=r[n].split(": "),i=o.shift(),a=o.join(": ");e[m(i)]=a}this._map=e}function w(){}function _(t){this._headers=t}function E(){}function C(){this._listeners=Object.create(null)}function O(t){r(function(){throw t},0)}function S(t,e){for(var r in this.type=t,this.target=void 0,e)this.hasOwnProperty(r)||(this[r]=e[r])}function A(t,e){S.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function k(t,e){S.call(this,t),this.status=e.status,this.statusText=e.statusText,this.headers=e.headers}g.prototype.open=function(t,e){this._abort(!0);var i=this,a=this._xhr,s=1,u=0;this._abort=function(t){0!==i._sendTimeout&&(n(i._sendTimeout),i._sendTimeout=0),1!==s&&2!==s&&3!==s||(s=4,a.onload=v,a.onerror=v,a.onabort=v,a.onprogress=v,a.onreadystatechange=v,a.abort(),0!==u&&(n(u),u=0),t||(i.readyState=4,i.onreadystatechange())),s=0};var c=function(){if(1===s){var t=0,e="",r=void 0;if("contentType"in a)t=200,e="OK",r=a.contentType;else try{t=a.status,e=a.statusText,r=a.getResponseHeader("Content-Type")}catch(n){t=0,e="",r=void 0}0!==t&&(s=2,i.readyState=2,i.status=t,i.statusText=e,i._contentType=r,i.onreadystatechange())}},l=function(){if(c(),2===s||3===s){s=3;var t="";try{t=a.responseText}catch(t){}i.readyState=3,i.responseText=t,i.onprogress()}},f=function(){l(),1!==s&&2!==s&&3!==s||(s=4,0!==u&&(n(u),u=0),i.readyState=4,i.onreadystatechange())};a.onload=f,a.onerror=f,a.onabort=f,"sendAsBinary"in o.prototype||"mozAnon"in o.prototype||(a.onprogress=l),a.onreadystatechange=function(){void 0!=a&&(4===a.readyState?f():3===a.readyState?l():2===a.readyState&&c())},"contentType"in a&&(e+=(-1===e.indexOf("?")?"?":"&")+"padding=true"),a.open(t,e,!0),"readyState"in a&&(u=r(function(){!function t(){u=r(function(){t()},500),3===a.readyState&&l()}()},0))},g.prototype.abort=function(){this._abort(!1)},g.prototype.getResponseHeader=function(t){return this._contentType},g.prototype.setRequestHeader=function(t,e){var r=this._xhr;"setRequestHeader"in r&&r.setRequestHeader(t,e)},g.prototype.getAllResponseHeaders=function(){return void 0!=this._xhr.getAllResponseHeaders?this._xhr.getAllResponseHeaders():""},g.prototype.send=function(){if("ontimeout"in o.prototype||void 0==a||void 0==a.readyState||"complete"===a.readyState){var t=this._xhr;t.withCredentials=this.withCredentials,t.responseType=this.responseType;try{t.send(void 0)}catch(t){throw t}}else{var e=this;e._sendTimeout=r(function(){e._sendTimeout=0,e.send()},4)}},b.prototype.get=function(t){return this._map[m(t)]},w.prototype.open=function(t,e,o,i,a,s,u){t.open("GET",a);var c,l=0;function f(){c=r(function(){t.abort()},h)}for(var p in f(),t.onprogress=function(){var e=t.responseText.slice(l);l+=e.length,e.length>0&&(n(c),f()),o(e)},t.onreadystatechange=function(){if(2===t.readyState){var r=t.status,n=t.statusText,o=t.getResponseHeader("Content-Type"),a=t.getAllResponseHeaders();e(r,n,o,new b(a),function(){t.abort()})}else 4===t.readyState&&i()},t.withCredentials=s,t.responseType="text",u)Object.prototype.hasOwnProperty.call(u,p)&&t.setRequestHeader(p,u[p]);t.send()},_.prototype.get=function(t){return this._headers.get(t)},E.prototype.open=function(t,e,o,i,a,c,f){var d=new p,y=d.signal,v=new l;u(a,{headers:f,credentials:c?"include":"same-origin",signal:y,cache:"no-store"}).then(function(t){var i=t.body.getReader();return e(t.status,t.statusText,t.headers.get("Content-Type"),new _(t.headers),function(){d.abort(),i.cancel().catch(function(){})}),new s(function(t,e){!function a(){new s(function(t,e){var o=r(function(){e(new Error("Reader read timeout")),o=null},h);i.read().then(function(e){o&&(n(o),t(e))},e)}).then(function(e){if(e.done)t(void 0);else{var r=v.decode(e.value,{stream:!0});o(r),a()}}).catch(function(t){e(t)})}()})}).catch(function(){}).finally(function(){i()})},C.prototype.dispatchEvent=function(t){t.target=this;var e=this._listeners[t.type];if(void 0!=e)for(var r=e.length,n=0;n<r;n+=1){var o=e[n];try{"function"==typeof o.handleEvent?o.handleEvent(t):o.call(this,t)}catch(t){O(t)}}},C.prototype.addEventListener=function(t,e){t=String(t);var r=this._listeners,n=r[t];void 0==n&&(n=[],r[t]=n);for(var o=!1,i=0;i<n.length;i+=1)n[i]===e&&(o=!0);o||n.push(e)},C.prototype.removeEventListener=function(t,e){t=String(t);var r=this._listeners,n=r[t];if(void 0!=n){for(var o=[],i=0;i<n.length;i+=1)n[i]!==e&&o.push(n[i]);0===o.length?delete r[t]:r[t]=o}},A.prototype=Object.create(S.prototype),k.prototype=Object.create(S.prototype);var R=-1,T=0,j=1,x=2,I=-1,P=0,N=1,D=2,F=3,L=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,M=function(t,e){var r=parseInt(t,10);return r!=r&&(r=e),U(r)},U=function(t){return Math.min(Math.max(t,1e3),18e6)},H=function(t,e,r){try{"function"==typeof e&&e.call(t,r)}catch(t){O(t)}};function G(t,e){C.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this._close=void 0,this.status=0,function(t,e,a){e=String(e);var s=void 0!=a&&Boolean(a.withCredentials),u=U(1e3),c=void 0!=a&&void 0!=a.heartbeatTimeout?M(a.heartbeatTimeout,45e3):U(45e3),l="",f=u,p=!1,h=void 0!=a&&void 0!=a.headers?JSON.parse(JSON.stringify(a.headers)):void 0,d=void 0!=a&&void 0!=a.Transport?a.Transport:void 0!=o&&"withCredentials"in o.prototype||void 0==i?o:i,y=B&&(void 0==a||void 0==a.Transport&&!a.forceXhr)?void 0:new g(new d),v=void 0==y?new E:new w,m=void 0,b=0,_=R,C="",G="",$="",V="",q=P,W=0,J=0,z=function(e,r,n,o,i){if(t.status=e,_===T)if(m=i,200===e&&void 0!=n&&L.test(n)){_=j,p=!0,f=u,t.readyState=j;var a=new k("open",{status:e,statusText:r,headers:o});t.dispatchEvent(a),H(t,t.onopen,a)}else{var s="";200!==e?(r&&(r=r.replace(/\s+/g," ")),s="EventSource's response has a status "+e+" "+r+" that is not 200. Aborting the connection."):s="EventSource's response has a Content-Type specifying an unsupported type: "+(void 0==n?"-":n.replace(/\s+/g," "))+". Aborting the connection.",O(new Error(s)),X();var a=new k("error",{status:e,statusText:r,headers:o});t.dispatchEvent(a),H(t,t.onerror,a)}},Y=function(e){if(_===j){for(var o=-1,i=0;i<e.length;i+=1){var a=e.charCodeAt(i);a!=="\n".charCodeAt(0)&&a!=="\r".charCodeAt(0)||(o=i)}var s=(-1!==o?V:"")+e.slice(0,o+1);V=(-1===o?V:"")+e.slice(o+1),""!==s&&(p=!0);for(var h=0;h<s.length;h+=1){var a=s.charCodeAt(h);if(q===I&&a==="\n".charCodeAt(0))q=P;else if(q===I&&(q=P),a==="\r".charCodeAt(0)||a==="\n".charCodeAt(0)){if(q!==P){q===N&&(J=h+1);var d=s.slice(W,J-1),y=s.slice(J+(J<h&&s.charCodeAt(J)===" ".charCodeAt(0)?1:0),h);"data"===d?(C+="\n",C+=y):"id"===d?G=y:"event"===d?$=y:"retry"===d?(u=M(y,u),f=u):"heartbeatTimeout"===d&&(c=M(y,c),0!==b&&(n(b),b=r(function(){Q()},c)))}if(q===P){if(""!==C){l=G,""===$&&($="message");var v=new A($,{data:C.slice(1),lastEventId:G});if(t.dispatchEvent(v),"message"===$&&H(t,t.onmessage,v),_===x)return}C="",$=""}q=a==="\r".charCodeAt(0)?I:P}else q===P&&(W=h,q=N),q===N?a===":".charCodeAt(0)&&(J=h+1,q=D):q===D&&(q=F)}}},K=function(){if(_===j||_===T){_=R,0!==b&&(n(b),b=0),b=r(function(){Q()},f),f=U(Math.min(16*u,2*f)),t.readyState=T;var e=new S("error",{status:t.status});t.dispatchEvent(e),H(t,t.onerror,e)}},X=function(){_=x,void 0!=m&&(m(),m=void 0),0!==b&&(n(b),b=0),t.readyState=x},Q=function t(){if(b=0,_===R){p=!1,b=r(function(){t()},c),_=T,C="",$="",G=l,V="",W=0,J=0,q=P;var n=e;"data:"!==e.slice(0,5)&&"blob:"!==e.slice(0,5)&&""!==l&&(n+=(-1===e.indexOf("?")?"?":"&")+"lastEventId="+encodeURIComponent(l));var o={Accept:"text/event-stream"};if(void 0!=h)for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(o[i]=h[i]);try{v.open(y,z,Y,K,n,s,o)}catch(t){throw X(),t}}else p||void 0==m?(p=!1,b=r(function(){t()},c)):(O(new Error("No activity within "+c+" milliseconds. Reconnecting.")),m(),m=void 0)};t.url=e,t.readyState=T,t.withCredentials=s,t._close=X,Q()}(this,t,e)}var B=void 0!=u&&void 0!=c&&"body"in c.prototype;G.prototype=Object.create(C.prototype),G.prototype.CONNECTING=T,G.prototype.OPEN=j,G.prototype.CLOSED=x,G.prototype.close=function(){this._close()},G.CONNECTING=T,G.OPEN=j,G.CLOSED=x,G.prototype.withCredentials=void 0,t.exports=G},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(797),i=function(t){function e(){var e=t.call(this)||this;return o.change(function(t,r){"visible"!==r?"hidden"===r&&e.emit("visible",!1):e.emit("visible",!0)}),e}return n(e,t),e}(r(512).Base);e.Visible=i},function(t,e,r){t.exports=r(798)},function(t,e,r){!function(e){var n=-1,o=function(t){return t.every=function(e,r,o){t._time(),o||(o=r,r=null);var i=n+=1;return t._timers[i]={visible:e,hidden:r,callback:o},t._run(i,!1),t.isSupported()&&t._listen(),i},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change(function(){t._stopRun(),t._wasHidden=t.hidden()}))},t._run=function(r,n){var o,i=t._timers[r];if(t.hidden()){if(null===i.hidden)return;o=i.hidden}else o=i.visible;var a=function(){i.last=new Date,i.callback.call(e)};if(n){var s=new Date-i.last;o>s?i.delay=setTimeout(function(){i.id=setInterval(a,o),a()},o-s):(i.id=setInterval(a,o),a())}else i.id=setInterval(a,o)},t._stop=function(e){var r=t._timers[e];clearInterval(r.id),clearTimeout(r.delay),delete r.id,delete r.delay},t._stopRun=function(e){var r=t.hidden(),n=t._wasHidden;if(r&&!n||!r&&n)for(var o in t._timers)t._stop(o),t._run(o,!r)},t};void 0!==t&&t.exports?t.exports=o(r(681)):o(e.Visibility||r(681))}(window)},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(513),i=r(209),a=o("collab:saveStatus"),s=r(295),u=r(555),c=r(555);e.Status=c.Status;var l=function(t){function e(e){var r=t.call(this)||this;return r.events={CHANGE:"change"},r.beforeSendRequestTime=0,r.timeoutThreshold=e.timeoutThreshold,r.online=e.online||!0,r.status=r.online?u.Status.ONLINE:u.Status.OFFLINE,setTimeout(function(){r.status===u.Status.OFFLINE&&r.emitChange(r.status)},0),r}return n(e,t),e.prototype.onEvent=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];switch(a.apply(void 0,["receive event",t].concat(r)),t){case s.Event.ACCEPT:this.online=!0,this.beforeSendRequestTime=0,clearTimeout(this.saveTimeout),this.online||this.emitChange(u.Status.ONLINE),this.emitChange(u.Status.ONLINE_SAVED);break;case s.Event.ERROR:case s.Event.ACCEPT_FAILED:this.emitChange(u.Status.ONLINE_SAVE_FAILED);break;case s.Event.NEW_CHANGE:this.online?this.emitChange(u.Status.ONLINE_SAVING):this.emitChange(u.Status.OFFLINE_SAVING);break;case s.Event.NEW_CHANGE_SAVE_TO_STORAGE_FAILED:this.online||this.emitChange(u.Status.OFFLINE_SAVE_FAILED);break;case s.Event.NEW_CHANGE_SAVED_TO_STORAGE:this.online||this.emitChange(u.Status.OFFLINE_SAVED);break;case s.Event.BEFORE_SEND_REQUEST:if(this.beforeSendRequestTime)return;this.beforeSendRequestTime=Date.now(),clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(function(){e.online=!1,e.emitChange(u.Status.OFFLINE)},this.timeoutThreshold);break;case s.Event.SERVER_CHANGE_APPLIED:this.online=!0,this.emitChange(u.Status.SERVER_CHANGE_APPLIED);break;case s.Event.WAITING_FOR_CAN_HANDLE_SERVER_CHANGES:clearTimeout(this.saveTimeout);break;case s.Event.NETWORK_CHANGE:var o=r[0];o!==this.online&&(this.online=o,this.emitChange(o?u.Status.ONLINE:u.Status.OFFLINE))}},e.prototype.destroy=function(){clearTimeout(this.saveTimeout)},e.prototype.emitChange=function(t){a("saveStatus changed to",t),this.status=t,this.emit(this.events.CHANGE,t)},e.events={CHANGE:"change"},e}(i.EventEmitter);e.SaveStatus=l},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(683),s=r(513),u=r(295),c=r(682),l=s("collab:sender"),f=function(t){function e(e){var r=t.call(this,{offlineTimeoutInMS:2.5*(e.retryInterval||5e3)})||this;return r.retryInterval=5e3,r.url=e.url,r.clientId=e.clientId,r.tracker=e.tracker,r.shared=e.shared,e.retryInterval&&(r.retryInterval=e.retryInterval),r}return n(e,t),e.prototype.start=function(){var t=this;this.tracker.setUserChangeNotificationCallback(function(){return o(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.compose()];case 1:return t.sent(),[2]}})})})},e.prototype.stop=function(){this.tracker.setUserChangeNotificationCallback(u.noop)},e.prototype.destroy=function(){this.stop(),this.superDestroy()},e.prototype.compose=function(){return o(this,void 0,void 0,function(){var t,e,r;return i(this,function(n){switch(n.label){case 0:return t=this.shared.rev,[4,this.tracker.prepareUserChangeset()];case 1:return e=n.sent(),l("send compose request",this.clientId,this.shared.rev,e),e?(r={changeset:e.changeset,clientId:this.clientId,rev:t,uuid:e.uuid},[4,this.sendRequest(r)]):[2];case 2:return n.sent(),[2]}})})},e.prototype.sendRequest=function(t,e){return void 0===e&&(e=!1),o(this,void 0,void 0,function(){var e,r,n,o=this;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.emit(u.Event.BEFORE_SEND_REQUEST),[4,a.default({data:t,method:"post",url:this.url})];case 1:return i.sent(),this.emit(u.Event.SEND_REQUEST_DONE),this.updateNetworkStatus(!0),[3,3];case 2:return e=i.sent(),l("send request error",e.response),r=e.response,this.updateNetworkStatus(Boolean(r)),"4"===String(r&&r.status)[0]?(n=new u.CollaborationError("Sender request error",u.ERROR.ERR_SENDER,e),this.emit(u.Event.ACCEPT_FAILED,n),this.emit(u.Event.ERROR,n),[2]):(this.emit(u.Event.SEND_REQUEST_FAILED),setTimeout(function(){o.sendRequest(t,!0)},this.retryInterval),[3,3]);case 3:return[2]}})})},e}(c.NetworkDetectable);e.Sender=f},function(t,e,r){"use strict";var n=r(228),o=r(684),i=r(803),a=r(556);function s(t){var e=new i(t),r=o(i.prototype.request,e);return n.extend(r,i.prototype,e),n.extend(r,e),r}var u=s(a);u.Axios=i,u.create=function(t){return s(n.merge(a,t))},u.Cancel=r(688),u.CancelToken=r(817),u.isCancel=r(687),u.all=function(t){return Promise.all(t)},u.spread=r(818),t.exports=u,t.exports.default=u},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";var n=r(556),o=r(228),i=r(812),a=r(813);function s(t){this.defaults=t,this.interceptors={request:new i,response:new i}}s.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},o.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,r){return this.request(o.merge(r||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,r,n){return this.request(o.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=s},function(t,e,r){"use strict";var n=r(228);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},function(t,e,r){"use strict";var n=r(686);t.exports=function(t,e,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t}},function(t,e,r){"use strict";var n=r(228);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var a=[];n.forEach(e,function(t,e){null!==t&&void 0!==t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),i=a.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,r){"use strict";var n=r(228),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,a={};return t?(n.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}}),a):a}},function(t,e,r){"use strict";var n=r(228);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=o(window.location.href),function(e){var r=n.isString(e)?o(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,r,i=String(t),a="",s=0,u=n;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if((r=i.charCodeAt(s+=.75))>255)throw new o;e=e<<8|r}return a}},function(t,e,r){"use strict";var n=r(228);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(228);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,r){"use strict";var n=r(228),o=r(814),i=r(687),a=r(556),s=r(815),u=r(816);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,r){"use strict";var n=r(228);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(688);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(820),s=r(512),u=r(295),c="modoc",l=function(t){function e(e){var r=t.call(this)||this;if(r.type=c,r.changeCallback=u.noop,r.isWaitingForReadyToHandleChange=!1,r.onReadyToHandleChanges=function(){r.isWaitingForReadyToHandleChange&&(r.isWaitingForReadyToHandleChange=!1,r.emit("readyToHandleChanges"))},r.onChange=function(t){return o(r,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return"string"==typeof t&&(t=this.adaptor.unpack(t)),this.userChange.delta=this.userChange.delta.compose(t),this.emit(u.Event.NEW_CHANGE),[4,this.saveData(u.Event.NEW_CHANGE_SAVED_TO_STORAGE,u.Event.NEW_CHANGE_SAVE_TO_STORAGE_FAILED)];case 1:return e.sent(),this.committingChange.delta.length||!this.userChange.delta.length?[3,3]:[4,this.changeCallback()];case 2:e.sent(),e.label=3;case 3:return this.isWaitingForReadyToHandleChange&&this.onReadyToHandleChanges(),[2]}})})},r.editor=e.editor,r.editor.on("readyToHandleChanges",r.onReadyToHandleChanges),e.storage&&(r.storage=e.storage),e.type&&(r.type=e.type.toLowerCase()),r.adaptor=e.adaptors?e.adaptors[r.type]:a.adaptors[r.type],!r.adaptor)throw new Error("options.type must be modoc or richdoc");var n=e.committingChange&&e.committingChange.uuid,s=e.committingChange?r.adaptor.unpack(e.committingChange.delta):r.adaptor.empty(),l=e.userChange&&e.userChange.uuid,f=e.userChange?r.adaptor.unpack(e.userChange.delta):r.adaptor.empty();if(0===s.length&&f.length>0){var p=s;s=f,f=p;var h=n;n=l,l=h}r.committingChange={delta:s,uuid:n||u.uuid()},r.userChange={delta:f,uuid:l||u.uuid()};var d=r.editor.constructor;return r.editor.on(d.events.CHANGE,r.onChange),r}return n(e,t),e.prototype.prepareUserChangeset=function(){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.committingChange.delta.length>0?[2,{changeset:this.adaptor.pack(this.committingChange.delta),uuid:this.committingChange.uuid}]:(this.committingChange=this.userChange,this.userChange={delta:this.adaptor.empty(),uuid:u.uuid()},[4,this.saveData()]);case 1:return t.sent(),0===this.committingChange.delta.length?[2,null]:[2,{changeset:this.adaptor.pack(this.committingChange.delta),uuid:this.committingChange.uuid}]}})})},e.prototype.canHandleChangesRightNow=function(){if(!this.editor.canHandleChanges)return!0;var t=this.editor.canHandleChanges();return t||(this.isWaitingForReadyToHandleChange=!0),t},e.prototype.applyPreparedChangesetToBase=function(){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.committingChange.delta.length?(this.committingChange={delta:this.adaptor.empty(),uuid:u.uuid()},this.emit(u.Event.ACCEPT),[4,this.changeCallback()]):(this.emit(u.Event.WARNING,"No submitted changes to apply"),[2]);case 1:return t.sent(),[2]}})})},e.prototype.applyChangesToBase=function(t){return o(this,void 0,void 0,function(){var e,r,n,o,a,s,c,l,f,p,h;return i(this,function(i){switch(i.label){case 0:if(0===t.length)return[2];for(r=0,n=t;r<n.length;r++)p=n[r],o=this.adaptor.unpack(p.changeset),a=o.transform(this.committingChange.delta,!1),s=this.committingChange.delta.transform(o,!0).transform(this.userChange.delta,!0),c=this.userChange.delta.transform(this.committingChange.delta.transform(o,!0)),e=e?e.compose(c):c,this.emit(u.Event.SERVER_CHANGE_PROCESSED,{change:c}),this.committingChange.delta=a,this.userChange.delta=s;return[4,this.saveData()];case 1:for(i.sent(),l=0,f=t;l<f.length;l++)p=f[l],this.emit(u.Event.SERVER_CHANGE_APPLIED,p);i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.editor.applyChange(e)];case 3:return i.sent(),[3,5];case 4:return h=i.sent(),this.emit(u.Event.ERROR,new u.CollaborationError("Apply change to editor error",u.ERROR.ERR_APPLY_CHANGE,h)),[3,5];case 5:return[2]}})})},e.prototype.setUserChangeNotificationCallback=function(t){this.changeCallback=t,this.changeCallback()},e.prototype.destroy=function(){var t=this.editor.constructor;this.editor.off(t.events.CHANGE,this.onChange),this.editor.off("readyToHandleChanges",this.onReadyToHandleChanges)},e.prototype.getData=function(){return{committingChange:{delta:this.adaptor.pack(this.committingChange.delta),uuid:this.committingChange.uuid},userChange:{delta:this.adaptor.pack(this.userChange.delta),uuid:this.userChange.uuid}}},e.prototype.saveData=function(t,e){return o(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:if(!this.storage)return[3,4];r=this.getData(),n=this.storage.set(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(r)];case 2:return i.sent(),t&&this.emit(t),[3,4];case 3:return o=i.sent(),this.emit(u.Event.ERROR,new u.CollaborationError("Save data to storage error",u.ERROR.ERR_STORAGE_SET,o)),e&&this.emit(e),[3,4];case 4:return[2]}})})},e}(s.Base);e.Tracker=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(821),o=r(833);e.adaptors={modoc:n,richdoc:o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(689);e.empty=function(){return new n.Delta([])},e.pack=function(t){return t.stringify()},e.unpack=function(t){return n.Delta.isDelta(t)?t:new n.Delta(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(514),o=r(691),i=r(557),a=r(558),s=r(825),u=r(694),c=function(){function t(t,e){if(this[i.TYPE_PROPERTY]="Delta",Array.isArray(t)){var r=new n.default;o.default.isPool(e)&&0!==t.length||(e=new o.default);for(var s=0,u=t;s<u.length;s++){var c=u[s],l="remove"===c.action?"":e.packAttributes(c.attributes);r.push(new a.default({action:c.action,data:c.data,pool:e,packedAttributes:l}))}this.ops=r.stringify(!0),this.pool=e}else if(void 0===e){var f=t.indexOf(":");if(f<=0)throw new Error("Invalid delta: "+t);var p=parseInt(t.substring(0,f),36),h=f+1+p;this.ops=t.substring(f+1,h),this.pool=0===p||t.length===h?new o.default:new o.default(t.substring(f+p+1))}else this.ops=t,this.pool=""===t?new o.default:e}return t.prototype.isEmpty=function(){return 0===this.ops.length},t.prototype.getIter=function(t){var e=void 0===t?{}:t,r=e.targetPool,n=e.sourcePool;return new s.default(this.ops,n||this.pool,r||this.pool,a.default)},Object.defineProperty(t.prototype,"length",{get:function(){for(var t=this.getIter(),e=0;t.hasNext();)e+=t.peekLength(),t.skip();return e},enumerable:!0,configurable:!0}),t.prototype.getPoolCopy=function(){return this.pool.clone()},t.prototype.map=function(e){for(var r=[],n=this.getIter();n.hasNext();)r.push(e(n.next()));return new t(r)},t.prototype.compose=function(e,r){var o=this.getPoolCopy(),i=new n.default([]),a=this.getIter({sourcePool:o,targetPool:o});Array.isArray(e)&&(e=new t(e,o));for(var s=e.getIter({targetPool:o});;){var u=a.hasNext(),c=s.hasNext();if(!u&&!c)break;if(!c)return new t(a.remainingStrs(i),o);if(!u&&s.isPoolCompatible())return new t(s.remainingStrs(i),o);if("insert"===s.peekAction())i.push(s.next());else if("remove"===a.peekAction())i.push(a.next());else{var l=Math.min(a.peekLength(),s.peekLength()),f=u?a.next(l):null,p=s.next(l);"retain"===p.action?i.push(f?f.compose(p,void 0===r?"insert"===f.action:r):p):f&&"retain"!==f.action||i.push(p)}}return new t(i.stringify(!0),o)},t.prototype.transform=function(e,r){void 0===r&&(r=!1),Array.isArray(e)&&(e=new t(e));for(var o=e.getPoolCopy(),i=new n.default,s=this.getIter(),u=e.getIter({sourcePool:o,targetPool:o});u.hasNext();){if(!s.hasNext())return new t(u.remainingStrs(i),o);if("insert"!==s.peekAction()||!r&&"insert"===u.peekAction())if("insert"===u.peekAction())i.push(u.next());else{var c=Math.min(s.peekLength(),u.peekLength()),l=s.next(c),f=u.next(c);if("remove"===l.action)continue;"remove"===f.action?i.push(f):i.push(l.transform(f,r))}else i.push(new a.default({action:"retain",data:s.peekLength()})),s.skip()}return new t(i.stringify(!0),o)},t.prototype.invert=function(e,r){for(var i=new o.default,s=new n.default,u=this.getIter({targetPool:i}),c=(Array.isArray(e)?new t(e,new o.default):e).getIter({targetPool:i});c.hasNext();)if("insert"===c.peekAction())s.push(new a.default({action:"remove",data:c.peekLength()})),c.skip();else{if(!u.hasNext())throw new Error("Delta should be smaller than document");if("insert"!==u.peekAction())throw new Error("Only document can invert deltas");var l=Math.min(u.peekLength(),c.peekLength()),f=c.next(l),p=u.next(l);"remove"===f.action?s.push(p):s.push(r?r(p,f):p.invert(f))}return new t(s.stringify(!0),i)},t.prototype.stringify=function(){return this.isEmpty()?"0:":this.ops.length.toString(36)+":"+this.ops+this.pool.stringify()},t.prototype.toJSON=function(){for(var t=[],e=this.getIter();e.hasNext();)t.push(e.next().toJSON());return t},t.prototype.explain=function(t){void 0===t&&(t="");for(var e=t+"Delta #"+this.ops.length+":\n",r=this.getIter();r.hasNext();)e+=r.next().explain(t+"  ");return""+e+t+"Pool: "+this.pool.stringify()+"\n"},t.prototype.validateTable=function(){for(var t={},e=this.getIter();e.hasNext();){var r=e.next();if("table"===r.dataType){var n=r.getAttributes().name;if("string"!=typeof n)continue;var o="$$"+n+"$$";if(t.hasOwnProperty(o))throw new Error("Duplicated table name found: "+n);t[o]=!0}}return this},t.isDelta=u.isDelta,t}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keyToGul={color:"0",background:"1","font-size":"2",width:"3",height:"4",rowspan:"5",colspan:"6",align:"7",bold:"8",italic:"9",underline:"a",vertical:"b",strike:"c",wrap:"d",fixedRowsTop:"e",fixedColumnsLeft:"f",link:"g",format:"h",formula:"i",filter:"j","border-top":"k","border-right":"l","border-bottom":"m","border-left":"n",line:"o",guid:"p",author:"q",size:"r",list:"s",layout:"t",margin:"u",font:"v",header:"w",indent:"x",comment:"y","comment-block":"z","code-block":"A",name:"B",order:"C",autoFit:"D",userID:"E",nextIndex:"F",id:"G",colVisible:"H",rowVisible:"I",autoFormatter:"J",copyIndex:"K",manualAlign:"L",lock:"M",left:"N",top:"O"};var n=["color","background","font-size","width","height","rowspan","colspan","align","bold","italic","underline","vertical","strike","wrap","fixedRowsTop","fixedColumnsLeft","link","format","formula","filter","border-top","border-right","border-bottom","border-left","line","guid","author","size","list","layout","margin","font","header","indent","comment","comment-block","code-block","name","order","autoFit","userID","nextIndex","id","colVisible","rowVisible","autoFormatter","copyIndex","manualAlign","lock","left","top"];function o(t){var e,r=t.charCodeAt(0);if(r>=48&&r<=57)e=n[r-48];else if(r>=65&&r<=90)e=n[r-29];else{if(!(r>=97&&r<=122))throw new Error('Unknown gul "'+t+'"');e=n[r-87]}return e}function i(t){var r=e.keyToGul[t];if(r)return r;var n=t.length.toString(36),o=n.length;if(o>2)throw new Error("Key length of attribute should <= 2: "+n);return""+(1===o?"$":"%")+n+t}e.getAttributeKeyByGul=o,e.getGulByAttributeKey=i,e.combinedAttributeWithValue=function(t,e){var r=i(t);return"string"==typeof e?r+":"+e:"number"==typeof e?r+"*"+e.toString():"boolean"==typeof e?r+(e?"1":"0"):r},e.keyValueToGul={81:"!","2*12":'"',"2*11":"#","2*10":"$","2*9":"%","2*8":"&","6*2":"'","6*3":"(","6*4":")","5*2":"*","5*3":"+","5*4":",","0:#ff0000":"-","0:#ffffff":".","b:bottom":"/","h:normal":"0",1:"1","1:#ffffff":"2","1:#ff0000":"3","1:#ffff00":"4","1:#00ffff":"5","7:left":"6","7:center":"7","7:right":"8","1*4":"9","d:text-wrap":":","d:text-no-wrap":";","h:YYYY/MM/DD":"<",'l:["",1]':"=",'n:["",1]':">",'k:["",1]':"?",'m:["",1]':"@",'l:["#2b2b2b",1]':"A",'n:["#2b2b2b",1]':"B",'k:["#2b2b2b",1]':"C",'m:["#2b2b2b",1]':"D"};var a=[["bold",!0],["font-size",12],["font-size",11],["font-size",10],["font-size",9],["font-size",8],["colspan",2],["colspan",3],["colspan",4],["rowspan",2],["rowspan",3],["rowspan",4],["color","#ff0000"],["color","#ffffff"],["vertical","bottom"],["format","normal"],["background",null],["background","#ffffff"],["background","#ff0000"],["background","#ffff00"],["background","#00ffff"],["align","left"],["align","center"],["align","right"],["background",4],["wrap","text-wrap"],["wrap","text-no-wrap"],["format","YYYY/MM/DD"],["border-right",'["",1]'],["border-left",'["",1]'],["border-top",'["",1]'],["border-bottom",'["",1]'],["border-right",'["#2b2b2b",1]'],["border-left",'["#2b2b2b",1]'],["border-top",'["#2b2b2b",1]'],["border-bottom",'["#2b2b2b",1]']];e.getGulByCombinedKeyValue=function(t){return e.keyValueToGul.hasOwnProperty(t)?e.keyValueToGul[t]:null},e.getKeyValueByGul=function(t){var e=t.charCodeAt(0)-33;return a[e]},e.parseCombinedAttributeValue=function(t){var e;if("$"===t[0]){var r=parseInt(t[1],36);e=t.substring(2,2+r),t=t.substring(1+r)}else"%"===t[0]?(r=parseInt(t[1]+t[2],36),e=t.substring(3,3+r),t=t.substring(2+r)):e=o(t[0]);if(1===t.length)return[e,null];var n=t[1];if("1"===n)return[e,!0];if("0"===n)return[e,!1];var i=t.substring(2);return[e,":"===n?i:Number(i)]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objectToKeyPaths=function t(e,r,n){void 0===n&&(n=[]);for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o],s=e[a],u=r+"."+a;"object"==typeof s&&null!==s?t(s,u,n):n.push([u,s])}return n},e.keyPathToObject=function(t,e,r){for(var n=e.split("."),o=n.length,i=1;i<o-1;i++){var a=n[i],s=t[a];t="object"==typeof s&&null!==s?s:t[a]={}}t[n[o-1]]=r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(692),o=r(514),i=function(){function t(t,e,r,n){this.ops=t,this.pool=e,this.targetPool=r,this.operatorConstructor=n,this.cursor=0,this.offset=0}return t.prototype.isPoolCompatible=function(){return void 0===this.isCompatible&&(this.isCompatible=this.pool.isSubsetOf(this.targetPool)),this.isCompatible},t.prototype.hasNext=function(){return this.cursor<this.ops.length},t.prototype.remainingStrs=function(t){for(;this.hasNext();){var e=this.next();if(t.push(e)!==o.PushResult.REORDERED){var r=this.cursor;return this.cursor=this.ops.length,this.nextData=void 0,t.stringify()+this.ops.substring(r)}}return t.stringify(!0)},t.prototype.skip=function(t){void 0===t&&(t=1/0);var e=this.peekNext();if(null===e)throw new Error("No more operators");var r,n=this.offset;return t+n>=e.dataLength?(r=e.dataLength-n,this.nextData=void 0,this.cursor=e.opIndex+e.opLength,this.offset=0):(r=t,this.offset+=r),[r,n,e]},t.prototype.next=function(t,e){void 0===t&&(t=1/0);var r,o=this.skip(t),i=o[0],a=o[1],s=o[2];switch(s.dataType){case"number":r=i;break;case"string":r=this.ops.substring(s.dataIndex+1+a,s.dataIndex+1+a+i);break;default:var u=this.ops[s.dataIndex+1+a],c=this.ops.substring(s.dataIndex+1+1,s.dataIndex+1+s.actualLength);(f={})[n.initialToObjectKey[u]]=c,r=f}var l,f,p=this.ops.substring(s.dataIndex+1+s.actualLength,s.opIndex+s.opLength),h=this.targetPool,d=""!==p&&!this.isPoolCompatible();return 0!==a||i!==s.dataLength||d||(l=this.ops.substring(s.opIndex,s.dataIndex+1+s.actualLength)),d&&(p=h.packAttributes(this.pool.unpackAttributes(p))),new this.operatorConstructor({action:e||s.action,data:r,packedAttributes:p,pool:h},l)},t.prototype.peekAction=function(){var t=this.peekNext();return null===t?"retain":t.action},t.prototype.peekLength=function(){var t=this.peekNext();return null===t?1/0:t.dataLength-this.offset},t.prototype.peekNext=function(){if(!this.hasNext())return null;if(void 0===this.nextData){var t=void 0,e=void 0;e=this.cursor+1;for(var r=this.ops.length;e<r;){switch(this.ops[e]){case"!":t="insert";break;case"@":t="retain";break;case"#":t="remove"}if(void 0!==t)break;e+=1}var n=e,o=parseInt(this.ops.substring(this.cursor,n),36);e=n+1;for(var i=void 0;e<r;){switch(this.ops[e]){case"!":i="string";break;case"#":i="number";break;case"@":i="object"}if(void 0!==i)break;e+=1}var a=e,s=parseInt(this.ops.substring(n+1,a),36),u="number"===i?0:s,c="object"===i?1:s;this.nextData={action:t,dataIndex:a,dataLength:c,opIndex:n,opLength:o,dataType:i,actualLength:u}}return this.nextData},t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(827),o=r(829),i=r(830),a=r(831),s=r(832),u=r(696);e.registerDataHandlers=function(t,e,r){var c=function(t,e){return function(r){return new r(t,e)}}(e,r);t.registerDataHandler("delta",c(o.default)),t.registerDataHandler("table",c(n.default)),t.registerDataHandler("presentation",c(a.default)),t.registerDataHandler("slide",c(i.default)),t.registerDataHandler("mindmap",c(i.default)),t.registerDataHandler("object",c(s.default)),t.registerDataHandler("form",c(u.default))}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(695),i=r(828),a=r(455),s=r(689),u=r(514),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.pack=function(t){var e=t.rows,r=t.cols,n=o.possibleDeltaInputToString(this.deltaConstructor,e),i=o.possibleDeltaInputToString(this.deltaConstructor,r);return n.length.toString(36)+"$"+n+i},e.prototype.toJSON=function(t){var e=this.parse(t),r=e[0],n=e[1];return{rows:null===r?null:r.toJSON(),cols:null===n?null:n.toJSON()}},e.prototype.explain=function(t,e){var r=t+"Rows:\n",n=this.parse(e),o=n[0],i=n[1];return r+=null===o?"[EMPTY]":o.explain(t),r+=t+"Cols:\n",r+=null===i?"[EMPTY]":i.explain(t)},e.prototype.parse=function(t){var e=t.indexOf("$"),r=parseInt(t.substring(0,e),36),n=e+1+r;return[0===r?null:new this.deltaConstructor(t.substring(e+1,n)),t.length===n?null:new this.deltaConstructor(t.substring(n))]},e.prototype.compose=function(t,e,r){var n=this.parse(t),o=n[0],a=n[1],s=this.parse(e),u=s[0],c=s[1],l=null===u?o:null===o?u:o.compose(u,r),f=i.reindexInnerDeltas(a,u),p=null===c?f:null===f?c:f.compose(c,r);return this.pack({rows:l,cols:p})},e.prototype.transform=function(t,e,r){var n=this.parse(t),o=n[0],a=n[1],s=this.parse(e),u=s[0],c=s[1],l=null===o||null===u?u:o.transform(u,r),f=null===o||null===u?o:u.transform(o,!r),p=i.reindexInnerDeltas(a,l),h=i.reindexInnerDeltas(c,f),d=null===p||null===h?h:p.transform(h,r);return this.pack({rows:l,cols:d})},e.prototype.invert=function(t,e){var r=this,n=this.parse(t),o=n[0],a=n[1],c=this.parse(e),l=c[0],f=c[1],p=l&&(null===o?new this.deltaConstructor([]):o).invert(l),h=i.invertInnerDeltas(a,l);if(null!==f){if(null===a)throw new Error("Invert a table without cols");if(h){var d=i.DeltaToIndexModifiers(f);h=i.reindexDelta(h,d)}var y=i.reindexInnerDeltas(f,p);if(null===y)throw new Error("ASSERT: targetCols === null");var v=a.invert(y,function(t,e){if("delta"!==e.dataType)return t.invert(e);for(var n=new s.Pool,o=new u.default([]),i="number"===t.dataType?null:new r.deltaConstructor(t.getCustomData()).getIter({targetPool:n}),a=new r.deltaConstructor(e.getCustomData()).getIter({targetPool:n});a.hasNext();){var c=void 0,l=void 0;if(null!==i&&i.hasNext()){var f=Math.min(i.peekLength(),a.peekLength());c=i.next(f,"insert"),l=a.next(f)}else{var p=a.peekLength();c=new r.operatorConstructor({action:"insert",data:p}),l=a.next()}o.push(c.invert(l))}return t.invert(e,{delta:new r.deltaConstructor(o.stringify(!0),n).stringify()})});h=h?h.compose(v):v}return this.pack({rows:p,cols:h})},e}(a.default);e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(514),o=r(690),i=r(558);function a(t){for(var e=[],r=-1,n=t.getIter();n.hasNext();){var o=n.next(),i=o.action,a=o.length;-1!==r&&e[r][0]===i?e[r][1]+=a:e[++r]=[i,a]}return e}function s(t,e){for(var r=t.getPoolCopy(),a=new n.default([]),s=t.getIter({sourcePool:r,targetPool:r}),u=new Array(e.length),c=0;c<e.length&&s.hasNext();c++){var l=u[c]||e[c],f=l[0],p=l[1];switch(f){case"insert":a.push(new i.default({action:"retain",data:p,packedAttributes:"",pool:r}));break;case"retain":(h=s.peekLength())>=p?a.push(s.next(p)):(a.push(s.next()),u[c]=["retain",p-h],c-=1);break;case"remove":var h;(h=s.peekLength())>=p?s.skip(p):(s.skip(),u[c]=["remove",p-h],c-=1)}}for(;s.hasNext();)a.push(s.next());return new o.Delta(a.stringify(!0),r)}e.DeltaToIndexModifiers=a,e.reindexDelta=s,e.reindexInnerDeltas=function(t,e){if(null===t||null===e)return t;var r=a(e);return 0===r.length?t:t.map(function(t){var e={action:t.action,data:t.data};if("remove"!==e.action&&t.hasAttributes()&&(e.attributes=t.getAttributes()),"delta"===t.dataType){var n=s(new o.Delta(t.getCustomData()),r);e.data=n.isEmpty()?1:{delta:n.stringify()}}else e.data=t.data;return e})},e.invertInnerDeltas=function(t,e){if(null===t||null===e)return null;for(var r=a(e),s=!1,u=0,c=r;u<c.length;u++)if("remove"===c[u][0]){s=!0;break}return s?t.map(function(t){var e={action:"retain",data:t.data};if(t.hasAttributes()&&(e.attributes=t.getAttributes()),"delta"===t.dataType){var a=function(t,e){for(var r=t.getPoolCopy(),a=new n.default([]),s=t.getIter({sourcePool:r,targetPool:r}),u=new Array(e.length),c=0;c<e.length&&s.hasNext();c++){var l=u[c]||e[c],f=l[0],p=l[1];switch(f){case"retain":var h=s.peekLength(),d=Math.min(p,h);a.push(new i.default({action:"retain",data:d,packedAttributes:"",pool:r})),s.skip(d),h<p&&(u[c]=["retain",p-h],c-=1);break;case"remove":(h=s.peekLength())>=p?a.push(s.next(p)):(a.push(s.next()),u[c]=["remove",p-h],c-=1)}}for(var y=0;s.hasNext();)y+=s.peekLength(),s.skip();return y>0&&a.push(new i.default({action:"retain",data:y,packedAttributes:"",pool:r})),new o.Delta(a.stringify(!0),r)}(new o.Delta(t.getCustomData()),r);e.data=a.isEmpty()?1:{delta:a.stringify()}}else e.data=t.data;return e}):null}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(455),i=r(694),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.compose=function(t,e,r){return this.parse(t).compose(this.parse(e),r).stringify()},e.prototype.transform=function(t,e,r){return this.parse(t).transform(this.parse(e),r).stringify()},e.prototype.invert=function(t,e){return this.parse(t).invert(this.parse(e)).stringify()},e.prototype.parse=function(t){return new this.deltaConstructor(t)},e.prototype.pack=function(t){if(Array.isArray(t))return new this.deltaConstructor(t).stringify();if(i.isDelta(t))return t.stringify();throw new Error("Unsupported delta value for packing "+t)},e.prototype.toJSON=function(t){return this.parse(t).toJSON()},e.prototype.explain=function(t,e){return this.parse(e).explain(t)},e}(o.default);e.default=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.compose=function(t,e,r){for(var n=this.parse(t),o=this.parse(e),i=0,a=Object.keys(o);i<a.length;i++){var s=a[i],u=n[s],c=o[s];n[s]=void 0===u?c:u.compose(c,r)}return this.pack(n)},e.prototype.transform=function(t,e,r){for(var n=this.parse(t),o=this.parse(e),i=0,a=Object.keys(o);i<a.length;i++){var s=a[i],u=n[s];if(void 0!==u){var c=o[s];o[s]=u.transform(c,r)}}return this.pack(o)},e.prototype.invert=function(t,e){for(var r=this.parse(t),n=this.parse(e),o=0,i=Object.keys(n);o<i.length;o++){var a=i[o],s=r[a]||new this.deltaConstructor([]);n[a]=s.invert(n[a])}return this.pack(n)},e.prototype.parse=function(t){for(var e={},r=0;r<t.length;){var n=t.substring(r,r+8),o=t.indexOf("#",r+8),i=parseInt(t.substring(r+8,o),36),a=new this.deltaConstructor(t.substring(o+1,o+1+i));e[n]=a,r=o+1+i}return e},e.prototype.pack=function(t){for(var e="",r=0,n=Object.keys(t).sort();r<n.length;r++){var o=n[r];if(8!==o.length)throw new Error("element id length must equal to 8, got "+o);var i=t[o],a=Array.isArray(i)?new this.deltaConstructor(i):i;if(a.getIter().hasNext()){var s=a.stringify();e+=""+o+s.length.toString(36)+"#"+s}}return e},e.prototype.toJSON=function(t){for(var e={},r=this.parse(t),n=0,o=Object.keys(r);n<o.length;n++){var i=o[n],a=r[i];e[i]=a.toJSON()}return e},e.prototype.explain=function(t,e){for(var r=t+"Elements:\n",n=this.parse(e),o=0,i=Object.keys(n);o<i.length;o++){r+=n[i[o]].explain(t)}return r},e}(r(455).default);e.default=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.pack=function(e){return t.prototype.pack.call(this,Array.isArray(e)?e:[e.slides,e.layouts,e.notes])},e.prototype.toJSON=function(e){var r=t.prototype.toJSON.call(this,e);return{slides:r[0],layouts:r[1],notes:r[2]}},e.prototype.explain=function(t,e){var r=t+"Slides:\n",n=this.parse(e),o=n[0],i=n[1],a=n[2];return r+=o?o.explain(t):"[EMPTY]",r+=t+"Layouts:\n",r+=i?i.explain(t):"[EMPTY]",r+=t+"Notes:\n",r+=a?a.explain(t):"[EMPTY]"},e}(r(696).default);e.default=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(455),i=r(693),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.compose=function(t,e,r){return this.pack(i.merge(this.parse(t),this.parse(e),!r),r)},e.prototype.transform=function(t,e,r){return this.pack(i.transform(this.parse(t),this.parse(e),r),!1)},e.prototype.invert=function(t,e){return this.pack(i.invert(this.parse(t),this.parse(e)),!1)},e.prototype.parse=function(t){return JSON.parse(t)},e.prototype.pack=function(t,e){return e?JSON.stringify(t,function(t,e){return null===e?void 0:e}):JSON.stringify(t)},e.prototype.toJSON=function(t){return this.parse(t)},e.prototype.explain=function(t,e){return JSON.stringify(this.parse(e),null,t)},e}(o.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(834);e.empty=function(){return new n.Delta},e.pack=function(t){return n.pack(t)},e.unpack=function(t){return function(t,e){return t instanceof e}(t,n.Delta)?t:n.unpack(t)}},function(t,e,r){"use strict";var n=r(312),o=r(345);e.Attribute=r(515),e.Delta=r(516);var i={TableOperator:r(835),CellOperator:r(697),TextOperator:r(837),Operator:r(517)};n(e,i),e.pack=function(t){if("function"==typeof t.toJSON)return JSON.stringify(t);throw new Error("Only delta can be packed")},e.unpack=function(t){return e.Delta.unpack(JSON.parse(t))},e.print=function(t){t.print(!0)};var a=o(Object.keys(i),function(t,e){var r=i[e];return t[r.packId]=r,t},{});function s(t){var e=t[0].toString(),r=e[e.length-1];return a[e.slice(0,e.length-1)].unpack([r,t[1],t[2]])}e.Delta.operatorUnpacker=s,Object.keys(i).forEach(function(t){i[t].operatorUnpacker=s});var u=r(434);e.parsePosition=u.parsePosition,e.stringifyPosition=u.stringifyPosition},function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=r(517),u=r(516),c=r(434),l=r(836),f=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),o(e,[{key:"freeze",value:function(){c.freeze(this.data),c.freeze(this.data.rows),c.freeze(this.data.cols)}},{key:"name",value:function(){return"TableOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return{table:this.data}}},{key:"skipDiff",value:function(){return!0}},{key:"_genericSet",value:function(t){var r=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_genericSet",this).call(this,t),n=r.changed,o=r.op;if("object"==typeof o.data){if(o.data.rows||(o.data.rows=new u),o.data.cols||(o.data.cols=new u),o.data.cells||(o.data.cells={}),"function"!=typeof o.data.cells.name&&(o.data.cells=new l({action:o.action,cells:o.data.cells})),"function"!=typeof o.data.rows.pack)throw new Error("rows should be a Delta");if("function"!=typeof o.data.cols.pack)throw new Error("cols should be a Delta");"retain"===o.action&&o.data.rows.isEmpty()&&o.data.cols.isEmpty()&&!Object.keys(o.data.cells).length&&(o.data=1)}if("insert"===o.action){if(!o.data.rows.isDocument())throw new Error("rows should be a document");if(!o.data.cols.isDocument())throw new Error("cols should be a document")}return{changed:n,op:o}}},{key:"pack",value:function(){var t=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pack",this).call(this);if("object"==typeof t[1]){var r=t[1],n=r.cells,o=r.rows,a=r.cols;if(t[1]=[n.pack()],o.isEmpty()&&a.isEmpty())return t;a.isEmpty()?t[1].push(o.pack()):(t[1].push(o.isEmpty()?0:o.pack()),t[1].push(a.pack()))}return t}},{key:"compose",value:function(t){var r=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"compose",this).call(this,t);if("number"==typeof this.data||"number"==typeof t.data)return r;var n={rows:r.data.rows.compose(t.data.rows),cols:r.data.cols.compose(t.data.cols)},o=new l({cells:r.data.cells,action:r.action});return o.composeWithMutations(t.data),t.data.cells.forEach(function(e){var r=o.get(e),n=t.data.cells.get(e);o.set(e,r.compose(n))}),n.cells=o,r.set({data:n})}},{key:"invert",value:function(t){var r=this,n=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"invert",this).call(this,t);if("number"==typeof this.data||"number"==typeof t.data)return n;var o={rows:this.data.rows.invert(t.data.rows),cols:this.data.cols.invert(t.data.cols)},a=new l({cells:t.data.cells,action:n.action});a.composeWithMutations(o,function(e,n){try{return r.data.cells.get(n).invert(e)}catch(e){throw new Error(e.message+": "+t.getAttributes().id+", "+n)}});var s=t.data.rows.isEmpty(),u=t.data.cols.isEmpty();return s&&u||this.data.cells.forEach(function(e){var n=c.parsePosition(e),o=n.row,i=n.col;null!==t.data.rows.composePosition(o)&&null!==t.data.cols.composePosition(i)||a.set(e,r.data.cells.get(e))}),o.cells=a,n.set({data:o})}},{key:"transform",value:function(t,r){var n=this,o=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"transform",this).call(this,t,r);if("number"==typeof this.data||"number"==typeof t.data)return o;var a={rows:o.data.rows.transform(this.data.rows,!r),cols:o.data.cols.transform(this.data.cols,!r)},s={rows:this.data.rows.transform(t.data.rows,r),cols:this.data.cols.transform(t.data.cols,r)},u=new l({cells:t.data.cells,action:o.action});u.composeWithMutations(a);var f=t.data.rows.isEmpty(),p=t.data.cols.isEmpty();return this.data.cells.forEach(function(t){var e=c.parsePosition(t),o=e.row,i=e.col;if(f||(o=s.rows.composePosition(o)),p||(i=s.cols.composePosition(i)),null!==o&&null!==i){var a=c.stringifyPosition(o,i);u.set(a,n.data.cells.get(t).transform(u.get(a),r))}}),s.cells=u,o.set({data:s})}}],[{key:"unpack",value:function(t){if(Array.isArray(t[1])){var r=n(t[1],3),o=r[0],a=r[1],s=r[2];t[1]={rows:a?u.unpack(a):null,cols:s?u.unpack(s):null,cells:o}}return i(e.__proto__||Object.getPrototypeOf(e),"unpack",this).call(this,t)}}]),e}();f.packId=3,t.exports=f},function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(697),i=r(516),a=r(434),s=r(363),u=function(){function t(e){var r=e.cells,n=e.action;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cells={},"function"==typeof r.name)for(var o in this.proto=r.proto,r.cells)r.cells.hasOwnProperty(o)&&(this.cells[o]=r.cells[o]);else this.proto=r;this.action=n}return n(t,[{key:"name",value:function(){return"CellManager"}},{key:"keys",value:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=void 0;return(n=void 0===this.cells[t]?this.proto[t]:this.cells[t])?(e&&Array.isArray(n)&&(n=this.cells[t]=o.operatorUnpacker(n)),n.action&&n.action!==this.action&&(n=this.cells[t]=n.set({action:this.action}))):n=r?null:new o({action:this.action,data:"insert"===this.action?new i:1}),n}},{key:"forEach",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var r in this.cells)!this.cells.hasOwnProperty(r)||e&&null===this.cells[r]||t(r);for(var n in this.proto)this.proto.hasOwnProperty(n)&&!this.cells.hasOwnProperty(n)&&null!==this.proto[n]&&t(n)}},{key:"set",value:function(t,e){this.cells[t]=e||null}},{key:"composeWithMutations",value:function(t,e){var r=this,n=t.rows,o=t.cols,i=n.isEmpty(),s=o.isEmpty();if(!i||!s||e){var u={},c={row:{},col:{}};this.forEach(function(t){var l=a.parsePosition(t),f=l.row,p=l.col;if(i||(void 0===c.row[f]&&(c.row[f]=n.composePosition(f)),f=c.row[f]),s||(void 0===c.col[p]&&(c.col[p]=o.composePosition(p)),p=c.col[p]),u[t]||(u[t]=null),null!==f&&null!==p){var h=a.stringifyPosition(f,p),d=r.get(t,!0,!e);u[h]=e?e(d,h):d}},!1),this.cells=u}}},{key:"pack",value:function(){var t=this,e={};return this.forEach(function(r){var n=t.get(r,!1);Array.isArray(n)?e[r]=n:(n.attributes||n.data.isEmpty&&!n.data.isEmpty())&&(e[r]=n.pack())}),s(e)?0:e}}]),t}();t.exports=u},function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var i=r(517),a=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),n(e,[{key:"name",value:function(){return"TextOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return this.data}},{key:"setData",value:function(t){switch(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.action){case"insert":if("string"!=typeof this.data&&"object"!=typeof this.data)throw new Error('data should be a string or an object for "insert" action, got '+this.data);break;case"retain":if("number"!=typeof this.data)throw new Error('data should be a number for "'+this.action+'" action, got '+this.data)}return this}}]),e}();a.packId=2,t.exports=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(683),a=r(513),s=r(209),u=r(680),c=r(295),l=a("collab:collaborator"),f=function(t){function e(e){var r=t.call(this)||this;return r.users=[],r.clients={},r.clientId=e.clientId,r.onUserSelect=c.debounce(r._onUserSelect.bind(r),1e3,!1),r.puller=e.puller,r.editor=e.editor,r.puller.on(c.Event.COLLABORATOR,function(t){l("get data from puller",t),t.forEach(function(t){var e=t.type,n=t.data;e===c.Event.LEAVE?r.onLeave(n):e===c.Event.ENTER?r.onEnter(n):e===c.Event.SELECT&&r.onSelect(n)})}),r.editor&&(r.url=r.assembleUrl(e.url,e.clientId),r.editor.on("userSelect",r.onUserSelect)),r}return n(e,t),e.prototype.destroy=function(){this.editor.off("userSelect",this.onUserSelect)},e.prototype.findUser=function(t){return this.users.find(function(e){return t===e.user.id})},e.prototype.onEnter=function(t){if(l("user enter",t),this.clients[t.clientId])l("client",t.clientId,"already here");else{this.clients[t.clientId]={user:t.user};var e=this.findUser(t.user.id);if(e)e.clients.push({clientId:t.clientId});else{var r={clients:[{clientId:t.clientId}],user:t.user};this.users.push(r),this.emit(c.Event.ENTER,{user:t.user}),this.editor&&this.editor.onUserEnter&&this.editor.onUserEnter({collaborators:[],enterUsers:[o({},t.user,{color:this.getColor(t.user.id)})]})}}},e.prototype.onLeave=function(t){l("user leave",t);var e=this.clients[t.clientId];if(e){var r=e.user.id;delete this.clients[t.clientId];var n=this.findUser(r);if(n){var i=n.clients.findIndex(function(e){return e.clientId===t.clientId});if(i>-1&&n.clients.splice(i,1),0===n.clients.length){l("clientId",t.clientId,"onUserLeave",e);var a=this.users.findIndex(function(t){return t.user.id===n.user.id});a>-1&&this.users.splice(a,1),this.emit(c.Event.LEAVE,{user:n.user})}(0===n.clients.length||1===n.clients.length&&n.user.isMe)&&this.editor&&this.editor.onUserLeave&&this.editor.onUserLeave({collaborators:[],leaveUsers:[o({},n.user,{color:this.getColor(n.user.id)})]})}else l("no such user",r)}else l("no such client",t.clientId)},e.prototype.onSelect=function(t){var e=t.clientId,r=t.user,n=t.select;if(l("on user select",e,r,n),this.clients[e]){if(e!==this.clientId){this.clients[e].select=n;var i=this.findUser(r.id);if(i){var a=i.clients.find(function(t){return t.clientId===e});a&&(a.select=n);var s=o({userInfo:o({},i.user,{color:this.getColor(i.user.id)})},n);this.editor&&this.editor.onUserSelect&&this.editor.onUserSelect(s)}}}else l("no such client",e)},e.prototype.getColor=function(t){return c.colors[t%c.colors.length]},e.prototype.assembleUrl=function(t,e){var r=t.split("?"),n=r[0],o=r[1],i=u.parse(o);return i.clientId=e,n+"?"+u.stringify(i)},e.prototype._onUserSelect=function(t){var e=this;return i.default({data:t,method:"post",url:this.url}).catch(function(t){e.emit(c.Event.WARNING,t)})},e.events={ENTER:"enter",LEAVE:"leave",SELECT:"select"},e}(s.EventEmitter);e.Collaborator=f}])});
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("react"),require("prop-types"),require("react-dom"),require("axios"));else if("function"==typeof define&&define.amd)define(["lodash","react","prop-types","react-dom","axios"],t);else{var n="object"==typeof exports?t(require("lodash"),require("react"),require("prop-types"),require("react-dom"),require("axios")):t(e.shimo.sdk.common._,e.shimo.sdk.common.React,e.shimo.sdk.common.PropTypes,e.shimo.sdk.common.ReactDOM,e.shimo.sdk.common.Axios);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(e,t,r,i,o){return function(e){function t(t){for(var r,s,a=t[0],u=t[1],l=t[2],d=0,f=[];d<a.length;d++)s=a[d],i[s]&&f.push(i[s][0]),i[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={10:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.shimoWebpackJsonp=window.shimoWebpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=u;return o.push([1660,0]),n()}({10:function(e,t){e.exports=r},12:function(e,t){e.exports=i},1660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(1661))&&r.__esModule?r:{default:r};(0,n(77).setScope)("document.plugins.Uploader",i.default);var o=i.default;t.default=o,e.exports=t.default},1661:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=n(0),s=p(n(1662)),a=n(13),u=p(n(5)),l=p(n(18)),c=p(n(47)),d=n(1669),f=n(1670);function p(e){return e&&e.__esModule?e:{default:e}}var h={image:!0,attachment:!0,audio:!1},m=c.default.name&&"safari"===c.default.name.toLowerCase(),g=function(){function e(e){var t=(0,o.__assign)((0,o.__assign)({},h),e),n=t.editor,r=t.image,i=t.attachment,a=t.audio,u=(0,o.__rest)(t,["editor","image","attachment","audio"]);this.options={image:r,attachment:i,audio:a},this.editor=n,this.Quill=n.constructor,this.uploader=this.editor.uploader=new s.default(u),this.filesCache={},this.register(),this.init()}return e.prototype.on=function(e,t,n){this.uploader.on(e,t,n)},e.prototype.off=function(e,t,n,r){this.uploader.off(e,t,n,r)},e.prototype.destroy=function(){this.uploader.destroy(),this.editor.container.removeEventListener("click",this.onCancleClick.bind(this)),this.editor.container.removeEventListener("click",this.onAttachmentClick.bind(this)),this.editor.getModule("toolbar").hideToolbar(["local-image","attachment"]),delete this.editor.uploader},e.prototype.onStart=function(e){var t=this,n=(this.editor.getSelection()||this.editor.selection.savedRange||{}).index,o=void 0===n?this.editor.getLength()-1:n,s={},u=this.uploader.isImage(e),l=u?r.blotName:i.blotName;"block"!==this.uploader.options.layout||o||(this.editor.insertText(o,"\n",this.Quill.sources.USER),o+=1),e.startUploadTime=Date.now(),this.filesCache[e.id]=e,s.id=e.id,s.showBar=e.isFake,!u&&this.detectAudio(e)&&(s.type=e.type),this.editor.history.ignore(function(){t.editor.insertEmbed(o,l,s,t.Quill.sources.USER)});var c={index:o+1,length:0},d=this.editor.container.querySelector("#"+e.id);(d.style.display="inline-block",this.editor.setSelection(c,this.Quill.sources.SILENT),d.style.display=null,u)?(e.isFake?Promise.resolve(e):this.uploader.getImageInfo(e)).then(function(e){var n=t.editor.find(d);n&&["src","height","width"].forEach(function(t){n.format(t,e[t])})}).catch(function(t){throw new Error("add file placeholder: "+e.name+" failed: "+t.toString())}):e.size>1e7&&(0,a.oldTrack)(this.editor,"用户上传大于10M的附件的总次数")},e.prototype.onProgress=function(e,t){var n=this,r=this.getBlotByFile(e);r&&this.editor.history.ignore(function(){r.format("progress",Math.ceil(t)),n.editor.scroll.optimize()})},e.prototype.onSuccess=function(e,t){var n=this,r=this.getBlotByFile(e);if(!r)return new Error("file uploaded, but getBlotByFile failed!");var i=this.uploader.isImage(e),o=i?"gallery":"attachment",a=this.uploader.options.layout||"inline",l=i?{width:t.data.width,height:t.data.height,src:t.data.images,layout:"inline"===a?"embed":a}:{name:e.name,size:e.size,url:t.data.images};if(t.data.audio&&this.detectAudio(e)&&(l.type="audio",l.duration=t.data.audio.duration,l.transcoded=t.data.audio.trasncoded,this.editor.emitter.emit(this.Quill.events.TRACK,"doc_insert_media",{insertmedia_sort:"local_audio",insertmedia_success:"成功",insertmedia_value:l.url})),"gallery"===o){var c=new Image;c.onload=function(){delete n.filesCache[e.id],n.replacePlaceholder(r,o,l),n.uploader.emit(s.default.events.LOAD_SUCCESS,e,"图片加载成功")},c.onerror=function(){n.uploader.emit(s.default.events.FAIL,e,(0,u.default)("获取图片地址失败，请尝试压缩图片或者稍后再试"))},c.src=l.src,this._trackSuccess("图片上传",e)}else delete this.filesCache[e.id],this.replacePlaceholder(r,o,l),this._trackSuccess("附件上传",e)},e.prototype.onError=function(e){var t=this.getBlotByFile(e);t&&t.format("status","fail"),this.uploader.isImage(e)?(0,a.oldTrack)(this.editor,"用户上传图片失败的次数"):(0,a.oldTrack)(this.editor,"用户上传附件失败的次数")},e.prototype.register=function(){var e=this.options,t=e.image,n=e.attachment,o=e.audio;this.Parchment=this.editor.import("parchment"),r=(0,f.getImageClass)(this.editor.import("blots/embed")),i=(0,f.getAttachmentClass)(this.editor.import("blots/block/embed")),t&&this.editor.register("formats/placeholder/image",r),(n||o)&&this.editor.register("formats/placeholder/attachment",i),this.initToolbar()},e.prototype.initToolbar=function(){var e=this,t=this.options,n=t.image,r=t.attachment,i=t.audio,o=this.editor.getModule("toolbar");if(o){var s={};n&&(s["local-image"]=null),r&&(s.attachment=function(){var t;(t=e.editor.getSelection()||e.editor.selection.savedRange)&&t.length&&e.editor.deleteText(t.index,t.length,e.Quill.sources.USER),e.uploader.uploadAttachment()}),i&&(s["local-media"]=null,s.externalmedia=null),o.activeToolbar(s)}},e.prototype.init=function(){var e=this,t=this.uploader;t.on(s.default.events.START,function(t){for(var n=0,r=t;n<r.length;n++){var i=r[n];e.onStart(i)}}),t.on(s.default.events.PROCESS,this.onProgress.bind(this)),t.on(s.default.events.SUCCESS,this.onSuccess.bind(this)),t.on(s.default.events.FAIL,this.onError.bind(this)),this.editor.container.addEventListener("click",this.onCancleClick.bind(this)),this.editor.container.addEventListener("click",this.onAttachmentClick.bind(this)),t.on(s.default.events.DROP,function(n){if(n.dataTransfer){for(var r=n.dataTransfer.files,i=0,o=r;i<o.length;i++){var s=o[i];t.isAudio(s)&&(s.from="audio")}[].forEach.call(r,function(t){var n="拖拽文件上传图片的次数";e.uploader.isImage(t)||(n="拖拽文件上传附件的次数",t.size>1e7&&(0,a.oldTrack)(e.editor,"用户通过拖入来上传大于10M的附件的次数")),(0,a.oldTrack)(e.editor,n),e.editor.emitter.emit(e.Quill.events.DRAG_UPLOAD,n)})}}),t.on(s.default.events.FAIL,function(e,t){"object"==typeof t&&"string"==typeof t.error&&(t.error.indexOf("token")>-1?a.toast.error((0,u.default)("图片上传失败，请重新上传")):a.toast.error(t.error))})},e.prototype.onCancel=function(e){var t=this,n=this.filesCache[e];if(n){this.uploader.cancel(n),delete this.filesCache[e];var r=this.getBlotByFile(n);r&&this.editor.history.ignore(function(){var e=t.editor.getIndex(r);t.editor.deleteText(e,1,t.Quill.sources.USER),m&&t.editor.setSelection(e,0,"silent")})}},e.prototype.onCancleClick=function(e){var t=this;if(e.target instanceof HTMLElement&&e.target.classList.contains("upload-cancel-btn")){e.stopPropagation(),e.preventDefault();var n=e.target.dataset.fileId;if(n)this.onCancel(n);else{var r=this.Parchment.find(e.target,!0);r&&this.editor.history.ignore(function(){t.editor.deleteText(t.editor.getIndex(r),1,t.Quill.sources.USER)})}}},e.prototype.onAttachmentClick=function(e){if(e.target instanceof HTMLElement&&e.target.classList.contains("attachment-download-link")){e.preventDefault();var t=e.target.getAttribute("download"),n=e.target.getAttribute("href"),r=this.editor.options.readOnly;if(!n)return;!l.default.any&&r?window.open(n):this.editor.emitter.emit(this.Quill.events.ATTACHMENT_CLICK,{url:n,name:t})}else if(l.default.any){var i=e.target.closest(".ql-blot-attachment");if(i){var o=i.getAttribute("data-name");n=i.getAttribute("data-url");if(!o||!n)return;this.editor.emitter.emit(this.Quill.events.ATTACHMENT_CLICK,{url:n,name:o}),this.editor.options.isClient&&e.preventDefault()}}},e.prototype.replacePlaceholder=function(e,t,n){var r=this,i=this.editor.getSelection(),o=this.editor.getIndex(e);if(this.editor.history.ignore(function(){r.editor.deleteText(o,1,r.Quill.sources.USER)}),"gallery"===t?(n.layout=n.layout||"embed",n.fromUpload=!0,this.editor.getModule("galleryManager").init(o,n)):(this.editor.format("align","center",this.Quill.sources.USER),this.editor.insertEmbed(o,t,n,this.Quill.sources.USER)),"\n"===this.editor.getText(o,1)&&(o+=1),"gallery"===t&&"embed"===n.layout||"attachment"===t){var s={"line-inline":(0,a.genGuid)(4)};this.editor.formatText(o,1,s,this.Quill.sources.USER)}else{s={line:(0,a.genGuid)(4),align:"center"};this.editor.formatLine(o,1,s,this.Quill.sources.USER)}"attachment"===t?(this.editor.insertText(o+1,"\n",this.Quill.sources.USER),this.editor.formatLine(o+2,1,"align",!1,this.Quill.sources.USER),this.editor.setSelection(o+2,this.Quill.sources.SILENT)):this.editor.setSelection(i,this.Quill.sources.SILENT)},e.prototype.getBlotByFile=function(e){var t=this.editor.import("parchment"),n=this.editor.container.querySelector("#"+e.id),o=t.find(n);return o instanceof i||o instanceof r?o:null},e.prototype.detectAudio=function(e){return"audio"===e.from&&this.uploader.isAudio(e)},e.prototype._trackSuccess=function(e,t){var n=!0;e.indexOf("失败")>-1&&(n=!1),(0,a.oldTrack)(this.editor,e,n,{fileSize:(t.size/1e3).toFixed(2)+"KB",fileType:t.type,fileName:t.name,uploadTime:((Date.now()-t.startUploadTime)/1e3).toFixed(1)+"s"})},e.version=d.version,e.events=s.default.events,e}();t.default=g,e.exports=t.default},1662:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),i=m(n(1663)),o=m(n(5)),s=m(n(45)),a=m(n(155)),u=m(n(18)),l=n(2),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(1665)),d=n(1666),f=n(1667),p=m(n(1668));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function m(e){return e&&e.__esModule?e:{default:e}}i.default.autoDiscover=!1;var g=["image/png","image/gif","image/jpeg","image/jpg","image/bmp"];var v=function(e){function t(t){var n=e.call(this)||this;if(n.accessToken="",!t||"object"!=typeof t)throw new Error("params error, options: object needed");n.options=t;var o=t.type,s=void 0===o?"default":o,a=t.container,u=void 0===a?"body":a,c=t.direct,d=void 0===c||c,h=t.url,m=t.tokenUrl,g=t.accessToken,v=(0,r.__rest)(t,["type","container","direct","url","tokenUrl","accessToken"]);if(n.direct=d,"string"==typeof u){if(!u)throw new Error("params error, options.container invalid selector");var y=document.querySelector(u);if(!y)throw new Error("params error, options.container invalid selector");n.container=y}else{if("object"!=typeof u)throw new Error("params error, options.container invalid");if(!(u instanceof HTMLElement))throw new Error("params error, options.container invalid Element Object");n.container=u}n.type=s,g&&(n.accessToken=g,v.headers=(0,l.assign)({},v.headers,{Authorization:"Bearer "+g}));var b=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},f.DefaultSettings),{url:h}),v),{autoQueue:"qiniu"===s||"default"===s||d});if("qiniu"===s){if(!g&&!m)throw new Error("params error, accessToken or tokenUrl needed");b=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},b),f.QiniuSettings),{url:f.ServerSettings.SERVER_URL})}return n.prepareContainerOptions(),n.dropzone=new i.default(n.container,b),n.dropzone.on("addedfile",function(e){var t;e.id||(e.id="sm-uploader-"+(t=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)})))}),"default"===s||d?n.initDefault():n.initCustom(),n.initToken(),n.on(p.default.FAIL,function(e,t){"object"==typeof t&&"string"==typeof t.error&&t.error.indexOf("token")>-1&&n.updateToken()}),n}return(0,r.__extends)(t,e),t.prototype.destroy=function(){this.dropzone&&(this.dropzone.destroy(),this.removeDzContainer(),delete this.dropzone)},t.prototype.updateToken=function(e){void 0===e&&(e=""),this.accessToken=e,this.initToken()},t.prototype.uploadImage=function(e){void 0===e&&(e={});var t=e.multiple,n=void 0===t||t,r=g.join(",");u.default.any&&navigator.userAgent.match(/huawei.*micromessenger/gi)&&(r="image/*"),this.uploadStart(r,n),this.dropzone.once("selectedfiles",function(e){for(var t=0,n=e;t<n.length;t++){n[t].from="image"}})},t.prototype.uploadAttachment=function(e){void 0===e&&(e={});var t=e.multiple,n=void 0===t||t;this.uploadStart("*",n),this.dropzone.once("selectedfiles",function(e){for(var t=0,n=e;t<n.length;t++){n[t].from="attachment"}})},t.prototype.uploadAudio=function(e){void 0===e&&(e={});var t=e.multiple,n=void 0===t||t;this.uploadStart("audio/*, audio/ac3",n),this.dropzone.once("selectedfiles",function(e){for(var t=0,n=e;t<n.length;t++){n[t].from="audio"}})},t.prototype.getImageInfo=function(e){var t="string"==typeof e?this.getFileById(e):e;if(!t)return Promise.reject(new Error("invalid file value"));return this.isImage(t)?new Promise(function(e,n){var i=new FileReader;try{i.addEventListener("load",function(){var n=new Image;n.addEventListener("load",function(){e((0,r.__assign)((0,r.__assign)({},t),{src:i.result,width:n.width+"px",height:n.height+"px"}))});var o=i.result;"string"==typeof o&&(n.src=o)}),i.readAsDataURL(t)}catch(e){n(new Error("reader read image failed"))}setTimeout(function(){n(new Error("getFileInfo timeout!"))},3e3)}):Promise.reject(new Error("invalid file type"))},t.prototype.paste=function(e){this.dropzone.paste(e)},t.prototype.cancel=function(e){var n="string"==typeof e?this.getFileById(e):e;n&&("qiniu"===this.type?(n.subscription&&n.subscription.unsubscribe(),this.emit(t.events.CANCEL,n)):this.dropzone.cancelUpload(n))},t.prototype.process=function(e,t){var n=this,r="string"==typeof e?this.getFileById(e):e;if(r){this.on(p.default.PROCESS,function e(i,o){n.compareFile(r,i)&&("function"==typeof t&&t(o),100===o&&n.off(p.default.PROCESS,e))})}},t.prototype.success=function(e){var t=this,n="string"==typeof e?this.getFileById(e):e;return n||Promise.reject(new Error("file invalid")),new Promise(function(e){t.on(p.default.SUCCESS,function r(i,o){t.compareFile(n,i)&&(e(o),t.off(p.default.SUCCESS,r))})})},t.prototype.fail=function(e){var t=this,n="string"==typeof e?this.getFileById(e):e;return n||Promise.reject(new Error("file invalid")),new Promise(function(e){t.on(p.default.FAIL,function r(i,o){t.compareFile(n,i)&&(e(o),t.off(p.default.FAIL,r))})})},t.prototype.isImage=function(e){var t="string"==typeof e?this.getFileById(e):e;return-1!==g.indexOf(t.type)},t.prototype.isAudio=function(e){return("string"==typeof e?this.getFileById(e):e).type.startsWith("audio/")},t.prototype.initDefault=function(){var e=this,n={addedfiles:"START",canceled:"CANCEL",sending:"SENDING",uploadprogress:"PROCESS",success:"SUCCESS",error:"FAIL",drop:"DROP"};Object.keys(n).forEach(function(i){e.dropzone.on(i,function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=n[i];e.emit.apply(e,(0,r.__spreadArrays)([t.events[a]],o))})}),this.dropzone.on("processing",function(e){e.serverUrl&&(this.options.url=e.serverUrl)}),this.dropzone.on("sending",function(t,n,r){if(t.formData&&Object.keys(t.formData).forEach(function(e){r.append(e,t.formData[e])}),e.direct){var i=e.isImage(t)?"images":"attachments";r.append("type",i),e.type&&"default"!==e.type&&r.append("server",e.type)}})},t.prototype.initCustom=function(){var e=this;this.dropzone.on("addedfile",function(n){var i=e.dropzone.options,a=i.maxFilesize,u=i.dictFileTooBig;if(a&&1024*a*1024<n.size)e.emit(t.events.FAIL,n,u.replace("{{maxFilesize}}",a));else if("qiniu"!==e.type||b(n)){var l=e.isImage(n)?"images":"attachments",d={server:e.type,type:l,accessToken:e.accessToken};"audio"===n.from&&e.isAudio(n)&&(d.avTranscode="wav");var f="";!n.name&&n.type&&(f="images"===l?n.type.replace(/^image\//gi,"image."):n.type),s.default.post(e.options.url,[n.name||f||""],{params:d}).then(function(i){var s=i.data;if(s&&s.length){var a=s[0],u=a.serverUrl,l=(0,r.__rest)(a,["serverUrl"]);if("qiniu"===e.type){var d=c.upload(n,l.key,l.token);n.subscription=d.subscribe({next:function(r){var i=r.total.percent;e.emit(t.events.PROCESS,n,i)},error:function(r){e.emit(t.events.FAIL,n,r)},complete:function(r){e.emit(t.events.SUCCESS,n,r)}})}else n.serverUrl=u,n.formData=l,e.dropzone.enqueueFile(n)}else e.emit(t.events.FAIL,n,{error:(0,o.default)("服务异常！")})},function(r){var i=r.response,s=r.message,a={error:s};i&&i.data?a=i.data:"Network Error"===s&&(a.error=(0,o.default)("请检查网络！")),e.emit(t.events.FAIL,n,a)})}else e.emit(t.events.FAIL,n,"上传失败。暂不支持以 "+y.join("、")+" 为后缀的文件上传。")}),"qiniu"===this.type?(this.dropzone.on("addedfiles",function(n){e.emit(t.events.START,(0,r.__spreadArrays)(n).filter(b))}),this.dropzone.on("drop",function(n){e.emit(t.events.DROP,n)})):this.initDefault()},t.prototype.initToken=function(){var e=this;!this.accessToken&&this.options.tokenUrl&&s.default.post(this.options.tokenUrl).then(function(t){var n=t.data;n.code||(e.accessToken=n.data.accessToken)})},t.prototype.prepareContainerOptions=function(){var e=function(e,t,n){void 0===n&&(n="");var r=document.createElement("div");return r.setAttribute("class",t),r.innerText=n,e.appendChild(r),r};this.container.classList.add("dropzone");var t=e(this.container,"dz-container");e(t,"dz-hidden-input-container"),e(t,"dz-message")},t.prototype.removeDzContainer=function(){var e=this.container,t=e.querySelector(".dz-container");e.classList.remove("dropzone"),t&&t.remove()},t.prototype.uploadStart=function(e,t){void 0===t&&(t=!0);var n=this.container.querySelector("input.dz-hidden-input");if(!(n instanceof HTMLElement))throw new Error("can not find dz-hidden-file-input");n.setAttribute("accept",e),t?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),n.click()},t.prototype.compareFile=function(e,t){return e.id===t.id},t.prototype.getFileById=function(e){var t=null;return this.dropzone.files.forEach(function(n){n.id===e&&(t=n)}),t},t.version=d.version,t.events=p.default,t}(a.default);t.default=v;var y=["apk","ipa","xml"],b=function(e){return!y.includes(e.name.split(".").pop())};e.exports=t.default},1663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(155))&&r.__esModule?r:{default:r},o=n(1664);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){var t,n;function r(t,n){var i,o,a;if((i=e.call(this)||this).element=t,i.version=r.version,i.defaultOptions.previewTemplate=i.defaultOptions.previewTemplate.replace(/\n*/g,""),i.clickableElements=[],i.listeners=[],i.files=[],"string"==typeof i.element&&(i.element=document.querySelector(i.element)),!i.element||null==i.element.nodeType)throw new Error("Invalid dropzone element.");if(i.element.dropzone)throw new Error("Dropzone already attached.");r.instances.push(s(i)),i.element.dropzone=s(i);var u=null!=(a=r.optionsForElement(i.element))?a:{};if(i.options=r.extend({},i.defaultOptions,u,null!=n?n:{}),i.options.forceFallback||!r.isBrowserSupported())return i.options.fallback.call(s(i))||s(i);if(null==i.options.url&&(i.options.url=i.element.getAttribute("action")),!i.options.url)throw new Error("No URL provided.");if(i.options.acceptedFiles&&i.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(i.options.uploadMultiple&&i.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return i.options.acceptedMimeTypes&&(i.options.acceptedFiles=i.options.acceptedMimeTypes,delete i.options.acceptedMimeTypes),null!=i.options.renameFilename&&(i.options.renameFile=function(e){return i.options.renameFilename.call(s(i),e.name,e)}),i.options.method=i.options.method.toUpperCase(),(o=i.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),!1!==i.options.previewsContainer&&(i.options.previewsContainer?i.previewsContainer=r.getElement(i.options.previewsContainer,"previewsContainer"):i.previewsContainer=i.element),i.options.clickable&&(!0===i.options.clickable?i.clickableElements=[i.element]:i.clickableElements=r.getElements(i.options.clickable,"clickable")),i.init(),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.initClass=function(){this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className=this.element.className+" dz-browser-not-supported";for(var t=0,n=this.element.getElementsByTagName("div");t<n.length;t++){var i=n[t];if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}e||(e=r.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var o=e.getElementsByTagName("span")[0];return o&&(null!=o.textContent?o.textContent=this.options.dictFallbackMessage:null!=o.innerText&&(o.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,r){var i={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=i.srcWidth,n=i.srcHeight):null==t?t=n*o:null==n&&(n=t/o);var s=(t=Math.min(t,i.srcWidth))/(n=Math.min(n,i.srcHeight));if(i.srcWidth>t||i.srcHeight>n)if("crop"===r)o>s?(i.srcHeight=e.height,i.srcWidth=i.srcHeight*s):(i.srcWidth=e.width,i.srcHeight=i.srcWidth/s);else{if("contain"!==r)throw new Error("Unknown resizeMethod '"+r+"'");o>s?n=t/o:t=n*o}return i.srcX=(e.width-i.srcWidth)/2,i.srcY=(e.height-i.srcHeight)/2,i.trgWidth=t,i.trgHeight=n,i},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=r.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var n=0,i=e.previewElement.querySelectorAll("[data-dz-name]");n<i.length;n++){var o=i[n];o.textContent=e.name}for(var s=0,a=e.previewElement.querySelectorAll("[data-dz-size]");s<a.length;s++)(o=a[s]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=r.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var u=function(n){return n.preventDefault(),n.stopPropagation(),e.status===r.UPLOADING?r.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?r.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},l=0,c=e.previewElement.querySelectorAll("[data-dz-remove]");l<c.length;l++){c[l].addEventListener("click",u)}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var n=0,r=e.previewElement.querySelectorAll("[data-dz-thumbnail]");n<r.length;n++){var i=r[n];i.alt=e.name,i.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var n=0,r=e.previewElement.querySelectorAll("[data-dz-errormessage]");n<r.length;n++){r[n].textContent=t}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement)for(var r=0,i=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");r<i.length;r++){var o=i[r];"PROGRESS"===o.nodeName?o.value=t:o.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1},r.extend=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];for(var s in o){var a=o[s];e[s]=a}}return e};var i=r.prototype;return i.getAcceptedFiles=function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})},i.getRejectedFiles=function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})},i.getFilesWithStatus=function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})},i.getQueuedFiles=function(){return this.getFilesWithStatus(r.QUEUED)},i.getUploadingFiles=function(){return this.getFilesWithStatus(r.UPLOADING)},i.getAddedFiles=function(){return this.getFilesWithStatus(r.ADDED)},i.getActiveFiles=function(){return this.files.filter(function(e){return e.status===r.UPLOADING||e.status===r.QUEUED}).map(function(e){return e})},i.init=function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(r.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function t(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var n=e.hiddenFileInput.files;return e.handleFiles(n),t()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var t=0,n=this.events;t<n.length;t++){var i=n[t];this.on(i,this.options[i])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return o(t),e.emit("dragenter",t)},dragover:function(t){var n;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",o(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return o(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||r.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)},i.destroy=function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,r.instances.splice(r.instances.indexOf(this),1)},i.updateTotalUploadProgress=function(){var e,t=0,n=0;if(this.getActiveFiles().length){for(var r=0,i=this.getActiveFiles();r<i.length;r++){var o=i[r];t+=o.upload.bytesSent,n+=o.upload.total}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)},i._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},i._renameFile=function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)},i.getFallbackForm=function(){var e,t;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var i=r.createElement(n);return"FORM"!==this.element.tagName?(t=r.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i},i.getExistingFallback=function(){for(var e=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(/(^| )fallback($| )/.test(n.className))return n}},t=0,n=["div","form"];t<n.length;t++){var r,i=n[t];if(r=e(this.element.getElementsByTagName(i)))return r}},i.setupEventListeners=function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var r=e.events[n];t.push(e.element.addEventListener(n,r,!1))}return t}()})},i.removeEventListeners=function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var r=e.events[n];t.push(e.element.removeEventListener(n,r,!1))}return t}()})},i.disable=function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})},i.enable=function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},i.filesize=function(e){var t=0,n="b";if(e>0){for(var r=["tb","gb","mb","kb","b"],i=0;i<r.length;i++){var o=r[i];if(e>=Math.pow(this.options.filesizeBase,4-i)/10){t=e/Math.pow(this.options.filesizeBase,4-i),n=o;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[n]},i._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.drop=function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++){var r=e.dataTransfer.files[n];t.push(r)}this.handleFiles(t)}},i.paste=function(e){if(null!=(t=null!=e?e.clipboardData:void 0,n=function(e){return e.items},null!=t?n(t):void 0)){var t,n;this.emit("paste",e);for(var r=e.clipboardData,i=r.items,o=r.files,s=[],a=0;a<o.length;a++){var u=o[a];if(u.type&&s.push(u),2===o.length&&"image.png"===o[0].name&&"image.jpeg"===o[1].name)break}return s.length?this.handleFiles(s):i.length?this._addFilesFromItems(i):void 0}},i.handleFiles=function(e){if(e.length){this.emit("selectedfiles",e);for(var t=0;t<e.length;t++){var n=e[t];this.addFile(n)}this.emit("addedfiles",e)}return e},i._addFilesFromItems=function(e){var t=this;return function(){for(var n=[],r=0;r<e.length;r++){var i,o=e[r];null!=o.getAsFile&&(null!=o.kind&&"file"!==o.kind||(i=o.getAsFile())&&n.push(i))}return n.length&&t.handleFiles(n),n}()},i._addFilesFromDirectory=function(e,t){var n=this,r=e.createReader(),i=function(e){return t=console,n="log",r=function(t){return t.log(e)},null!=t&&"function"==typeof t[n]?r(t,n):void 0;var t,n,r};return function e(){return r.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++){var o=r[i];o.isFile?o.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,n.addFile(e)}):o.isDirectory&&n._addFilesFromDirectory(o,t+"/"+o.name)}e()}return null},i)}()},i.accept=function(e,t){return this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):r.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},i.addFile=function(e){var t=this;return e.upload={uuid:r.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=r.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()})},i.enqueueFiles=function(e){for(var t=0;t<e.length;t++){var n=e[t];this.enqueueFile(n)}return null},i.enqueueFile=function(e){var t=this;if(e.status!==r.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=r.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)},i._enqueueThumbnail=function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)},i._processThumbnailQueue=function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()})}},i.removeFile=function(e){if(e.status===r.UPLOADING&&this.cancelUpload(e),this.files=u(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},i.removeAllFiles=function(e){null==e&&(e=!1);for(var t=0,n=this.files.slice();t<n.length;t++){var i=n[t];(i.status!==r.UPLOADING||e)&&this.removeFile(i)}return null},i.resizeImage=function(e,t,n,i,o){var s=this;return this.createThumbnail(e,t,n,i,!1,function(t,n){if(null==n)return o(e);var i=s.options.resizeMimeType;null==i&&(i=e.type);var a=n.toDataURL(i,s.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(a=d.restore(e.dataURL,a)),o(r.dataURItoBlob(a))})},i.createThumbnail=function(e,t,n,r,i,o){var s=this,a=new FileReader;return a.onload=function(){if(e.dataURL=a.result,"image/svg+xml"!==e.type)return s.createThumbnailFromUrl(e,t,n,r,i,o);null!=o&&o(a.result)},a.readAsDataURL(e)},i.createThumbnailFromUrl=function(e,t,n,r,i,o,s){var a=this,u=document.createElement("img");return s&&(u.crossOrigin=s),u.onload=function(){var s=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&i&&(s=function(e){return EXIF.getData(u,function(){return e(EXIF.getTag(this,"Orientation"))})}),s(function(i){e.width=u.width,e.height=u.height;var s=a.options.resize.call(a,e,t,n,r),l=document.createElement("canvas"),d=l.getContext("2d");switch(l.width=s.trgWidth,l.height=s.trgHeight,i>4&&(l.width=s.trgHeight,l.height=s.trgWidth),i){case 2:d.translate(l.width,0),d.scale(-1,1);break;case 3:d.translate(l.width,l.height),d.rotate(Math.PI);break;case 4:d.translate(0,l.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-l.height);break;case 7:d.rotate(.5*Math.PI),d.translate(l.width,-l.height),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-l.width,0)}c(d,u,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);var f=l.toDataURL("image/png");if(null!=o)return o(f,l)})},null!=o&&(u.onerror=o),u.src=e.dataURL},i.processQueue=function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var r=this.getQueuedFiles();if(r.length>0){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,e-t));for(;n<e;){if(!r.length)return;this.processFile(r.shift()),n++}}}},i.processFile=function(e){return this.processFiles([e])},i.processFiles=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.processing=!0,n.status=r.UPLOADING,this.emit("processing",n)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},i._getFilesWithXhr=function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})},i.cancelUpload=function(e){if(e.status===r.UPLOADING){for(var t=this._getFilesWithXhr(e.xhr),n=0;n<t.length;n++){t[n].status=r.CANCELED}void 0!==e.xhr&&e.xhr.abort();for(var i=0;i<t.length;i++){var o=t[i];this.emit("canceled",o)}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==r.ADDED&&e.status!==r.QUEUED||(e.status=r.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},i.resolveOption=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(this,n)}return e},i.uploadFile=function(e){return this.uploadFiles([e])},i.uploadFiles=function(e){var t=this;this._transformFiles(e,function(n){if(e[0].upload.chunked){var i=e[0],o=n[0];i.upload.chunks=[];var s=function(){for(var n=0;void 0!==i.upload.chunks[n];)n++;if(!(n>=i.upload.totalChunkCount)){0;var s=n*t.options.chunkSize,a=Math.min(s+t.options.chunkSize,i.size),u={name:t._getParamName(0),data:o.webkitSlice?o.webkitSlice(s,a):o.slice(s,a),filename:i.upload.filename,chunkIndex:n};i.upload.chunks[n]={file:i,index:n,dataBlock:u,status:r.UPLOADING,progress:0,retries:0},t._uploadData(e,[u])}};if(i.upload.finishedChunkUpload=function(n){var o=!0;n.status=r.SUCCESS,n.dataBlock=null;for(var a=0;a<i.upload.totalChunkCount;a++){if(void 0===i.upload.chunks[a])return s();i.upload.chunks[a].status!==r.SUCCESS&&(o=!1)}o&&t.options.chunksUploaded(i,function(){t._finished(e,"",null)})},t.options.parallelChunkUploads)for(var a=0;a<i.upload.totalChunkCount;a++)s();else s()}else{for(var u=[],l=0;l<e.length;l++)u[l]={name:t._getParamName(l),data:n[l],filename:e[l].upload.filename};t._uploadData(e,u)}})},i._getChunk=function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]},i._uploadData=function(e,t){for(var n=this,i=new XMLHttpRequest,o=0;o<e.length;o++){e[o].xhr=i}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=i);var s=this.resolveOption(this.options.method,e),a=this.resolveOption(this.options.url,e);i.open(s,a,!0),i.timeout=this.resolveOption(this.options.timeout,e),i.withCredentials=!!this.options.withCredentials,i.onload=function(t){n._finishedUploading(e,i,t)},i.onerror=function(){n._handleUploadError(e,i)},(null!=i.upload?i.upload:i).onprogress=function(t){return n._updateFilesUploadProgress(e,i,t)};var u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var l in this.options.headers&&r.extend(u,this.options.headers),u){var c=u[l];c&&i.setRequestHeader(l,c)}var d=new FormData;if(this.options.params){var f=this.options.params;for(var p in"function"==typeof f&&(f=f.call(this,e,i,e[0].upload.chunked?this._getChunk(e[0],i):null)),f){var h=f[p];d.append(p,h)}}for(var m=0;m<e.length;m++){var g=e[m];this.emit("sending",g,i,d)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,i,d),this._addFormElementData(d);for(var v=0;v<t.length;v++){var y=t[v];d.append(y.name,y.data,y.filename)}this.submitRequest(i,d,e)},i._transformFiles=function(e,t){for(var n=this,r=[],i=0,o=function(o){n.options.transformFile.call(n,e[o],function(n){r[o]=n,++i===e.length&&t(r)})},s=0;s<e.length;s++)o(s)},i._addFormElementData=function(e){if("FORM"===this.element.tagName)for(var t=0,n=this.element.querySelectorAll("input, textarea, select, button");t<n.length;t++){var r=n[t],i=r.getAttribute("name"),o=r.getAttribute("type");if(o&&(o=o.toLowerCase()),null!=i)if("SELECT"===r.tagName&&r.hasAttribute("multiple"))for(var s=0,a=r.options;s<a.length;s++){var u=a[s];u.selected&&e.append(i,u.value)}else(!o||"checkbox"!==o&&"radio"!==o||r.checked)&&e.append(i,r.value)}},i._updateFilesUploadProgress=function(e,t,n){var r;if(void 0!==n){if(r=100*n.loaded/n.total,e[0].upload.chunked){var i=e[0],o=this._getChunk(i,t);o.progress=r,o.total=n.total,o.bytesSent=n.loaded;i.upload.progress=0,i.upload.total=0,i.upload.bytesSent=0;for(var s=0;s<i.upload.totalChunkCount;s++)void 0!==i.upload.chunks[s]&&void 0!==i.upload.chunks[s].progress&&(i.upload.progress+=i.upload.chunks[s].progress,i.upload.total+=i.upload.chunks[s].total,i.upload.bytesSent+=i.upload.chunks[s].bytesSent);i.upload.progress=i.upload.progress/i.upload.totalChunkCount}else for(var a=0;a<e.length;a++){var u=e[a];u.upload.progress=r,u.upload.total=n.total,u.upload.bytesSent=n.loaded}for(var l=0;l<e.length;l++){var c=e[l];this.emit("uploadprogress",c,c.upload.progress,c.upload.bytesSent)}}else{var d=!0;r=100;for(var f=0;f<e.length;f++){var p=e[f];100===p.upload.progress&&p.upload.bytesSent===p.upload.total||(d=!1),p.upload.progress=r,p.upload.bytesSent=p.upload.total}if(d)return;for(var h=0;h<e.length;h++){var m=e[h];this.emit("uploadprogress",m,r,m.upload.bytesSent)}}},i._finishedUploading=function(e,t,n){var i;if(e[0].status!==r.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}},i._handleUploadError=function(e,t,n){if(e[0].status!==r.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[i.dataBlock])}for(var o=0;o<e.length;o++){e[o];this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},i.submitRequest=function(e,t,n){e.send(t)},i._finished=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];o.status=r.SUCCESS,this.emit("success",o,t,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},i._errorProcessing=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];o.status=r.ERROR,this.emit("error",o,t,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},r.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},r}(i.default);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a,"version",o.version),a.initClass(),a.options={},a.optionsForElement=function(e){return e.getAttribute("id")?a.options[l(e.getAttribute("id"))]:void 0},a.instances=[],a.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},a.autoDiscover=!0,a.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){for(var n=[],r=0;r<t.length;r++){var i=t[r];/(^| )dropzone($| )/.test(i.className)?n.push(e.push(i)):n.push(void 0)}return n}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];!1!==a.optionsForElement(i)?t.push(new a(i)):t.push(void 0)}return t}()},a.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],a.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,n=a.blacklistedBrowsers;t<n.length;t++){n[t].test(navigator.userAgent)&&(e=!1)}else e=!1;else e=!1;return e},a.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),o=0,s=t.length,a=0<=s;a?o<=s:o>=s;a?o++:o--)i[o]=t.charCodeAt(o);return new Blob([r],{type:n})};var u=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},l=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};a.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},a.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},a.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},a.getElements=function(e,t){var n,r;if(e instanceof Array){r=[];try{for(var i=0;i<e.length;i++)n=e[i],r.push(this.getElement(n,t))}catch(e){r=null}}else if("string"==typeof e){r=[];for(var o=0,s=document.querySelectorAll(e);o<s.length;o++)n=s[o],r.push(n)}else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},a.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},a.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var n=e.type,r=n.replace(/\/.*$/,""),i=0,o=t;i<o.length;i++){var s=o[i];if("."===(s=s.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(s.toLowerCase(),e.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(r===s.replace(/\/.*$/,""))return!0}else if(n===s)return!0}return!1},a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success";var c=function(e,t,n,r,i,o,s,a,u,l){var c=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var r=n.getContext("2d");r.drawImage(e,0,0);for(var i=r.getImageData(1,0,1,t).data,o=0,s=t,a=t;a>o;)0===i[4*(a-1)+3]?s=a:o=a,a=s+o>>1;var u=a/t;return 0===u?1:u}(t);return e.drawImage(t,n,r,i,o,s,a,u,l/c)},d=function(){function e(){}return e.initClass=function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.encode64=function(e){for(var t="",n=void 0,r=void 0,i="",o=void 0,s=void 0,a=void 0,u="",l=0;o=(n=e[l++])>>2,s=(3&n)<<4|(r=e[l++])>>4,a=(15&r)<<2|(i=e[l++])>>6,u=63&i,isNaN(r)?a=u=64:isNaN(i)&&(u=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(u),n=r=i="",o=s=a=u="",l<e.length;);return t},e.restore=function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},e.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},e.getExifArray=function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]},e.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),o=r.slice(0,i),s=r.slice(i),a=o;return a=(a=a.concat(t)).concat(s)},e.slice2Segments=function(e){for(var t=0,n=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},e.decode64=function(e){var t=void 0,n=void 0,r="",i=void 0,o=void 0,s="",a=0,u=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(i=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&i)<<4|(o=this.KEY_STR.indexOf(e.charAt(a++)))>>2,r=(3&o)<<6|(s=this.KEY_STR.indexOf(e.charAt(a++))),u.push(t),64!==o&&u.push(n),64!==s&&u.push(r),t=n=r="",i=o=s="",a<e.length;);return u},e}();d.initClass();var f=a;t.default=f,e.exports=t.default},1664:function(e){e.exports={name:"@shimo/dropzone",version:"0.0.23",description:"dropzonejs 石墨私有包",main:"dist/index.js",typings:"index.d.ts",files:["dist","index.d.ts"],scripts:{prebuild:"rimraf dist",dev:"webpack --config ./webpack.config.js --env.dev",build:"webpack --config ./webpack.config.js --env.prod",prepublish:"npm run build"},author:"xuyongli@shimo.im",license:"ISC",dependencies:{eventemitter3:"^3.1.0"},publishConfig:{registry:"http://registry.npm.shimo.run"}}},1665:function(e,t,r){"use strict";"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=58)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(31)("wks"),i=n(22),o=n(0).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(0),i=n(1),o=n(19),s=n(6),a=n(9),u=function e(t,n,u){var l,c,d,f=t&e.F,p=t&e.G,h=t&e.S,m=t&e.P,g=t&e.B,v=t&e.W,y=p?i:i[n]||(i[n]={}),b=y.prototype,w=p?r:h?r[n]:(r[n]||{}).prototype;for(l in p&&(u=n),u)(c=!f&&w&&void 0!==w[l])&&a(y,l)||(d=c?w[l]:u[l],y[l]=p&&"function"!=typeof w[l]?u[l]:g&&c?o(d,r):v&&w[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[l]=d,t&e.R&&b&&!b[l]&&s(b,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(7),i=n(21);e.exports=n(4)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(3),i=n(43),o=n(29),s=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(47),i=n(27);e.exports=function(e){return r(i(e))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e+864e5;return(new Date).getTime()>t}function o(e){return(0,g.default)(e).filter(function(e){return e.startsWith("x:")}).map(function(t){return[t,e[t].toString()]})}function s(e){return"qiniu_js_sdk_upload_file_"+e.name+"_size_"+e.size}function a(e){try{return JSON.parse(localStorage.getItem(s(e)))||[]}catch(e){return window.console&&window.console.warn,[]}}function u(e){return{Authorization:"UpToken "+e}}function l(){return window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")}function c(e){return new p.default(function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){var n=e.target.result;t(n)},r.onerror=function(){n(new Error("fileReader 读取错误"))}})}function d(e,t){return new p.default(function(n,r){var i=l();i.open(t.method,e),t.onCreate&&t.onCreate(i),t.headers&&(0,g.default)(t.headers).forEach(function(e){return i.setRequestHeader(e,t.headers[e])}),i.upload.addEventListener("progress",function(e){e.lengthComputable&&t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),i.onreadystatechange=function(){var e=i.responseText;if(4===i.readyState){var t=i.getResponseHeader("x-reqId")||"";if(200!==i.status){var o="xhr request failed, code: "+i.status+";";return e&&(o=o+" response: "+e),void r({code:i.status,message:o,reqId:t,isRequestError:!0})}try{n({data:JSON.parse(e),reqId:t})}catch(e){r(e)}}},i.send(t.body)})}function f(){return"http:"===window.location.protocol?"http:":"https:"}t.__esModule=!0;var p=r(n(18)),h=r(n(34)),m=r(n(86)),g=r(n(36));t.isChunkExpired=i,t.getChunks=function(e,t){for(var n=[],r=Math.ceil(e.size/t),i=0;i<r;i++){var o=e.slice(t*i,i===r-1?e.size:t*(i+1));n.push(o)}return n},t.filterParams=o,t.sum=function(e){return e.reduce(function(e,t){return e+t},0)},t.setLocalFileInfo=function(e,t){try{localStorage.setItem(s(e),(0,m.default)(t))}catch(e){window.console&&window.console.warn}},t.removeLocalFileInfo=function(e){try{localStorage.removeItem(s(e))}catch(e){window.console&&window.console.warn}},t.getLocalFileInfo=a,t.getResumeUploadedSize=function(e){return a(e).filter(function(e){return e&&!i(e.time)}).reduce(function(e,t){return e+t.size},0)},t.createMkFileUrl=function(e,t,n,r){var i=e+"/mkfile/"+t.size;null!=n&&(i+="/key/"+(0,v.urlSafeBase64Encode)(n)),r.mimeType&&(i+="/mimeType/"+(0,v.urlSafeBase64Encode)(t.type));var s=r.fname;return s&&(i+="/fname/"+(0,v.urlSafeBase64Encode)(s)),r.params&&o(r.params).forEach(function(e){return i+="/"+encodeURIComponent(e[0])+"/"+(0,v.urlSafeBase64Encode)(e[1])}),i},t.getHeadersForChunkUpload=function(e){var t=u(e);return(0,h.default)({"content-type":"application/octet-stream"},t)},t.getHeadersForMkFile=function(e){var t=u(e);return(0,h.default)({"content-type":"text/plain"},t)},t.createXHR=l,t.computeMd5=function(e){return c(e).then(function(e){var t=new b.default.ArrayBuffer;return t.append(e),t.end()})},t.readAsArrayBuffer=c,t.request=d,t.getPortFromUrl=function(e){if(e&&e.match){var t=e.match(/(^https?)/);if(!t)return"";var n=t[1];return(t=e.match(/^https?:\/\/([^:^\/]*):(\d*)/))?t[2]:"http"===n?"80":"443"}return""},t.getDomainFromUrl=function(e){if(e&&e.match){var t=e.match(/^https?:\/\/([^:^\/]*)/);return t?t[1]:""}return""},t.getUploadUrl=function(e,t){var n=f();if(null!=e.uphost)return p.default.resolve(n+"//"+e.uphost);if(null!=e.region){var r=y.regionUphostMap[e.region],i=e.useCdnDomain?r.cdnUphost:r.srcUphost;return p.default.resolve(n+"//"+i)}return function(e){try{var t=function(e){var t=e.split(":"),n=t[0],r=JSON.parse((0,v.urlSafeBase64Decode)(t[2]));return r.ak=n,r.bucket=r.scope.split(":")[0],r}(e);return d(f()+"//api.qiniu.com/v2/query?ak="+t.ak+"&bucket="+t.bucket,{method:"GET"})}catch(e){return p.default.reject(e)}}(t).then(function(e){var t=e.data.up.acc.main;return n+"//"+t[0]})},t.isContainFileMimeType=function(e,t){return t.indexOf(e)>-1},t.createObjectURL=function(e){return(window.URL||window.webkitURL||window.mozURL).createObjectURL(e)},t.getTransform=function(e,t){var n=e.width,r=e.height;switch(t){case 1:return{width:n,height:r,matrix:[1,0,0,1,0,0]};case 2:return{width:n,height:r,matrix:[-1,0,0,1,n,0]};case 3:return{width:n,height:r,matrix:[-1,0,0,-1,n,r]};case 4:return{width:n,height:r,matrix:[1,0,0,-1,0,r]};case 5:return{width:r,height:n,matrix:[0,1,1,0,0,0]};case 6:return{width:r,height:n,matrix:[0,1,-1,0,r,0]};case 7:return{width:r,height:n,matrix:[0,-1,-1,0,r,n]};case 8:return{width:r,height:n,matrix:[0,-1,1,0,0,n]}}};var v=n(56),y=n(39),b=r(n(91))},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,n){var r=n(46),i=n(32);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){e.exports={default:n(59),__esModule:!0}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(7).f,i=n(9),o=n(2)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(27);e.exports=function(e){return Object(r(e))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(8),i=n(0).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(31)("keys"),i=n(22);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(1),i=n(0),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(13)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(20);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){e.exports={default:n(83),__esModule:!0}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){e.exports={default:n(88),__esModule:!0}},function(e,t,n){t.f=n(2)},function(e,t,n){var r=n(0),i=n(1),o=n(13),s=n(37),a=n(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){t.__esModule=!0,t.regionUphostMap={z0:{srcUphost:"up.qiniup.com",cdnUphost:"upload.qiniup.com"},z1:{srcUphost:"up-z1.qiniup.com",cdnUphost:"upload-z1.qiniup.com"},z2:{srcUphost:"up-z2.qiniup.com",cdnUphost:"upload-z2.qiniup.com"},na0:{srcUphost:"up-na0.qiniup.com",cdnUphost:"upload-na0.qiniup.com"},as0:{srcUphost:"up-as0.qiniup.com",cdnUphost:"upload-as0.qiniup.com"}},t.region={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0"}},function(e,t){},function(e,t,n){var r=n(60)(!0);n(42)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(13),i=n(5),o=n(44),s=n(6),a=n(14),u=n(61),l=n(23),c=n(65),d=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,g,v){u(n,t,h);var y,b,w,x=function(e){if(!f&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",C="values"==m,F=!1,k=e.prototype,_=k[d]||k["@@iterator"]||m&&k[m],E=_||x(m),P=m?C?x("entries"):E:void 0,I="Array"==t&&k.entries||_;if(I&&(w=c(I.call(new e)))!==Object.prototype&&w.next&&(l(w,S,!0),r||"function"==typeof w[d]||s(w,d,p)),C&&_&&"values"!==_.name&&(F=!0,E=function(){return _.call(this)}),r&&!v||!f&&!F&&k[d]||s(k,d,E),a[t]=E,a[S]=p,m)if(y={values:C?E:x("values"),keys:g?E:x("keys"),entries:P},v)for(b in y)b in k||o(k,b,y[b]);else i(i.P+i.F*(f||F),t,y);return y}},function(e,t,n){e.exports=!n(4)&&!n(10)(function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(6)},function(e,t,n){var r=n(3),i=n(62),o=n(32),s=n(30)("IE_PROTO"),a=function(){},u=function(){var e,t=n(28)("iframe"),r=o.length;for(t.style.display="none",n(49).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(9),i=n(11),o=n(63)(!1),s=n(30)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(16);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(26),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){n(66);for(var r=n(0),i=n(6),o=n(14),s=n(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=r[l],d=c&&c.prototype;d&&!d[s]&&i(d,s,l),o[l]=o.Array}},function(e,t,n){var r=n(16),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(3),i=n(20),o=n(2)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(19),a=n(75),u=n(49),l=n(28),c=n(0),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,g=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){a("function"==typeof e?e:Function(e),t)},r(g),g},p=function(e){delete v[e]},"process"==n(16)(d)?r=function(e){d.nextTick(s(y,e,1))}:m&&m.now?r=function(e){m.now(s(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=b,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(3),i=n(8),o=n(33);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){t.__esModule=!0,t.urlSafeBase64Encode=function(e){return(e=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,c=0,d=0,f="",p=[];if(!e)return e;e=function(e){if(null==e)return"";var t=e+"",n="",r=void 0,i=void 0,o=0;r=i=0,o=t.length;for(var s=0;s<o;s++){var a=t.charCodeAt(s),u=null;if(a<128)i++;else if(a>127&&a<2048)u=String.fromCharCode(a>>6|192,63&a|128);else if(63488&a^!0)u=String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128);else{if(64512&a^!0)throw new RangeError("Unmatched trail surrogate at "+s);var l=t.charCodeAt(++s);if(64512&l^!0)throw new RangeError("Unmatched lead surrogate at "+(s-1));a=((1023&a)<<10)+(1023&l)+65536,u=String.fromCharCode(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}null!==u&&(i>r&&(n+=t.slice(r,i)),n+=u,r=i=s+1)}return i>r&&(n+=t.slice(r,o)),n}(e+"");do{n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=e.charCodeAt(c++),o=(l=n<<16|r<<8|i)>>18&63,s=l>>12&63,a=l>>6&63,u=63&l,p[d++]=t.charAt(o)+t.charAt(s)+t.charAt(a)+t.charAt(u)}while(c<e.length);switch(f=p.join(""),e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}(e)).replace(/\//g,"_").replace(/\+/g,"-")},t.urlSafeBase64Decode=function(e){return function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,c=0,d=0,f=[];if(!e)return e;e+="";do{o=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),n=(l=o<<18|s<<12|a<<6|u)>>16&255,r=l>>8&255,i=255&l,f[d++]=64===a?String.fromCharCode(n):64===u?String.fromCharCode(n,r):String.fromCharCode(n,r,i)}while(c<e.length);return f.join("")}(e=e.replace(/_/g,"/").replace(/-/g,"+"))}},function(e,t,n){var r=n(46),i=n(32).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){t.__esModule=!0,t.pipeline=t.compressImage=t.exif=t.imageInfo=t.watermark=t.imageMogr2=t.getUploadUrl=t.filterParams=t.getHeadersForMkFile=t.getResumeUploadedSize=t.getHeadersForChunkUpload=t.createMkFileUrl=t.region=t.upload=void 0;var r=n(39),i=n(12),o=n(92),s=n(94),a=n(95),u=n(109),l=function(e){return e&&e.__esModule?e:{default:e}}(n(110)),c=new u.StatisticsLogger;t.upload=function(e,t,n,r,i){var s={file:e,key:t,token:n,putExtra:r,config:i};return new a.Observable(function(e){var t=new o.UploadManager(s,{onData:function(t){return e.next(t)},onError:function(t){return e.error(t)},onComplete:function(t){return e.complete(t)}},c);return t.putFile(),t.stop.bind(t)})},t.region=r.region,t.createMkFileUrl=i.createMkFileUrl,t.getHeadersForChunkUpload=i.getHeadersForChunkUpload,t.getResumeUploadedSize=i.getResumeUploadedSize,t.getHeadersForMkFile=i.getHeadersForMkFile,t.filterParams=i.filterParams,t.getUploadUrl=i.getUploadUrl,t.imageMogr2=s.imageMogr2,t.watermark=s.watermark,t.imageInfo=s.imageInfo,t.exif=s.exif,t.compressImage=l.default,t.pipeline=s.pipeline},function(e,t,n){n(40),n(41),n(50),n(69),n(81),n(82),e.exports=n(1).Promise},function(e,t,n){var r=n(26),i=n(27);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),u=r(n),l=a.length;return u<0||u>=l?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(45),i=n(21),o=n(23),s={};n(6)(s,n(2)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(7),i=n(3),o=n(15);e.exports=n(4)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},function(e,t,n){var r=n(11),i=n(48),o=n(64);e.exports=function(e){return function(t,n,s){var a,u=r(t),l=i(u.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(26),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(9),i=n(24),o=n(30)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(67),i=n(68),o=n(14),s=n(11);e.exports=n(42)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r,i,o,s,a=n(13),u=n(0),l=n(19),c=n(51),d=n(5),f=n(8),p=n(20),h=n(70),m=n(71),g=n(52),v=n(53).set,y=n(76)(),b=n(33),w=n(54),x=n(77),S=n(55),C=u.TypeError,F=u.process,k=F&&F.versions,_=k&&k.v8||"",E=u.Promise,P="process"==c(F),I=function(){},U=i=b.f,T=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(2)("species")]=function(e){e(I,I)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==_.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,s,a=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(i||(2==e._h&&R(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&(c.exit(),s=!0)),n===t.promise?l(C("Promise-chain cycle")):(o=A(n))?o.call(n,u,l):u(n)):l(r)}catch(e){c&&!s&&c.exit(),l(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){v.call(u,function(){var t,n,r,i=e._v,o=z(e);if(o&&(t=w(function(){P?F.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=P||z(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},z=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){v.call(u,function(){var t;P?F.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},O=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},D=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw C("Promise can't be resolved itself");(n=A(t))?y(function(){var i={_w:r,_d:!1};try{n.call(t,l(e,i,1),l(O,i,1))}catch(e){O.call(i,e)}}):(r._v=t,r._s=1,M(r,!1))}catch(t){O.call({_w:r,_d:!1},t)}}};T||(E=function(e){h(this,E,"Promise","_h"),p(e),r.call(this);try{e(l(D,this,1),l(O,this,1))}catch(e){O.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(78)(E.prototype,{then:function(e,t){var n=U(g(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?F.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(D,e,1),this.reject=l(O,e,1)},b.f=U=function(e){return e===E||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!T,{Promise:E}),n(23)(E,"Promise"),n(79)("Promise"),s=n(1).Promise,d(d.S+d.F*!T,"Promise",{reject:function(e){var t=U(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!T),"Promise",{resolve:function(e){return S(a&&this===s?E:this,e)}}),d(d.S+d.F*!(T&&n(80)(function(e){E.all(e).catch(I)})),"Promise",{all:function(e){var t=this,n=U(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,s=1;m(e,!1,function(e){var a=o++,u=!1;n.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=U(t),r=n.reject,i=w(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(19),i=n(72),o=n(73),s=n(3),a=n(48),u=n(74),l={},c={};(t=e.exports=function(e,t,n,d,f){var p,h,m,g,v=f?function(){return e}:u(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=a(e.length);p>b;b++)if((g=t?y(s(h=e[b])[0],h[1]):y(e[b]))===l||g===c)return g}else for(m=v.call(e);!(h=m.next()).done;)if((g=i(m,y,h.value,t))===l||g===c)return g}).BREAK=l,t.RETURN=c},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(14),i=n(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(51),i=n(2)("iterator"),o=n(14);e.exports=n(1).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(0),i=n(53).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(16)(s);e.exports=function(){var e,t,n,l=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(0).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(6);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){var r=n(0),i=n(1),o=n(7),s=n(4),a=n(2)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(e){}return n}},function(e,t,n){var r=n(5),i=n(1),o=n(0),s=n(52),a=n(55);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){var r=n(5),i=n(33),o=n(54);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(84),e.exports=n(1).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(85)})},function(e,t,n){var r=n(4),i=n(15),o=n(35),s=n(25),a=n(24),u=n(47),l=Object.assign;e.exports=!l||n(10)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=a(e),l=arguments.length,c=1,d=o.f,f=s.f;l>c;)for(var p,h=u(arguments[c++]),m=d?i(h).concat(d(h)):i(h),g=m.length,v=0;g>v;)p=m[v++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:l},function(e,t,n){e.exports={default:n(87),__esModule:!0}},function(e,t,n){var r=n(1),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(89),e.exports=n(1).Object.keys},function(e,t,n){var r=n(24),i=n(15);n(90)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(1),o=n(10);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(e,t,n){e.exports=function(e){function t(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,o,s,a,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=l;r+=64)t(c,n(e.substring(r-64,r)));for(i=(e=e.substring(r-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(t(c,o),r=0;r<16;r+=1)o[r]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,t(c,o),c}function o(e){var t,n="";for(t=0;t<4;t+=1)n+=c[e>>8*t+4&15]+c[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var r,i,o,s,a=this.byteLength,u=e(t,a),l=a;return void 0!==n&&(l=e(n,a)),u>l?new ArrayBuffer(0):(r=l-u,i=new ArrayBuffer(r),o=new Uint8Array(i),s=new Uint8Array(this,u,r),o.set(s),i)}}(),l.prototype.append=function(e){return this.appendBinary(a(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,n){var r,i,o,s=n;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,t(this._hash,e)},l.hash=function(e,t){return l.hashBinary(a(e),t)},l.hashBinary=function(e,t){var n=s(i(e));return t?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var n,i=function(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),r}(this._buff.buffer,e),o=i.length;for(this._length+=e.byteLength,n=64;n<=o;n+=64)t(this._hash,r(i.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e=l.prototype.getState.call(this);return e.buff=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(e.buff),e},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return o}(e.buff),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,n){var i=s(function(e){var n,i,o,s,a,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)t(c,r(e.subarray(n-64,n)));for(i=(e=n-64<l?e.subarray(n-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=e[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(c,o),n=0;n<16;n+=1)o[n]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,t(c,o),c}(new Uint8Array(e)));return n?u(i):i},l}()},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.UploadManager=void 0;var i=r(n(18)),o=r(n(34)),s=r(n(17)),a=n(12),u=n(93);t.UploadManager=function(){function e(t,n,r){var i=this;(0,s.default)(this,e),this.config=(0,o.default)({useCdnDomain:!0,disableStatisticsReport:!1,retryCount:3,checkByMD5:!1,uphost:null,forceDirect:!1,concurrentRequestLimit:3,region:null},t.config),this.putExtra=(0,o.default)({fname:"",params:{},mimeType:null},t.putExtra),this.statisticsLogger=r,this.progress=null,this.xhrList=[],this.xhrHandler=function(e){return i.xhrList.push(e)},this.aborted=!1,this.file=t.file,this.key=t.key,this.token=t.token,this.onData=function(){},this.onError=function(){},this.onComplete=function(){},this.retryCount=0,(0,o.default)(this,n)}return e.prototype.putFile=function(){var e=this;if(this.aborted=!1,this.putExtra.fname||(this.putExtra.fname=this.file.name),!this.putExtra.mimeType||!this.putExtra.mimeType.length||(0,a.isContainFileMimeType)(this.file.type,this.putExtra.mimeType)){var t=(0,a.getUploadUrl)(this.config,this.token).then(function(t){return e.uploadUrl=t,e.uploadAt=(new Date).getTime(),e.config.forceDirect?e.directUpload():e.file.size>4194304?e.resumeUpload():e.directUpload()});return t.then(function(t){e.onComplete(t.data),e.config.disableStatisticsReport||e.sendLog(t.reqId,200)},function(t){if(e.clear(),t.isRequestError&&!e.config.disableStatisticsReport){var n=e.aborted?"":t.reqId,r=e.aborted?-2:t.code;e.sendLog(n,r)}var i=t.isRequestError&&0===t.code&&!e.aborted,o=++e.retryCount<=e.config.retryCount;i&&o?e.putFile():e.onError(t)}),t}var n=new Error("file type doesn't match with what you specify");this.onError(n)},e.prototype.clear=function(){this.xhrList.forEach(function(e){return e.abort()}),this.xhrList=[]},e.prototype.stop=function(){this.clear(),this.aborted=!0},e.prototype.sendLog=function(e,t){this.statisticsLogger.log({code:t,reqId:e,host:(0,a.getDomainFromUrl)(this.uploadUrl),remoteIp:"",port:(0,a.getPortFromUrl)(this.uploadUrl),duration:((new Date).getTime()-this.uploadAt)/1e3,time:Math.floor(this.uploadAt/1e3),bytesSent:this.progress?this.progress.total.loaded:0,upType:"jssdk-h5",size:this.file.size},this.token)},e.prototype.directUpload=function(){var e=this,t=new FormData;return t.append("file",this.file),t.append("token",this.token),null!=this.key&&t.append("key",this.key),t.append("fname",this.putExtra.fname),(0,a.filterParams)(this.putExtra.params).forEach(function(e){return t.append(e[0],e[1])}),(0,a.request)(this.uploadUrl,{method:"POST",body:t,onProgress:function(t){e.updateDirectProgress(t.loaded,t.total)},onCreate:this.xhrHandler}).then(function(t){return e.finishDirectProgress(),t})},e.prototype.resumeUpload=function(){var e=this;this.loaded={mkFileProgress:0,chunks:null},this.ctxList=[],this.localInfo=(0,a.getLocalFileInfo)(this.file),this.chunks=(0,a.getChunks)(this.file,4194304),this.initChunksProgress();var t=new u.Pool(function(t){return e.uploadChunk(t)},this.config.concurrentRequestLimit),n=this.chunks.map(function(e,n){return t.enqueue({chunk:e,index:n})}),r=i.default.all(n).then(function(){return e.mkFileReq()});return r.then(function(t){(0,a.removeLocalFileInfo)(e.file)},function(t){701!==t.code||(0,a.removeLocalFileInfo)(e.file)}),r},e.prototype.uploadChunk=function(e){var t=this,n=e.index,r=e.chunk,o=this.localInfo[n],s=this.uploadUrl+"/mkblk/"+r.size,u=o&&!(0,a.isChunkExpired)(o.time),l=this.config.checkByMD5,c=function(){return t.updateChunkProgress(r.size,n),t.ctxList[n]={ctx:o.ctx,size:o.size,time:o.time,md5:o.md5},i.default.resolve(null)};return u&&!l?c():(0,a.computeMd5)(r).then(function(e){if(u&&e===o.md5)return c();var i=(0,a.getHeadersForChunkUpload)(t.token),l=function(e){t.updateChunkProgress(e.loaded,n)},d=t.xhrHandler;return(0,a.request)(s,{method:"POST",headers:i,body:r,onProgress:l,onCreate:d}).then(function(i){l({loaded:r.size}),t.ctxList[n]={time:(new Date).getTime(),ctx:i.data.ctx,size:r.size,md5:e},(0,a.setLocalFileInfo)(t.file,t.ctxList)})})},e.prototype.mkFileReq=function(){var e=this,t=(0,o.default)({mimeType:"application/octet-stream"},this.putExtra),n=(0,a.createMkFileUrl)(this.uploadUrl,this.file,this.key,t),r=this.ctxList.map(function(e){return e.ctx}).join(","),s=(0,a.getHeadersForMkFile)(this.token),u=this.xhrHandler;return(0,a.request)(n,{method:"POST",body:r,headers:s,onCreate:u}).then(function(t){return e.updateMkFileProgress(1),i.default.resolve(t)})},e.prototype.updateDirectProgress=function(e,t){this.progress={total:this.getProgressInfoItem(e,t+1)},this.onData(this.progress)},e.prototype.finishDirectProgress=function(){if(!this.progress)return this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},void this.onData(this.progress);var e=this.progress.total;this.progress={total:this.getProgressInfoItem(e.loaded+1,e.size)},this.onData(this.progress)},e.prototype.initChunksProgress=function(){this.loaded.chunks=this.chunks.map(function(e){return 0}),this.notifyResumeProgress()},e.prototype.updateChunkProgress=function(e,t){this.loaded.chunks[t]=e,this.notifyResumeProgress()},e.prototype.updateMkFileProgress=function(e){this.loaded.mkFileProgress=e,this.notifyResumeProgress()},e.prototype.notifyResumeProgress=function(){var e=this;this.progress={total:this.getProgressInfoItem((0,a.sum)(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map(function(t,n){return e.getProgressInfoItem(e.loaded.chunks[n],t.size)})},this.onData(this.progress)},e.prototype.getProgressInfoItem=function(e,t){return{loaded:e,size:t,percent:e/t*100}},e}()},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Pool=void 0;var i=r(n(18)),o=r(n(17));t.Pool=function(){function e(t,n){(0,o.default)(this,e),this.runTask=t,this.queue=[],this.processing=[],this.limit=n}return e.prototype.enqueue=function(e){var t=this;return new i.default(function(n,r){t.queue.push({task:e,resolve:n,reject:r}),t.check()})},e.prototype.run=function(e){var t=this;this.queue=this.queue.filter(function(t){return t!==e}),this.processing.push(e),this.runTask(e.task).then(function(){t.processing=t.processing.filter(function(t){return t!==e}),e.resolve(),t.check()},function(t){return e.reject(t)})},e.prototype.check=function(){var e=this,t=this.processing.length,n=this.limit-t;this.queue.slice(0,n).forEach(function(t,n){e.run(t)})},e}()},function(e,t,n){function r(e,t){return e=encodeURIComponent(e),"/"!==t.slice(t.length-1)&&(t+="/"),t+e}function i(e,t,n){if(!/^\d$/.test(e.mode))throw"mode should be number in imageView2";var i=e.mode,o=e.w,s=e.h,a=e.q,u=e.format;if(!o&&!s)throw"param w and h is empty in imageView2";var l="imageView2/"+encodeURIComponent(i);return l+=o?"/w/"+encodeURIComponent(o):"",l+=s?"/h/"+encodeURIComponent(s):"",l+=a?"/q/"+encodeURIComponent(a):"",l+=u?"/format/"+encodeURIComponent(u):"",t&&(l=r(t,n)+"?"+l),l}function o(e,t,n){var i=e["auto-orient"],o=e.thumbnail,s=e.strip,a=e.gravity,u=e.crop,l=e.quality,c=e.rotate,d=e.format,f=e.blur,p="imageMogr2";return p+=i?"/auto-orient":"",p+=o?"/thumbnail/"+encodeURIComponent(o):"",p+=s?"/strip":"",p+=a?"/gravity/"+encodeURIComponent(a):"",p+=l?"/quality/"+encodeURIComponent(l):"",p+=u?"/crop/"+encodeURIComponent(u):"",p+=c?"/rotate/"+encodeURIComponent(c):"",p+=d?"/format/"+encodeURIComponent(d):"",p+=f?"/blur/"+encodeURIComponent(f):"",t&&(p=r(t,n)+"?"+p),p}function s(e,t,n){var i=e.mode;if(!i)throw"mode can't be empty in watermark";var o="watermark/"+i;if(1!==i&&2!==i)throw"mode is wrong";if(1===i){var s=e.image;if(!s)throw"image can't be empty in watermark";o+=s?"/image/"+(0,u.urlSafeBase64Encode)(s):""}if(2===i){var a=e.text,l=e.font,c=e.fontsize,d=e.fill;if(!a)throw"text can't be empty in watermark";o+=a?"/text/"+(0,u.urlSafeBase64Encode)(a):"",o+=l?"/font/"+(0,u.urlSafeBase64Encode)(l):"",o+=c?"/fontsize/"+c:"",o+=d?"/fill/"+(0,u.urlSafeBase64Encode)(d):""}var f=e.dissolve,p=e.gravity,h=e.dx,m=e.dy;return o+=f?"/dissolve/"+encodeURIComponent(f):"",o+=p?"/gravity/"+encodeURIComponent(p):"",o+=h?"/dx/"+encodeURIComponent(h):"",o+=m?"/dy/"+encodeURIComponent(m):"",t&&(o=r(t,n)+"?"+o),o}t.__esModule=!0,t.imageView2=i,t.imageMogr2=o,t.watermark=s,t.imageInfo=function(e,t){var n=r(e,t)+"?imageInfo";return(0,a.request)(n,{method:"GET"})},t.exif=function(e,t){var n=r(e,t)+"?exif";return(0,a.request)(n,{method:"GET"})},t.pipeline=function(e,t,n){var a=void 0,u=void 0,l="";if("[object Array]"===Object.prototype.toString.call(e)){for(var c=0,d=e.length;c<d;c++){if(!(a=e[c]).fop)throw"fop can't be empty in pipeline";switch(a.fop){case"watermark":l+=s(a)+"|";break;case"imageView2":l+=i(a)+"|";break;case"imageMogr2":l+=o(a)+"|";break;default:u=!0}if(u)throw"fop is wrong in pipeline"}if(t){var f=(l=r(t,n)+"?"+l).length;"|"===l.slice(f-1)&&(l=l.slice(0,f-1))}return l}throw"pipeline's first param should be array"};var a=n(12),u=n(56)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Observable=void 0;var i=r(n(96)),o=r(n(17));t.Observable=function(){function e(t){(0,o.default)(this,e),this.subscribeAction=t}return e.prototype.subscribe=function(e,t,n){var r=new s(e,t,n),i=this.subscribeAction(r);return new a(r,i)},e}();var s=function(){function e(t,n,r){(0,o.default)(this,e),this.isStopped=!1,"object"===(void 0===t?"undefined":(0,i.default)(t))?(this._onNext=t.next,this._onError=t.error,this._onCompleted=t.complete):(this._onNext=t,this._onError=n,this._onCompleted=r)}return e.prototype.next=function(e){!this.isStopped&&this._onNext&&this._onNext(e)},e.prototype.error=function(e){!this.isStopped&&this._onError&&(this.isStopped=!0,this._onError(e))},e.prototype.complete=function(e){!this.isStopped&&this._onCompleted&&(this.isStopped=!0,this._onCompleted(e))},e}(),a=function(){function e(t,n){(0,o.default)(this,e),this.observer=t,this.result=n}return e.prototype.unsubscribe=function(){this.observer.isStopped=!0,this.result()},e}()},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(97)),o=r(n(99)),s="function"==typeof o.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};t.default="function"==typeof o.default&&"symbol"===s(i.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,n){e.exports={default:n(98),__esModule:!0}},function(e,t,n){n(41),n(50),e.exports=n(37).f("iterator")},function(e,t,n){e.exports={default:n(100),__esModule:!0}},function(e,t,n){n(101),n(40),n(107),n(108),e.exports=n(1).Symbol},function(e,t,n){var r=n(0),i=n(9),o=n(4),s=n(5),a=n(44),u=n(102).KEY,l=n(10),c=n(31),d=n(23),f=n(22),p=n(2),h=n(37),m=n(38),g=n(103),v=n(104),y=n(3),b=n(8),w=n(24),x=n(11),S=n(29),C=n(21),F=n(45),k=n(105),_=n(106),E=n(35),P=n(7),I=n(15),U=_.f,T=P.f,A=k.f,M=r.Symbol,L=r.JSON,z=L&&L.stringify,R=p("_hidden"),O=p("toPrimitive"),D={}.propertyIsEnumerable,j=c("symbol-registry"),N=c("symbols"),B=c("op-symbols"),q=Object.prototype,G="function"==typeof M&&!!E.f,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,Q=o&&l(function(){return 7!=F(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=U(q,t);r&&delete q[t],T(e,t,n),r&&e!==q&&T(q,t,r)}:T,V=function(e){var t=N[e]=F(M.prototype);return t._k=e,t},X=G&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Y=function e(t,n,r){return t===q&&e(B,n,r),y(t),n=S(n,!0),y(r),i(N,n)?(r.enumerable?(i(t,R)&&t[R][n]&&(t[R][n]=!1),r=F(r,{enumerable:C(0,!1)})):(i(t,R)||T(t,R,C(1,{})),t[R][n]=!0),Q(t,n,r)):T(t,n,r)},J=function(e,t){y(e);for(var n,r=g(t=x(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},K=function(e){var t=D.call(this,e=S(e,!0));return!(this===q&&i(N,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(N,e)||i(this,R)&&this[R][e])||t)},$=function(e,t){if(e=x(e),t=S(t,!0),e!==q||!i(N,t)||i(B,t)){var n=U(e,t);return!n||!i(N,t)||i(e,R)&&e[R][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=A(x(e)),r=[],o=0;n.length>o;)i(N,t=n[o++])||t==R||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===q,r=A(n?B:x(e)),o=[],s=0;r.length>s;)!i(N,t=r[s++])||n&&!i(q,t)||o.push(N[t]);return o};G||(a((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0);return o&&W&&Q(q,e,{configurable:!0,set:function t(n){this===q&&t.call(B,n),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),Q(this,e,C(1,n))}}),V(e)}).prototype,"toString",function(){return this._k}),_.f=$,P.f=Y,n(57).f=k.f=Z,n(25).f=K,E.f=ee,o&&!n(13)&&a(q,"propertyIsEnumerable",K,!0),h.f=function(e){return V(p(e))}),s(s.G+s.W+s.F*!G,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=I(p.store),ie=0;re.length>ie;)m(re[ie++]);s(s.S+s.F*!G,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=M(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!G,"Object",{create:function(e,t){return void 0===t?F(e):J(F(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=l(function(){E.f(1)});s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return E.f(w(e))}}),L&&s(s.S+s.F*(!G||l(function(){var e=M();return"[null]"!=z([e])||"{}"!=z({a:e})||"{}"!=z(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!X(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,z.apply(L,r)}}),M.prototype[O]||n(6)(M.prototype,O,M.prototype.valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(22)("meta"),i=n(8),o=n(9),s=n(7).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(10)(function(){return u(Object.preventExtensions({}))}),c=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&u(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(15),i=n(35),o=n(25);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),u=o.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},function(e,t,n){var r=n(16);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(11),i=n(57).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(25),i=n(21),o=n(11),s=n(29),a=n(9),u=n(43),l=Object.getOwnPropertyDescriptor;t.f=n(4)?l:function(e,t){if(e=o(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){n(38)("asyncIterator")},function(e,t,n){n(38)("observable")},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.StatisticsLogger=void 0;var i=r(n(36)),o=r(n(17)),s=n(12);t.StatisticsLogger=function(){function e(){(0,o.default)(this,e)}return e.prototype.log=function(e,t){var n="";(0,i.default)(e).forEach(function(t){return n+=e[t]+","}),this.send(n,t,0)},e.prototype.send=function(e,t,n){var r=(0,s.createXHR)(),i=this;r.open("POST","https://uplog.qbox.me/log/3"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Authorization","UpToken "+t),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&++n<=3&&i.send(e,t,n)},r.send(e)},e}()},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(18)),o=r(n(34)),s=r(n(17)),a=r(n(36)),u=n(111),l=n(12),c={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"},d=Math.log(2),f=(0,a.default)(c).map(function(e){return c[e]}),p=c.JPEG,h=function(){function e(t,n){(0,s.default)(this,e),this.config=(0,o.default)({quality:.92,noCompressIfLarger:!1},n),this.file=t}return e.prototype.process=function(){var e=this;this.outputType=this.file.type;var t={};return function(e){return f.includes(e)}(this.file.type)?this.getOriginImage().then(function(t){return e.getCanvas(t)}).then(function(n){var r=1;return e.config.maxWidth&&(r=Math.min(1,e.config.maxWidth/n.width)),e.config.maxHeight&&(r=Math.min(1,r,e.config.maxHeight/n.height)),t.width=n.width,t.height=n.height,e.doScale(n,r)}).then(function(n){var r=e.toBlob(n);return r.size>e.file.size&&e.config.noCompressIfLarger?{dist:e.file,width:t.width,height:t.height}:{dist:r,width:n.width,height:n.height}}):i.default.reject(new Error("unsupported file type: "+this.file.type))},e.prototype.clear=function(e,t,n){this.outputType===p?(e.fillStyle="#fff",e.fillRect(0,0,t,n)):e.clearRect(0,0,t,n)},e.prototype.getOriginImage=function(){var e=this;return new i.default(function(t,n){var r=(0,l.createObjectURL)(e.file),i=new Image;i.onload=function(){t(i)},i.onerror=function(){n("image load error")},i.src=r})},e.prototype.getCanvas=function(e){var t=this;return new i.default(function(n,r){u.EXIF.getData(e,function(){var r=u.EXIF.getTag(e,"Orientation")||1,i=(0,l.getTransform)(e,r),o=i.width,s=i.height,a=i.matrix,c=document.createElement("canvas"),d=c.getContext("2d");c.width=o,c.height=s,t.clear(d,o,s),d.transform.apply(d,a),d.drawImage(e,0,0),n(c)})})},e.prototype.doScale=function(e,t){if(1===t)return i.default.resolve(e);var n=e.getContext("2d"),r=Math.min(4,Math.ceil(1/t/d)),o=Math.pow(t,1/r),s=document.createElement("canvas"),a=s.getContext("2d"),u=e.width,l=e.height,c=u,f=l;s.width=u,s.height=l;for(var p=void 0,h=void 0,m=0;m<r;m++){var g=u*o|0,v=l*o|0;m===r-1&&(g=c*t,v=f*t),m%2==0?(p=e,h=a):(p=s,h=n),this.clear(h,u,l),h.drawImage(p,0,0,u,l,0,0,g,v),u=g,l=v}var y=p===e?s:e,b=h.getImageData(0,0,u,l);return y.width=u,y.height=l,h.putImageData(b,0,0),i.default.resolve(y)},e.prototype.toBlob=function(e){var t=e.toDataURL(this.outputType,this.config.quality),n=atob(t.split(",")[1]).split("").map(function(e){return e.charCodeAt(0)});return new Blob([new Uint8Array(n)],{type:this.outputType})},e}();t.default=function(e,t){return new h(e,t).process()}},function(e,t,r){var i;(function(){function r(e){return!!e.exifdata}function o(e,t){function n(n){var r=s(n);e.exifdata=r||{};var i=function(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,n)){var i=t.getUint8(n+7);return i%2!=0&&(i+=1),0===i&&(i=4),a(e,n+8+i,t.getUint16(n+6+i))}n++}}(n);if(e.iptcdata=i||{},h.isXmpEnabled){var o=function(e){if("DOMParser"in self){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength,i=new DOMParser;n<r-4;){if("http"==c(t,n,4)){var o=n-1,s=t.getUint16(n-2)-1,a=c(t,o,s),u=a.indexOf("xmpmeta>")+8,l=(a=a.substring(a.indexOf("<x:xmpmeta"),u)).indexOf("x:xmpmeta")+10;return a=a.slice(0,l)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+a.slice(l),p(i.parseFromString(a,"text/xml"))}n++}}}(n);e.xmpdata=o||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),s=0;s<r;s++)o[s]=n.charCodeAt(s);return i}(e.src));else if(/^blob\:/i.test(e.src))(i=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||function(e){i.readAsArrayBuffer(e)}(this.response)},n.send()}(e.src);else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i;(i=new FileReader).onload=function(e){n(e.target.result)},i.readAsArrayBuffer(e)}}function s(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return d(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}function a(e,t,n){for(var r,i,o,s,a=new DataView(e),u={},l=t;l<t+n;)28===a.getUint8(l)&&2===a.getUint8(l+1)&&(s=a.getUint8(l+2))in w&&(o=a.getInt16(l+3),i=w[s],r=c(a,l+5,o),u.hasOwnProperty(i)?u[i]instanceof Array?u[i].push(r):u[i]=[u[i],r]:u[i]=r),l++;return u}function u(e,t,n,r,i){var o,s,a,u=e.getUint16(n,!i),c={};for(a=0;a<u;a++)o=n+12*a+2,s=r[e.getUint16(o,!i)],c[s]=l(e,o,t,0,i);return c}function l(e,t,n,r,i){var o,s,a,u,l,d,f=e.getUint16(t+2,!i),p=e.getUint32(t+4,!i),h=e.getUint32(t+8,!i)+n;switch(f){case 1:case 7:if(1==p)return e.getUint8(t+8,!i);for(o=p>4?h:t+8,s=[],u=0;u<p;u++)s[u]=e.getUint8(o+u);return s;case 2:return c(e,o=p>4?h:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!i);for(o=p>2?h:t+8,s=[],u=0;u<p;u++)s[u]=e.getUint16(o+2*u,!i);return s;case 4:if(1==p)return e.getUint32(t+8,!i);for(s=[],u=0;u<p;u++)s[u]=e.getUint32(h+4*u,!i);return s;case 5:if(1==p)return l=e.getUint32(h,!i),d=e.getUint32(h+4,!i),(a=new Number(l/d)).numerator=l,a.denominator=d,a;for(s=[],u=0;u<p;u++)l=e.getUint32(h+8*u,!i),d=e.getUint32(h+4+8*u,!i),s[u]=new Number(l/d),s[u].numerator=l,s[u].denominator=d;return s;case 9:if(1==p)return e.getInt32(t+8,!i);for(s=[],u=0;u<p;u++)s[u]=e.getInt32(h+4*u,!i);return s;case 10:if(1==p)return e.getInt32(h,!i)/e.getInt32(h+4,!i);for(s=[],u=0;u<p;u++)s[u]=e.getInt32(h+8*u,!i)/e.getInt32(h+4+8*u,!i);return s}}function c(e,t,r){var i="";for(n=t;n<t+r;n++)i+=String.fromCharCode(e.getUint8(n));return i}function d(e,t){if("Exif"!=c(e,t,4))return!1;var n,r,i,o,s,a=t+6;if(18761==e.getUint16(a))n=!1;else{if(19789!=e.getUint16(a))return!1;n=!0}if(42!=e.getUint16(a+2,!n))return!1;var l=e.getUint32(a+4,!n);if(l<8)return!1;if((r=u(e,a,a+l,g,n)).ExifIFDPointer)for(i in o=u(e,a,a+r.ExifIFDPointer,m,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=b[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=b.Components[o[i][0]]+b.Components[o[i][1]]+b.Components[o[i][2]]+b.Components[o[i][3]]}r[i]=o[i]}if(r.GPSInfoIFDPointer)for(i in s=u(e,a,a+r.GPSInfoIFDPointer,v,n)){switch(i){case"GPSVersionID":s[i]=s[i][0]+"."+s[i][1]+"."+s[i][2]+"."+s[i][3]}r[i]=s[i]}return r.thumbnail=function(e,t,n,r){var i=function(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}(e,t+n,r);if(!i)return{};if(i>e.byteLength)return{};var o=u(e,t,t+i,y,r);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var s=t+o.JpegIFOffset,a=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,s,a)],{type:"image/jpeg"})}}else o.PhotometricInterpretation;return o}(e,a,l,n),r}function f(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),s=o.nodeName;if(null==t[s])t[s]=f(o);else{if(null==t[s].push){var a=t[s];t[s]=[],t[s].push(a)}t[s].push(f(o))}}return t}function p(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),i=r.attributes;for(var o in i){var s=i[o],a=s.nodeName,u=s.nodeValue;void 0!==a&&(t[a]=u)}var l=r.nodeName;if(void 0===t[l])t[l]=f(r);else{if(void 0===t[l].push){var c=t[l];t[l]=[],t[l].push(c)}t[l].push(f(r))}}else t=e.textContent;return t}catch(e){}}var h=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};void 0!==e&&e.exports&&(t=e.exports=h),t.EXIF=h;var m=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},v=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},y=h.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},b=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},w={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.enableXmp=function(){h.isXmpEnabled=!0},h.disableXmp=function(){h.isXmpEnabled=!1},h.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete||(r(e)?t&&t.call(e):o(e,t),0))},h.getTag=function(e,t){if(r(e))return e.exifdata[t]},h.getIptcTag=function(e,t){if(r(e))return e.iptcdata[t]},h.getAllTags=function(e){if(!r(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},h.getAllIptcTags=function(e){if(!r(e))return{};var t,n=e.iptcdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},h.pretty=function(e){if(!r(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},h.readFromBinaryFile=function(e){return s(e)},void 0===(i=function(){return h}.apply(t,[]))||(e.exports=i)}).call(this)}])},1666:function(e){e.exports={name:"@shimo/plugin-uploader",version:"0.1.0",description:"",libraryName:"SmUploader",main:"dist/index.js",typings:"dist/types",files:["dist"],publishConfig:{registry:"http://registry.npm.shimo.run"},scripts:{prebuild:"rimraf dist",dev:"webpack --config ./webpack.config.js --env.dev",build:"webpack --config ./webpack.config.js --env.prod",prepublish:"npm run build",test:"jest","test:watch":"jest --watch","test:prod":"npm run test -- --coverage --no-cache"},keywords:[],author:"xuyongli@shimo.im",license:"UNLICENSED",devDependencies:{"@types/jest":"^22.0.0","@types/node":"^10.0.3",jest:"^22.0.2","ts-jest":"^22.0.0","ts-node":"^6.0.0"},dependencies:{"@shimo/dropzone":"^0.0.23","@shimo/simple-i18n":"latest",eventemitter3:"^3.1.0","qiniu-js":"^2.4.0",tslib:"1.10.0"},peerDependencies:{axios:"^0.17.0"},jest:{transform:{".(ts|tsx)":"<rootDir>/node_modules/ts-jest/preprocessor.js"},testRegex:"(/__tests__/.*|\\.(test|spec))\\.(ts|tsx|js)$",moduleFileExtensions:["ts","tsx","js"],coveragePathIgnorePatterns:["/node_modules/","/test/"],coverageThreshold:{global:{branches:90,functions:95,lines:95,statements:95}},collectCoverage:!0}}},1667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QiniuSettings=t.ServerSettings=t.DefaultSettings=void 0;var r,i=(r=n(5))&&r.__esModule?r:{default:r};var o={hiddenInputContainer:".dz-hidden-input-container",clickable:".dz-container",createImageThumbnails:!1,maxFilesize:1/0,parallelUploads:1/0,previewsContainer:!1,paramName:"file",timeout:1/0,ignoreHiddenFiles:!0,autoDiscover:!1,dictDefaultMessage:(0,i.default)("拖动文件上传"),dictCancelUpload:(0,i.default)("上传已取消"),dictFallbackMessage:(0,i.default)("上传失败，浏览器不支持拖动上传"),dictFallbackText:(0,i.default)("请使用旧版本浏览器的上传方式"),dictFileTooBig:(0,i.default)("文件大小超出限制， 允许文件上限: {{maxFilesize}}MB"),dictInvalidFileType:(0,i.default)("上传失败, 请上传 jpg / jpeg / png / gif 格式图片"),dictResponseError:(0,i.default)("上传失败，请检查网络或稍后再试"),dictCancelUploadConfirmation:(0,i.default)("您确认要取消上传该文件吗？"),dictRemoveFile:(0,i.default)("删除"),dictRemoveFileConfirmation:null,dictMaxFilesExceeded:(0,i.default)("抱歉，您上传的文件数量超出了限制")};t.DefaultSettings=o;t.QiniuSettings={autoProcessQueue:!1};t.ServerSettings={SERVER:"qiniu",SERVER_URL:"https://up.qbox.me/",TOKEN_EXPIRE_TIME:18e5}},1668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={START:"uploader/start",CANCEL:"uploader/cancel",SENDING:"uploader/sending",PROCESS:"uploader/process",SUCCESS:"uploader/success",FAIL:"uploader/fail",DROP:"uploader/drop",LOAD_SUCCESS:"uploader/load_success"};t.default=r,e.exports=t.default},1669:function(e){e.exports={name:"@shimo/sdk-document-plugin-upload-monitor",version:"1.0.29",description:"",main:"dist/index.js",typings:"dist/types",files:["dist"],scripts:{prebuild:"rimraf dist",dev:"webpack --config ./webpack.config.js --env.dev",build:"webpack --config ./webpack.config.js --env.prod",prepublish:"npm run build"},keywords:[],author:"xuyongli@shimo.im",license:"UNLICENSED",dependencies:{"@shimo/plugin-uploader":"^0.1.0","@shimo/sdk-document-utils":"^1.0.23",ismobilejs:"^0.4.1"},peerDependencies:{"@shimo/simple-i18n":"latest",lodash:"^4.17.10",tslib:"1.10.0"},publishConfig:{registry:"http://registry.npm.shimo.run"}}},1670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getAttachmentClass",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getImageClass",{enumerable:!0,get:function(){return i.default}});var r=o(n(1671)),i=o(n(1672));function o(e){return e&&e.__esModule?e:{default:e}}},1671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n.progressBar=t.querySelector(".upload-progress-bar"),n.statusBar=t.querySelector(".upload-status"),n.leftGuard&&n.leftGuard.remove(),n}return(0,i.__extends)(t,e),t.create=function(n){void 0===n&&(n={});var r=e.create.call(this,n);return"string"==typeof n&&(n={id:n}),(n=(0,i.__assign)({},n)).id||(n={id:""},r.style.display="none"),n.progress=parseInt(n.progress,10)||0,r.id=n.id,r.setAttribute("contenteditable",!1),n.type=n.type?(0,o.default)("音频"):(0,o.default)("附件"),r.innerHTML=(0,s.template)(t.template)(n),r},t.formats=function(){if(this.progressBar)return{progress:this.progressBar.style.width}},t.value=function(){if(this.progressBar)return{placeholder:{id:this.domNode.id,progress:this.progressBar.style.width}}},t.prototype.format=function(e,t){if("progress"===e){var n=parseInt(t,10);this.progressBar.style.width=n+"%"}else if("status"===e){var r={success:(0,o.default)("上传成功"),fail:(0,o.default)("上传失败")};this.statusBar&&r[t]&&(this.statusBar.innerHTML=r[t])}},t}(e);return t.blotName="upload-placeholder-attachment",t.tagName="DIV",t.className="ql-upload-placeholder-attachment",t.template=['<span class="upload-loading-block">','<span class="upload-status"><%= type %>'+(0,o.default)("上传中...")+"</span>",'<span class="upload-progress-groove">','<span class="upload-progress-bar" style="width:<%= progress %>;"></span>','<span class="upload-cancel-btn" title="'+(0,o.default)("取消上传")+'" data-file-id="<%= id %>"></span>',"</span>","</span>"].join(""),t};var r,i=n(0),o=(r=n(5))&&r.__esModule?r:{default:r},s=n(2);e.exports=t.default},1672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n.progressBar=t.querySelector(".upload-progress-bar"),n}return(0,i.__extends)(t,e),t.create=function(n){var r=e.create.call(this,n);"string"==typeof n&&(n={id:n,src:""}),(n=(0,i.__assign)({src:"",width:"0px",height:"0px"},n)).id||(n={id:"",src:"",width:200,height:200},r.style.display="none"),n.progress=parseInt(n.progress,10)||0,r.id=""+n.id,n.showBar=n.showBar||!1,r.innerHTML=(0,s.template)(t.template)(n);var o=r.querySelector(".img-wrapper img");return o.__showbar=n.showBar,r},t.prototype.format=function(e,t){var n=this.domNode.querySelector(".img-wrapper img"),r=n.__showbar;if("progress"===e){var i=(parseInt(t,10)||0)+"%";this.progressBar.style.width=i}else if("status"===e){if("success"===t)this.domNode.classList.add("loaded");else if("fail"===t){this.domNode.classList.add("failed");var l=this.domNode.querySelector(".upload-status");l&&(l.innerHTML=(0,o.default)("上传失败"))}}else(0,s.includes)(["src","width","height"],e)&&(n.setAttribute(e,t),"inline-block"!==this.domNode.style.display&&(this.domNode.style.display="inline-block"));r||("width"===e&&t<a&&this.domNode.classList.add("narrow"),"height"===e&&t<u&&this.domNode.classList.add("low"))},t}(e);return t.blotName="upload-placeholder-image",t.tagName="DIV",t.className="ql-upload-placeholder-image",t.template=['<span class="upload-loadding-embed">','<span class="img-wrapper">','<img src="<%= src %>" width="<%= width %>" height="auto" />','<span class="upload-loading-block">','<span class="upload-status"></span>','<span class="upload-progress-groove">','<span class="upload-progress-bar" style="width:<%= progress %>%;"></span>',"</span>","<% if (!showBar) { %>",'<span class="upload-cancel-btn" title="'+(0,o.default)("取消上传")+'" data-file-id="<%= id %>"></span>',"<% } %>","</span>","</span>","</span>"].join(""),t};var r,i=n(0),o=(r=n(5))&&r.__esModule?r:{default:r},s=n(2);var a=140,u=30;e.exports=t.default},2:function(t,n){t.exports=e},4:function(e,n){e.exports=t},45:function(e,t){e.exports=o}})});